var Dy=t=>{throw TypeError(t)};var Qd=(t,e,n)=>e.has(t)||Dy("Cannot "+n);var D=(t,e,n)=>(Qd(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?Dy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),K=(t,e,n,r)=>(Qd(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fe=(t,e,n)=>(Qd(t,e,"access private method"),n);var Wl=(t,e,n,r)=>({set _(i){K(t,e,i,n)},get _(){return D(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function uR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dI={exports:{}},bc={},fI={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),cR=Symbol.for("react.portal"),dR=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),hR=Symbol.for("react.profiler"),pR=Symbol.for("react.provider"),mR=Symbol.for("react.context"),gR=Symbol.for("react.forward_ref"),yR=Symbol.for("react.suspense"),_R=Symbol.for("react.memo"),vR=Symbol.for("react.lazy"),Vy=Symbol.iterator;function TR(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var hI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pI=Object.assign,mI={};function _o(t,e,n){this.props=t,this.context=e,this.refs=mI,this.updater=n||hI}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gI(){}gI.prototype=_o.prototype;function xp(t,e,n){this.props=t,this.context=e,this.refs=mI,this.updater=n||hI}var Mp=xp.prototype=new gI;Mp.constructor=xp;pI(Mp,_o.prototype);Mp.isPureReactComponent=!0;var Ly=Array.isArray,yI=Object.prototype.hasOwnProperty,Dp={current:null},_I={key:!0,ref:!0,__self:!0,__source:!0};function vI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yI.call(e,r)&&!_I.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:fl,type:t,key:s,ref:o,props:i,_owner:Dp.current}}function ER(t,e){return{$$typeof:fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vp(t){return typeof t=="object"&&t!==null&&t.$$typeof===fl}function IR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uy=/\/+/g;function Yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IR(""+t.key):e.toString(36)}function _u(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fl:case cR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Yd(o,0):r,Ly(i)?(n="",t!=null&&(n=t.replace(Uy,"$&/")+"/"),_u(i,e,n,"",function(u){return u})):i!=null&&(Vp(i)&&(i=ER(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ly(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Yd(s,a);o+=_u(s,e,n,l,i)}else if(l=TR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Yd(s,a++),o+=_u(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,n){if(t==null)return t;var r=[],i=0;return _u(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},vu={transition:null},SR={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:vu,ReactCurrentOwner:Dp};function TI(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Vp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=_o;le.Fragment=dR;le.Profiler=hR;le.PureComponent=xp;le.StrictMode=fR;le.Suspense=yR;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SR;le.act=TI;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Dp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yI.call(e,l)&&!_I.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:fl,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:mR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pR,_context:t},t.Consumer=t};le.createElement=vI;le.createFactory=function(t){var e=vI.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:gR,render:t}};le.isValidElement=Vp;le.lazy=function(t){return{$$typeof:vR,_payload:{_status:-1,_result:t},_init:wR}};le.memo=function(t,e){return{$$typeof:_R,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=vu.transition;vu.transition={};try{t()}finally{vu.transition=e}};le.unstable_act=TI;le.useCallback=function(t,e){return Nt.current.useCallback(t,e)};le.useContext=function(t){return Nt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Nt.current.useEffect(t,e)};le.useId=function(){return Nt.current.useId()};le.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Nt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};le.useRef=function(t){return Nt.current.useRef(t)};le.useState=function(t){return Nt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Nt.current.useTransition()};le.version="18.3.1";fI.exports=le;var oe=fI.exports;const ms=uR(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR=oe,AR=Symbol.for("react.element"),RR=Symbol.for("react.fragment"),PR=Object.prototype.hasOwnProperty,NR=CR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kR={key:!0,ref:!0,__self:!0,__source:!0};function EI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PR.call(e,r)&&!kR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AR,type:t,key:s,ref:o,props:i,_owner:NR.current}}bc.Fragment=RR;bc.jsx=EI;bc.jsxs=EI;dI.exports=bc;var F=dI.exports,II={exports:{}},Jt={},wI={exports:{}},SI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,W){var X=G.length;G.push(W);e:for(;0<X;){var j=X-1>>>1,ke=G[j];if(0<i(ke,W))G[j]=W,G[X]=ke,X=j;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],X=G.pop();if(X!==W){G[0]=X;e:for(var j=0,ke=G.length,Ge=ke>>>1;j<Ge;){var je=2*(j+1)-1,gi=G[je],an=je+1,cr=G[an];if(0>i(gi,X))an<ke&&0>i(cr,gi)?(G[j]=cr,G[an]=X,j=an):(G[j]=gi,G[je]=X,j=je);else if(an<ke&&0>i(cr,X))G[j]=cr,G[an]=X,j=an;else break e}}return W}function i(G,W){var X=G.sortIndex-W.sortIndex;return X!==0?X:G.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,m=3,_=!1,R=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=G)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function V(G){if(P=!1,C(G),!R)if(n(l)!==null)R=!0,Ze(L);else{var W=n(u);W!==null&&ae(V,W.startTime-G)}}function L(G,W){R=!1,P&&(P=!1,w(v),v=-1),_=!0;var X=m;try{for(C(W),p=n(l);p!==null&&(!(p.expirationTime>W)||G&&!k());){var j=p.callback;if(typeof j=="function"){p.callback=null,m=p.priorityLevel;var ke=j(p.expirationTime<=W);W=t.unstable_now(),typeof ke=="function"?p.callback=ke:p===n(l)&&r(l),C(W)}else r(l);p=n(l)}if(p!==null)var Ge=!0;else{var je=n(u);je!==null&&ae(V,je.startTime-W),Ge=!1}return Ge}finally{p=null,m=X,_=!1}}var b=!1,S=null,v=-1,I=5,A=-1;function k(){return!(t.unstable_now()-A<I)}function M(){if(S!==null){var G=t.unstable_now();A=G;var W=!0;try{W=S(!0,G)}finally{W?N():(b=!1,S=null)}}else b=!1}var N;if(typeof T=="function")N=function(){T(M)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,It=Pe.port2;Pe.port1.onmessage=M,N=function(){It.postMessage(null)}}else N=function(){x(M,0)};function Ze(G){S=G,b||(b=!0,N())}function ae(G,W){v=x(function(){G(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,Ze(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var X=m;m=W;try{return G()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=m;m=G;try{return W()}finally{m=X}},t.unstable_scheduleCallback=function(G,W,X){var j=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?j+X:j):X=j,G){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=X+ke,G={id:h++,callback:W,priorityLevel:G,startTime:X,expirationTime:ke,sortIndex:-1},X>j?(G.sortIndex=X,e(u,G),n(l)===null&&G===n(u)&&(P?(w(v),v=-1):P=!0,ae(V,X-j))):(G.sortIndex=ke,e(l,G),R||_||(R=!0,Ze(L))),G},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(G){var W=m;return function(){var X=m;m=W;try{return G.apply(this,arguments)}finally{m=X}}}})(SI);wI.exports=SI;var xR=wI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MR=oe,Kt=xR;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CI=new Set,Ma={};function ns(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(Ma[t]=e,t=0;t<e.length;t++)CI.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qf=Object.prototype.hasOwnProperty,DR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fy={},by={};function VR(t){return qf.call(by,t)?!0:qf.call(Fy,t)?!1:DR.test(t)?by[t]=!0:(Fy[t]=!0,!1)}function LR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UR(t,e,n,r){if(e===null||typeof e>"u"||LR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lp=/[\-:]([a-z])/g;function Up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lp,Up);ct[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lp,Up);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lp,Up);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fp(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UR(e,n,i,r)&&(n=null),r||i===null?VR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=MR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),gs=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),AI=Symbol.for("react.provider"),RI=Symbol.for("react.context"),Op=Symbol.for("react.forward_ref"),Gf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),qp=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),PI=Symbol.for("react.offscreen"),Oy=Symbol.iterator;function Yo(t){return t===null||typeof t!="object"?null:(t=Oy&&t[Oy]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Xd;function aa(t){if(Xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xd=e&&e[1]||""}return`
`+Xd+t}var Zd=!1;function jd(t,e){if(!t||Zd)return"";Zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function FR(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=jd(t.type,!1),t;case 11:return t=jd(t.type.render,!1),t;case 1:return t=jd(t.type,!0),t;default:return""}}function $f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ys:return"Fragment";case gs:return"Portal";case Bf:return"Profiler";case bp:return"StrictMode";case Gf:return"Suspense";case Hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RI:return(t.displayName||"Context")+".Consumer";case AI:return(t._context.displayName||"Context")+".Provider";case Op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qp:return e=t.displayName||null,e!==null?e:$f(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return $f(t(e))}catch{}}return null}function bR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $f(e);case 8:return e===bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OR(t){var e=NI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ql(t){t._valueTracker||(t._valueTracker=OR(t))}function kI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=NI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zf(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xI(t,e){e=e.checked,e!=null&&Fp(t,"checked",e,!1)}function Wf(t,e){xI(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kf(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function By(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kf(t,e,n){(e!=="number"||Hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var la=Array.isArray;function Ns(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(la(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function MI(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yl,VI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yl=Yl||document.createElement("div"),Yl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qR=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){qR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function LI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function UI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BR=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(t,e){if(e){if(BR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=null;function Bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,ks=null,xs=null;function $y(t){if(t=ml(t)){if(typeof jf!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Hc(e),jf(t.stateNode,t.type,e))}}function FI(t){ks?xs?xs.push(t):xs=[t]:ks=t}function bI(){if(ks){var t=ks,e=xs;if(xs=ks=null,$y(t),e)for(t=0;t<e.length;t++)$y(e[t])}}function OI(t,e){return t(e)}function qI(){}var ef=!1;function BI(t,e,n){if(ef)return t(e,n);ef=!0;try{return OI(t,e,n)}finally{ef=!1,(ks!==null||xs!==null)&&(qI(),bI())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var eh=!1;if(Zn)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){eh=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{eh=!1}function GR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ya=!1,$u=null,zu=!1,th=null,HR={onError:function(t){ya=!0,$u=t}};function $R(t,e,n,r,i,s,o,a,l){ya=!1,$u=null,GR.apply(HR,arguments)}function zR(t,e,n,r,i,s,o,a,l){if($R.apply(this,arguments),ya){if(ya){var u=$u;ya=!1,$u=null}else throw Error(H(198));zu||(zu=!0,th=u)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zy(t){if(rs(t)!==t)throw Error(H(188))}function WR(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zy(i),t;if(s===r)return zy(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function HI(t){return t=WR(t),t!==null?$I(t):null}function $I(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$I(t);if(e!==null)return e;t=t.sibling}return null}var zI=Kt.unstable_scheduleCallback,Wy=Kt.unstable_cancelCallback,KR=Kt.unstable_shouldYield,JR=Kt.unstable_requestPaint,Be=Kt.unstable_now,QR=Kt.unstable_getCurrentPriorityLevel,Gp=Kt.unstable_ImmediatePriority,WI=Kt.unstable_UserBlockingPriority,Wu=Kt.unstable_NormalPriority,YR=Kt.unstable_LowPriority,KI=Kt.unstable_IdlePriority,Oc=null,xn=null;function XR(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Oc,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:eP,ZR=Math.log,jR=Math.LN2;function eP(t){return t>>>=0,t===0?32:31-(ZR(t)/jR|0)|0}var Xl=64,Zl=4194304;function ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ua(a):(s&=o,s!==0&&(r=ua(s)))}else o=n&~i,o!==0?r=ua(o):s!==0&&(r=ua(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function tP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=tP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function nh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function JI(){var t=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),t}function tf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function rP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function QI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YI,$p,XI,ZI,jI,rh=!1,jl=[],Or=null,qr=null,Br=null,La=new Map,Ua=new Map,Ir=[],iP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":La.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Zo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ml(e),e!==null&&$p(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sP(t,e,n,r,i){switch(e){case"focusin":return Or=Zo(Or,t,e,n,r,i),!0;case"dragenter":return qr=Zo(qr,t,e,n,r,i),!0;case"mouseover":return Br=Zo(Br,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return La.set(s,Zo(La.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Zo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function ew(t){var e=Ci(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=GI(n),e!==null){t.blockedOn=e,jI(t.priority,function(){XI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ih(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zf=r,n.target.dispatchEvent(r),Zf=null}else return e=ml(n),e!==null&&$p(e),t.blockedOn=n,!1;e.shift()}return!0}function Jy(t,e,n){Tu(t)&&n.delete(e)}function oP(){rh=!1,Or!==null&&Tu(Or)&&(Or=null),qr!==null&&Tu(qr)&&(qr=null),Br!==null&&Tu(Br)&&(Br=null),La.forEach(Jy),Ua.forEach(Jy)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,rh||(rh=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,oP)))}function Fa(t){function e(i){return jo(i,t)}if(0<jl.length){jo(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&jo(Or,t),qr!==null&&jo(qr,t),Br!==null&&jo(Br,t),La.forEach(e),Ua.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)ew(n),n.blockedOn===null&&Ir.shift()}var Ms=ar.ReactCurrentBatchConfig,Ju=!0;function aP(t,e,n,r){var i=ve,s=Ms.transition;Ms.transition=null;try{ve=1,zp(t,e,n,r)}finally{ve=i,Ms.transition=s}}function lP(t,e,n,r){var i=ve,s=Ms.transition;Ms.transition=null;try{ve=4,zp(t,e,n,r)}finally{ve=i,Ms.transition=s}}function zp(t,e,n,r){if(Ju){var i=ih(t,e,n,r);if(i===null)ff(t,e,r,Qu,n),Ky(t,r);else if(sP(i,t,e,n,r))r.stopPropagation();else if(Ky(t,r),e&4&&-1<iP.indexOf(t)){for(;i!==null;){var s=ml(i);if(s!==null&&YI(s),s=ih(t,e,n,r),s===null&&ff(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ff(t,e,r,null,n)}}var Qu=null;function ih(t,e,n,r){if(Qu=null,t=Bp(r),t=Ci(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function tw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QR()){case Gp:return 1;case WI:return 4;case Wu:case YR:return 16;case KI:return 536870912;default:return 16}default:return 16}}var Lr=null,Wp=null,Eu=null;function nw(){if(Eu)return Eu;var t,e=Wp,n=e.length,r,i="value"in Lr?Lr.value:Lr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Eu=i.slice(t,1<r?1-r:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eu(){return!0}function Qy(){return!1}function Qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eu:Qy,this.isPropagationStopped=Qy,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=Qt(vo),pl=De({},vo,{view:0,detail:0}),uP=Qt(pl),nf,rf,ea,qc=De({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ea&&(ea&&t.type==="mousemove"?(nf=t.screenX-ea.screenX,rf=t.screenY-ea.screenY):rf=nf=0,ea=t),nf)},movementY:function(t){return"movementY"in t?t.movementY:rf}}),Yy=Qt(qc),cP=De({},qc,{dataTransfer:0}),dP=Qt(cP),fP=De({},pl,{relatedTarget:0}),sf=Qt(fP),hP=De({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),pP=Qt(hP),mP=De({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gP=Qt(mP),yP=De({},vo,{data:0}),Xy=Qt(yP),_P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TP[t])?!!e[t]:!1}function Jp(){return EP}var IP=De({},pl,{key:function(t){if(t.key){var e=_P[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wP=Qt(IP),SP=De({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zy=Qt(SP),CP=De({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),AP=Qt(CP),RP=De({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),PP=Qt(RP),NP=De({},qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kP=Qt(NP),xP=[9,13,27,32],Qp=Zn&&"CompositionEvent"in window,_a=null;Zn&&"documentMode"in document&&(_a=document.documentMode);var MP=Zn&&"TextEvent"in window&&!_a,rw=Zn&&(!Qp||_a&&8<_a&&11>=_a),jy=" ",e_=!1;function iw(t,e){switch(t){case"keyup":return xP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function DP(t,e){switch(t){case"compositionend":return sw(e);case"keypress":return e.which!==32?null:(e_=!0,jy);case"textInput":return t=e.data,t===jy&&e_?null:t;default:return null}}function VP(t,e){if(_s)return t==="compositionend"||!Qp&&iw(t,e)?(t=nw(),Eu=Wp=Lr=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rw&&e.locale!=="ko"?null:e.data;default:return null}}var LP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LP[t.type]:e==="textarea"}function ow(t,e,n,r){FI(r),e=Yu(e,"onChange"),0<e.length&&(n=new Kp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var va=null,ba=null;function UP(t){yw(t,0)}function Bc(t){var e=Es(t);if(kI(e))return t}function FP(t,e){if(t==="change")return e}var aw=!1;if(Zn){var of;if(Zn){var af="oninput"in document;if(!af){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),af=typeof n_.oninput=="function"}of=af}else of=!1;aw=of&&(!document.documentMode||9<document.documentMode)}function r_(){va&&(va.detachEvent("onpropertychange",lw),ba=va=null)}function lw(t){if(t.propertyName==="value"&&Bc(ba)){var e=[];ow(e,ba,t,Bp(t)),BI(UP,e)}}function bP(t,e,n){t==="focusin"?(r_(),va=e,ba=n,va.attachEvent("onpropertychange",lw)):t==="focusout"&&r_()}function OP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bc(ba)}function qP(t,e){if(t==="click")return Bc(e)}function BP(t,e){if(t==="input"||t==="change")return Bc(e)}function GP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:GP;function Oa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qf.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function i_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s_(t,e){var n=i_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i_(n)}}function uw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cw(){for(var t=window,e=Hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hu(t.document)}return e}function Yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HP(t){var e=cw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uw(n.ownerDocument.documentElement,n)){if(r!==null&&Yp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=s_(n,s);var o=s_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $P=Zn&&"documentMode"in document&&11>=document.documentMode,vs=null,sh=null,Ta=null,oh=!1;function o_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oh||vs==null||vs!==Hu(r)||(r=vs,"selectionStart"in r&&Yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ta&&Oa(Ta,r)||(Ta=r,r=Yu(sh,"onSelect"),0<r.length&&(e=new Kp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vs)))}function tu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},lf={},dw={};Zn&&(dw=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Gc(t){if(lf[t])return lf[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dw)return lf[t]=e[n];return t}var fw=Gc("animationend"),hw=Gc("animationiteration"),pw=Gc("animationstart"),mw=Gc("transitionend"),gw=new Map,a_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,e){gw.set(t,e),ns(e,[t])}for(var uf=0;uf<a_.length;uf++){var cf=a_[uf],zP=cf.toLowerCase(),WP=cf[0].toUpperCase()+cf.slice(1);ui(zP,"on"+WP)}ui(fw,"onAnimationEnd");ui(hw,"onAnimationIteration");ui(pw,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(mw,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function l_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zR(r,e,void 0,t),t.currentTarget=null}function yw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;l_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;l_(i,a,u),s=l}}}if(zu)throw t=th,zu=!1,th=null,t}function Se(t,e){var n=e[dh];n===void 0&&(n=e[dh]=new Set);var r=t+"__bubble";n.has(r)||(_w(e,t,2,!1),n.add(r))}function df(t,e,n){var r=0;e&&(r|=4),_w(n,t,r,e)}var nu="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[nu]){t[nu]=!0,CI.forEach(function(n){n!=="selectionchange"&&(KP.has(n)||df(n,!1,t),df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nu]||(e[nu]=!0,df("selectionchange",!1,e))}}function _w(t,e,n,r){switch(tw(e)){case 1:var i=aP;break;case 4:i=lP;break;default:i=zp}n=i.bind(null,e,n,t),i=void 0,!eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ff(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ci(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BI(function(){var u=s,h=Bp(n),p=[];e:{var m=gw.get(t);if(m!==void 0){var _=Kp,R=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":_=wP;break;case"focusin":R="focus",_=sf;break;case"focusout":R="blur",_=sf;break;case"beforeblur":case"afterblur":_=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=dP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=AP;break;case fw:case hw:case pw:_=pP;break;case mw:_=PP;break;case"scroll":_=uP;break;case"wheel":_=kP;break;case"copy":case"cut":case"paste":_=gP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Zy}var P=(e&4)!==0,x=!P&&t==="scroll",w=P?m!==null?m+"Capture":null:m;P=[];for(var T=u,C;T!==null;){C=T;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,w!==null&&(V=Va(T,w),V!=null&&P.push(Ba(T,V,C)))),x)break;T=T.return}0<P.length&&(m=new _(m,R,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Zf&&(R=n.relatedTarget||n.fromElement)&&(Ci(R)||R[jn]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=u,R=R?Ci(R):null,R!==null&&(x=rs(R),R!==x||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=u),_!==R)){if(P=Yy,V="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=Zy,V="onPointerLeave",w="onPointerEnter",T="pointer"),x=_==null?m:Es(_),C=R==null?m:Es(R),m=new P(V,T+"leave",_,n,h),m.target=x,m.relatedTarget=C,V=null,Ci(h)===u&&(P=new P(w,T+"enter",R,n,h),P.target=C,P.relatedTarget=x,V=P),x=V,_&&R)t:{for(P=_,w=R,T=0,C=P;C;C=cs(C))T++;for(C=0,V=w;V;V=cs(V))C++;for(;0<T-C;)P=cs(P),T--;for(;0<C-T;)w=cs(w),C--;for(;T--;){if(P===w||w!==null&&P===w.alternate)break t;P=cs(P),w=cs(w)}P=null}else P=null;_!==null&&u_(p,m,_,P,!1),R!==null&&x!==null&&u_(p,x,R,P,!0)}}e:{if(m=u?Es(u):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=FP;else if(t_(m))if(aw)L=BP;else{L=OP;var b=bP}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=qP);if(L&&(L=L(t,u))){ow(p,L,n,h);break e}b&&b(t,m,u),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&Kf(m,"number",m.value)}switch(b=u?Es(u):window,t){case"focusin":(t_(b)||b.contentEditable==="true")&&(vs=b,sh=u,Ta=null);break;case"focusout":Ta=sh=vs=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,o_(p,n,h);break;case"selectionchange":if($P)break;case"keydown":case"keyup":o_(p,n,h)}var S;if(Qp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else _s?iw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(rw&&n.locale!=="ko"&&(_s||v!=="onCompositionStart"?v==="onCompositionEnd"&&_s&&(S=nw()):(Lr=h,Wp="value"in Lr?Lr.value:Lr.textContent,_s=!0)),b=Yu(u,v),0<b.length&&(v=new Xy(v,t,null,n,h),p.push({event:v,listeners:b}),S?v.data=S:(S=sw(n),S!==null&&(v.data=S)))),(S=MP?DP(t,n):VP(t,n))&&(u=Yu(u,"onBeforeInput"),0<u.length&&(h=new Xy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=S))}yw(p,e)})}function Ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Va(t,n),s!=null&&r.unshift(Ba(t,s,i)),s=Va(t,e),s!=null&&r.push(Ba(t,s,i))),t=t.return}return r}function cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Va(n,s),l!=null&&o.unshift(Ba(n,l,a))):i||(l=Va(n,s),l!=null&&o.push(Ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JP=/\r\n?/g,QP=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(JP,`
`).replace(QP,"")}function ru(t,e,n){if(e=c_(e),c_(t)!==e&&n)throw Error(H(425))}function Xu(){}var ah=null,lh=null;function uh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ch=typeof setTimeout=="function"?setTimeout:void 0,YP=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,XP=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(t){return d_.resolve(null).then(t).catch(ZP)}:ch;function ZP(t){setTimeout(function(){throw t})}function hf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function Gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function f_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var To=Math.random().toString(36).slice(2),kn="__reactFiber$"+To,Ga="__reactProps$"+To,jn="__reactContainer$"+To,dh="__reactEvents$"+To,jP="__reactListeners$"+To,eN="__reactHandles$"+To;function Ci(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=f_(t);t!==null;){if(n=t[kn])return n;t=f_(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[kn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Hc(t){return t[Ga]||null}var fh=[],Is=-1;function ci(t){return{current:t}}function Re(t){0>Is||(t.current=fh[Is],fh[Is]=null,Is--)}function Ie(t,e){Is++,fh[Is]=t.current,t.current=e}var ei={},Tt=ci(ei),Ft=ci(!1),zi=ei;function to(t,e){var n=t.type.contextTypes;if(!n)return ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function Zu(){Re(Ft),Re(Tt)}function h_(t,e,n){if(Tt.current!==ei)throw Error(H(168));Ie(Tt,e),Ie(Ft,n)}function vw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,bR(t)||"Unknown",i));return De({},n,r)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,zi=Tt.current,Ie(Tt,t),Ie(Ft,Ft.current),!0}function p_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=vw(t,e,zi),r.__reactInternalMemoizedMergedChildContext=t,Re(Ft),Re(Tt),Ie(Tt,t)):Re(Ft),Ie(Ft,n)}var Gn=null,$c=!1,pf=!1;function Tw(t){Gn===null?Gn=[t]:Gn.push(t)}function tN(t){$c=!0,Tw(t)}function di(){if(!pf&&Gn!==null){pf=!0;var t=0,e=ve;try{var n=Gn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,$c=!1}catch(i){throw Gn!==null&&(Gn=Gn.slice(t+1)),zI(Gp,di),i}finally{ve=e,pf=!1}}return null}var ws=[],Ss=0,ec=null,tc=0,Zt=[],jt=0,Wi=null,Wn=1,Kn="";function Ii(t,e){ws[Ss++]=tc,ws[Ss++]=ec,ec=t,tc=e}function Ew(t,e,n){Zt[jt++]=Wn,Zt[jt++]=Kn,Zt[jt++]=Wi,Wi=t;var r=Wn;t=Kn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wn=1<<32-gn(e)+i|n<<i|r,Kn=s+t}else Wn=1<<s|n<<i|r,Kn=t}function Xp(t){t.return!==null&&(Ii(t,1),Ew(t,1,0))}function Zp(t){for(;t===ec;)ec=ws[--Ss],ws[Ss]=null,tc=ws[--Ss],ws[Ss]=null;for(;t===Wi;)Wi=Zt[--jt],Zt[jt]=null,Kn=Zt[--jt],Zt[jt]=null,Wn=Zt[--jt],Zt[jt]=null}var Wt=null,$t=null,Ne=!1,hn=null;function Iw(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,$t=Gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wi!==null?{id:Wn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,$t=null,!0):!1;default:return!1}}function hh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ph(t){if(Ne){var e=$t;if(e){var n=e;if(!m_(t,e)){if(hh(t))throw Error(H(418));e=Gr(n.nextSibling);var r=Wt;e&&m_(t,e)?Iw(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Wt=t)}}else{if(hh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ne=!1,Wt=t}}}function g_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function iu(t){if(t!==Wt)return!1;if(!Ne)return g_(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uh(t.type,t.memoizedProps)),e&&(e=$t)){if(hh(t))throw ww(),Error(H(418));for(;e;)Iw(t,e),e=Gr(e.nextSibling)}if(g_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Wt?Gr(t.stateNode.nextSibling):null;return!0}function ww(){for(var t=$t;t;)t=Gr(t.nextSibling)}function no(){$t=Wt=null,Ne=!1}function jp(t){hn===null?hn=[t]:hn.push(t)}var nN=ar.ReactCurrentBatchConfig;function ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function su(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y_(t){var e=t._init;return e(t._payload)}function Sw(t){function e(w,T){if(t){var C=w.deletions;C===null?(w.deletions=[T],w.flags|=16):C.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function i(w,T){return w=Wr(w,T),w.index=0,w.sibling=null,w}function s(w,T,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<T?(w.flags|=2,T):C):(w.flags|=2,T)):(w.flags|=1048576,T)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,T,C,V){return T===null||T.tag!==6?(T=Ef(C,w.mode,V),T.return=w,T):(T=i(T,C),T.return=w,T)}function l(w,T,C,V){var L=C.type;return L===ys?h(w,T,C.props.children,V,C.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Tr&&y_(L)===T.type)?(V=i(T,C.props),V.ref=ta(w,T,C),V.return=w,V):(V=Nu(C.type,C.key,C.props,null,w.mode,V),V.ref=ta(w,T,C),V.return=w,V)}function u(w,T,C,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=If(C,w.mode,V),T.return=w,T):(T=i(T,C.children||[]),T.return=w,T)}function h(w,T,C,V,L){return T===null||T.tag!==7?(T=Bi(C,w.mode,V,L),T.return=w,T):(T=i(T,C),T.return=w,T)}function p(w,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Ef(""+T,w.mode,C),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Jl:return C=Nu(T.type,T.key,T.props,null,w.mode,C),C.ref=ta(w,null,T),C.return=w,C;case gs:return T=If(T,w.mode,C),T.return=w,T;case Tr:var V=T._init;return p(w,V(T._payload),C)}if(la(T)||Yo(T))return T=Bi(T,w.mode,C,null),T.return=w,T;su(w,T)}return null}function m(w,T,C,V){var L=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:a(w,T,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Jl:return C.key===L?l(w,T,C,V):null;case gs:return C.key===L?u(w,T,C,V):null;case Tr:return L=C._init,m(w,T,L(C._payload),V)}if(la(C)||Yo(C))return L!==null?null:h(w,T,C,V,null);su(w,C)}return null}function _(w,T,C,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(C)||null,a(T,w,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Jl:return w=w.get(V.key===null?C:V.key)||null,l(T,w,V,L);case gs:return w=w.get(V.key===null?C:V.key)||null,u(T,w,V,L);case Tr:var b=V._init;return _(w,T,C,b(V._payload),L)}if(la(V)||Yo(V))return w=w.get(C)||null,h(T,w,V,L,null);su(T,V)}return null}function R(w,T,C,V){for(var L=null,b=null,S=T,v=T=0,I=null;S!==null&&v<C.length;v++){S.index>v?(I=S,S=null):I=S.sibling;var A=m(w,S,C[v],V);if(A===null){S===null&&(S=I);break}t&&S&&A.alternate===null&&e(w,S),T=s(A,T,v),b===null?L=A:b.sibling=A,b=A,S=I}if(v===C.length)return n(w,S),Ne&&Ii(w,v),L;if(S===null){for(;v<C.length;v++)S=p(w,C[v],V),S!==null&&(T=s(S,T,v),b===null?L=S:b.sibling=S,b=S);return Ne&&Ii(w,v),L}for(S=r(w,S);v<C.length;v++)I=_(S,w,v,C[v],V),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?v:I.key),T=s(I,T,v),b===null?L=I:b.sibling=I,b=I);return t&&S.forEach(function(k){return e(w,k)}),Ne&&Ii(w,v),L}function P(w,T,C,V){var L=Yo(C);if(typeof L!="function")throw Error(H(150));if(C=L.call(C),C==null)throw Error(H(151));for(var b=L=null,S=T,v=T=0,I=null,A=C.next();S!==null&&!A.done;v++,A=C.next()){S.index>v?(I=S,S=null):I=S.sibling;var k=m(w,S,A.value,V);if(k===null){S===null&&(S=I);break}t&&S&&k.alternate===null&&e(w,S),T=s(k,T,v),b===null?L=k:b.sibling=k,b=k,S=I}if(A.done)return n(w,S),Ne&&Ii(w,v),L;if(S===null){for(;!A.done;v++,A=C.next())A=p(w,A.value,V),A!==null&&(T=s(A,T,v),b===null?L=A:b.sibling=A,b=A);return Ne&&Ii(w,v),L}for(S=r(w,S);!A.done;v++,A=C.next())A=_(S,w,v,A.value,V),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?v:A.key),T=s(A,T,v),b===null?L=A:b.sibling=A,b=A);return t&&S.forEach(function(M){return e(w,M)}),Ne&&Ii(w,v),L}function x(w,T,C,V){if(typeof C=="object"&&C!==null&&C.type===ys&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Jl:e:{for(var L=C.key,b=T;b!==null;){if(b.key===L){if(L=C.type,L===ys){if(b.tag===7){n(w,b.sibling),T=i(b,C.props.children),T.return=w,w=T;break e}}else if(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Tr&&y_(L)===b.type){n(w,b.sibling),T=i(b,C.props),T.ref=ta(w,b,C),T.return=w,w=T;break e}n(w,b);break}else e(w,b);b=b.sibling}C.type===ys?(T=Bi(C.props.children,w.mode,V,C.key),T.return=w,w=T):(V=Nu(C.type,C.key,C.props,null,w.mode,V),V.ref=ta(w,T,C),V.return=w,w=V)}return o(w);case gs:e:{for(b=C.key;T!==null;){if(T.key===b)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(w,T.sibling),T=i(T,C.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=If(C,w.mode,V),T.return=w,w=T}return o(w);case Tr:return b=C._init,x(w,T,b(C._payload),V)}if(la(C))return R(w,T,C,V);if(Yo(C))return P(w,T,C,V);su(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(w,T.sibling),T=i(T,C),T.return=w,w=T):(n(w,T),T=Ef(C,w.mode,V),T.return=w,w=T),o(w)):n(w,T)}return x}var ro=Sw(!0),Cw=Sw(!1),nc=ci(null),rc=null,Cs=null,em=null;function tm(){em=Cs=rc=null}function nm(t){var e=nc.current;Re(nc),t._currentValue=e}function mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){rc=t,em=Cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},Cs===null){if(rc===null)throw Error(H(308));Cs=t,rc.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return e}var Ai=null;function rm(t){Ai===null?Ai=[t]:Ai.push(t)}function Aw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rm(e)):(n.next=i.next,i.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Er=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,er(t,n)}return i=r.interleaved,i===null?(e.next=e,rm(r)):(e.next=i.next,i.next=e),r.interleaved=e,er(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hp(t,n)}}function __(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ic(t,e,n,r){var i=t.updateQueue;Er=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,_=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var R=t,P=a;switch(m=e,_=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){p=R.call(_,p,m);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,m=typeof R=="function"?R.call(_,p,m):R,m==null)break e;p=De({},p,m);break e;case 2:Er=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=p):h=h.next=_,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ji|=o,t.lanes=o,t.memoizedState=p}}function v_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var gl={},Mn=ci(gl),Ha=ci(gl),$a=ci(gl);function Ri(t){if(t===gl)throw Error(H(174));return t}function sm(t,e){switch(Ie($a,e),Ie(Ha,t),Ie(Mn,gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qf(e,t)}Re(Mn),Ie(Mn,e)}function io(){Re(Mn),Re(Ha),Re($a)}function Pw(t){Ri($a.current);var e=Ri(Mn.current),n=Qf(e,t.type);e!==n&&(Ie(Ha,t),Ie(Mn,n))}function om(t){Ha.current===t&&(Re(Mn),Re(Ha))}var xe=ci(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mf=[];function am(){for(var t=0;t<mf.length;t++)mf[t]._workInProgressVersionPrimary=null;mf.length=0}var Su=ar.ReactCurrentDispatcher,gf=ar.ReactCurrentBatchConfig,Ki=0,Me=null,Qe=null,rt=null,oc=!1,Ea=!1,za=0,rN=0;function ht(){throw Error(H(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function um(t,e,n,r,i,s){if(Ki=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Su.current=t===null||t.memoizedState===null?aN:lN,t=n(r,i),Ea){s=0;do{if(Ea=!1,za=0,25<=s)throw Error(H(301));s+=1,rt=Qe=null,e.updateQueue=null,Su.current=uN,t=n(r,i)}while(Ea)}if(Su.current=ac,e=Qe!==null&&Qe.next!==null,Ki=0,rt=Qe=Me=null,oc=!1,e)throw Error(H(300));return t}function cm(){var t=za!==0;return za=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function on(){if(Qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(H(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function Wa(t,e){return typeof e=="function"?e(t):e}function yf(t){var e=on(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Ki&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Me.lanes|=h,Ji|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,vn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,Ji|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _f(t){var e=on(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vn(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Nw(){}function kw(t,e){var n=Me,r=on(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ut=!0),r=r.queue,dm(Dw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Ka(9,Mw.bind(null,n,r,i,e),void 0,null),it===null)throw Error(H(349));Ki&30||xw(n,e,i)}return i}function xw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mw(t,e,n,r){e.value=n,e.getSnapshot=r,Vw(e)&&Lw(t)}function Dw(t,e,n){return n(function(){Vw(e)&&Lw(t)})}function Vw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Lw(t){var e=er(t,1);e!==null&&yn(e,t,1,-1)}function T_(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=oN.bind(null,Me,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uw(){return on().memoizedState}function Cu(t,e,n,r){var i=Cn();Me.flags|=t,i.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function zc(t,e,n,r){var i=on();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var o=Qe.memoizedState;if(s=o.destroy,r!==null&&lm(r,o.deps)){i.memoizedState=Ka(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Ka(1|e,n,s,r)}function E_(t,e){return Cu(8390656,8,t,e)}function dm(t,e){return zc(2048,8,t,e)}function Fw(t,e){return zc(4,2,t,e)}function bw(t,e){return zc(4,4,t,e)}function Ow(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,zc(4,4,Ow.bind(null,e,t),n)}function fm(){}function Bw(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gw(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hw(t,e,n){return Ki&21?(vn(n,e)||(n=JI(),Me.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function iN(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=gf.transition;gf.transition={};try{t(!1),e()}finally{ve=n,gf.transition=r}}function $w(){return on().memoizedState}function sN(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zw(t))Ww(e,n);else if(n=Aw(t,e,n,r),n!==null){var i=Pt();yn(n,t,r,i),Kw(n,e,r)}}function oN(t,e,n){var r=zr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zw(t))Ww(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vn(a,o)){var l=e.interleaved;l===null?(i.next=i,rm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Aw(t,e,i,r),n!==null&&(i=Pt(),yn(n,t,r,i),Kw(n,e,r))}}function zw(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Ww(t,e){Ea=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hp(t,n)}}var ac={readContext:sn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},aN={readContext:sn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:E_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4194308,4,Ow.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sN.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:T_,useDebugValue:fm,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=T_(!1),e=t[0];return t=iN.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=Cn();if(Ne){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),it===null)throw Error(H(349));Ki&30||xw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,E_(Dw.bind(null,r,s,t),[t]),r.flags|=2048,Ka(9,Mw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=it.identifierPrefix;if(Ne){var n=Kn,r=Wn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lN={readContext:sn,useCallback:Bw,useContext:sn,useEffect:dm,useImperativeHandle:qw,useInsertionEffect:Fw,useLayoutEffect:bw,useMemo:Gw,useReducer:yf,useRef:Uw,useState:function(){return yf(Wa)},useDebugValue:fm,useDeferredValue:function(t){var e=on();return Hw(e,Qe.memoizedState,t)},useTransition:function(){var t=yf(Wa)[0],e=on().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:kw,useId:$w,unstable_isNewReconciler:!1},uN={readContext:sn,useCallback:Bw,useContext:sn,useEffect:dm,useImperativeHandle:qw,useInsertionEffect:Fw,useLayoutEffect:bw,useMemo:Gw,useReducer:_f,useRef:Uw,useState:function(){return _f(Wa)},useDebugValue:fm,useDeferredValue:function(t){var e=on();return Qe===null?e.memoizedState=t:Hw(e,Qe.memoizedState,t)},useTransition:function(){var t=_f(Wa)[0],e=on().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:kw,useId:$w,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wc={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=zr(t),s=Yn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(yn(e,t,i,r),wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=zr(t),s=Yn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(yn(e,t,i,r),wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=zr(t),i=Yn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(yn(e,t,r,n),wu(e,t,r))}};function I_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(i,s):!0}function Jw(t,e,n){var r=!1,i=ei,s=e.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=bt(e)?zi:Tt.current,r=e.contextTypes,s=(r=r!=null)?to(t,i):ei),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function w_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function yh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},im(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=bt(e)?zi:Tt.current,i.context=to(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wc.enqueueReplaceState(i,i.state,null),ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=FR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _h(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function Qw(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,Ph=r),_h(t,e)},n}function Yw(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_h(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_h(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SN.bind(null,t,e,n),e.then(t,t))}function C_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var dN=ar.ReactCurrentOwner,Ut=!1;function Rt(t,e,n,r){e.child=t===null?Cw(e,null,n,r):ro(e,t.child,n,r)}function R_(t,e,n,r,i){n=n.render;var s=e.ref;return Ds(e,i),r=um(t,e,n,r,s,i),n=cm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(Ne&&n&&Xp(e),e.flags|=1,Rt(t,e,r,i),e.child)}function P_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xw(t,e,s,r,i)):(t=Nu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(o,r)&&t.ref===e.ref)return tr(t,e,i)}return e.flags|=1,t=Wr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oa(s,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,tr(t,e,i)}return vh(t,e,n,r,i)}function Zw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Rs,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Rs,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(Rs,Ht),Ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ie(Rs,Ht),Ht|=r;return Rt(t,e,i,n),e.child}function jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vh(t,e,n,r,i){var s=bt(n)?zi:Tt.current;return s=to(e,s),Ds(e,i),n=um(t,e,n,r,s,i),r=cm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(Ne&&r&&Xp(e),e.flags|=1,Rt(t,e,n,i),e.child)}function N_(t,e,n,r,i){if(bt(n)){var s=!0;ju(e)}else s=!1;if(Ds(e,i),e.stateNode===null)Au(t,e),Jw(e,n,r),yh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=sn(u):(u=bt(n)?zi:Tt.current,u=to(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&w_(e,o,r,u),Er=!1;var m=e.memoizedState;o.state=m,ic(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Ft.current||Er?(typeof h=="function"&&(gh(e,n,h,r),l=e.memoizedState),(a=Er||I_(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:un(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=sn(l):(l=bt(n)?zi:Tt.current,l=to(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&w_(e,o,r,l),Er=!1,m=e.memoizedState,o.state=m,ic(e,r,o,i);var R=e.memoizedState;a!==p||m!==R||Ft.current||Er?(typeof _=="function"&&(gh(e,n,_,r),R=e.memoizedState),(u=Er||I_(e,n,u,r,m,R,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Th(t,e,n,r,s,i)}function Th(t,e,n,r,i,s){jw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&p_(e,n,!1),tr(t,e,s);r=e.stateNode,dN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ro(e,t.child,null,s),e.child=ro(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&p_(e,n,!0),e.child}function eS(t){var e=t.stateNode;e.pendingContext?h_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h_(t,e.context,!1),sm(t,e.containerInfo)}function k_(t,e,n,r,i){return no(),jp(i),e.flags|=256,Rt(t,e,n,r),e.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function tS(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(xe,i&1),t===null)return ph(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qc(o,r,0,null),t=Bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ih(n),e.memoizedState=Eh,t):hm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wr(a,s):(s=Bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ih(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Eh,r}return s=t.child,t=s.sibling,r=Wr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hm(t,e){return e=Qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ou(t,e,n,r){return r!==null&&jp(r),ro(e,t.child,null,n),t=hm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=vf(Error(H(422))),ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qc({mode:"visible",children:r.children},i,0,null),s=Bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ro(e,t.child,null,o),e.child.memoizedState=Ih(o),e.memoizedState=Eh,s);if(!(e.mode&1))return ou(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=vf(s,r,void 0),ou(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ut||a){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,er(t,i),yn(r,t,i,-1))}return vm(),r=vf(Error(H(421))),ou(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=CN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$t=Gr(i.nextSibling),Wt=e,Ne=!0,hn=null,t!==null&&(Zt[jt++]=Wn,Zt[jt++]=Kn,Zt[jt++]=Wi,Wn=t.id,Kn=t.overflow,Wi=e),e=hm(e,r.children),e.flags|=4096,e)}function x_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mh(t.return,e,n)}function Tf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x_(t,n,e);else if(t.tag===19)x_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tf(e,!0,n,null,s);break;case"together":Tf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hN(t,e,n){switch(e.tag){case 3:eS(e),no();break;case 5:Pw(e);break;case 1:bt(e.type)&&ju(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ie(nc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?tS(t,e,n):(Ie(xe,xe.current&1),t=tr(t,e,n),t!==null?t.sibling:null);Ie(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return tr(t,e,n)}var rS,wh,iS,sS;rS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wh=function(){};iS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ri(Mn.current);var s=null;switch(n){case"input":i=zf(t,i),r=zf(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Jf(t,i),r=Jf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}Yf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ma.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sS=function(t,e,n,r){n!==r&&(e.flags|=4)};function na(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pN(t,e,n){var r=e.pendingProps;switch(Zp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return bt(e.type)&&Zu(),pt(e),null;case 3:return r=e.stateNode,io(),Re(Ft),Re(Tt),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(xh(hn),hn=null))),wh(t,e),pt(e),null;case 5:om(e);var i=Ri($a.current);if(n=e.type,t!==null&&e.stateNode!=null)iS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return pt(e),null}if(t=Ri(Mn.current),iu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ca.length;i++)Se(ca[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":qy(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Gy(r,s),Se("invalid",r)}Yf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ru(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ru(r.textContent,a,t),i=["children",""+a]):Ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Ql(r),By(r,s,!0);break;case"textarea":Ql(r),Hy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[Ga]=r,rS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xf(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ca.length;i++)Se(ca[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":qy(t,r),i=zf(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Gy(t,r),i=Jf(t,r),Se("invalid",t);break;default:i=r}Yf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ma.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&Fp(t,s,l,o))}switch(n){case"input":Ql(t),By(t,r,!1);break;case"textarea":Ql(t),Hy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ns(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ns(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)sS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ri($a.current),Ri(Mn.current),iu(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:ru(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return pt(e),null;case 13:if(Re(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&$t!==null&&e.mode&1&&!(e.flags&128))ww(),no(),e.flags|=98560,s=!1;else if(s=iu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[kn]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else hn!==null&&(xh(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Ye===0&&(Ye=3):vm())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return io(),wh(t,e),t===null&&qa(e.stateNode.containerInfo),pt(e),null;case 10:return nm(e.type._context),pt(e),null;case 17:return bt(e.type)&&Zu(),pt(e),null;case 19:if(Re(xe),s=e.memoizedState,s===null)return pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)na(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sc(t),o!==null){for(e.flags|=128,na(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>oo&&(e.flags|=128,r=!0,na(s,!1),e.lanes=4194304)}else{if(!r)if(t=sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return pt(e),null}else 2*Be()-s.renderingStartTime>oo&&n!==1073741824&&(e.flags|=128,r=!0,na(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=xe.current,Ie(xe,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return _m(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function mN(t,e){switch(Zp(e),e.tag){case 1:return bt(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),Re(Ft),Re(Tt),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return om(e),null;case 13:if(Re(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(xe),null;case 4:return io(),null;case 10:return nm(e.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var au=!1,yt=!1,gN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function As(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Sh(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var M_=!1;function yN(t,e){if(ah=Ju,t=cw(),Yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:t,selectionRange:n},Ju=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,x=R.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:un(e.type,P),x);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(V){Fe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return R=M_,M_=!1,R}function Ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sh(e,n,s)}i=i.next}while(i!==r)}}function Kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oS(t){var e=t.alternate;e!==null&&(t.alternate=null,oS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ga],delete e[dh],delete e[jP],delete e[eN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aS(t){return t.tag===5||t.tag===3||t.tag===4}function D_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var st=null,fn=!1;function yr(t,e,n){for(n=n.child;n!==null;)lS(t,e,n),n=n.sibling}function lS(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Oc,n)}catch{}switch(n.tag){case 5:yt||As(n,e);case 6:var r=st,i=fn;st=null,yr(t,e,n),st=r,fn=i,st!==null&&(fn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(fn?(t=st,n=n.stateNode,t.nodeType===8?hf(t.parentNode,n):t.nodeType===1&&hf(t,n),Fa(t)):hf(st,n.stateNode));break;case 4:r=st,i=fn,st=n.stateNode.containerInfo,fn=!0,yr(t,e,n),st=r,fn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Sh(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!yt&&(As(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,yr(t,e,n),yt=r):yr(t,e,n);break;default:yr(t,e,n)}}function V_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gN),e.forEach(function(r){var i=AN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,fn=!1;break e;case 3:st=a.stateNode.containerInfo,fn=!0;break e;case 4:st=a.stateNode.containerInfo,fn=!0;break e}a=a.return}if(st===null)throw Error(H(160));lS(s,o,i),st=null,fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uS(e,t),e=e.sibling}function uS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Sn(t),r&4){try{Ia(3,t,t.return),Kc(3,t)}catch(P){Fe(t,t.return,P)}try{Ia(5,t,t.return)}catch(P){Fe(t,t.return,P)}}break;case 1:ln(e,t),Sn(t),r&512&&n!==null&&As(n,n.return);break;case 5:if(ln(e,t),Sn(t),r&512&&n!==null&&As(n,n.return),t.flags&32){var i=t.stateNode;try{Da(i,"")}catch(P){Fe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xI(i,s),Xf(a,o);var u=Xf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?UI(i,p):h==="dangerouslySetInnerHTML"?VI(i,p):h==="children"?Da(i,p):Fp(i,h,p,u)}switch(a){case"input":Wf(i,s);break;case"textarea":MI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Ns(i,!!s.multiple,_,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ns(i,!!s.multiple,s.defaultValue,!0):Ns(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(P){Fe(t,t.return,P)}}break;case 6:if(ln(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Fe(t,t.return,P)}}break;case 3:if(ln(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(P){Fe(t,t.return,P)}break;case 4:ln(e,t),Sn(t);break;case 13:ln(e,t),Sn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gm=Be())),r&4&&V_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(u=yt)||h,ln(e,t),yt=u):ln(e,t),Sn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(p=Q=h;Q!==null;){switch(m=Q,_=m.child,m.tag){case 0:case 11:case 14:case 15:Ia(4,m,m.return);break;case 1:As(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Fe(r,n,P)}}break;case 5:As(m,m.return);break;case 22:if(m.memoizedState!==null){U_(p);continue}}_!==null?(_.return=m,Q=_):U_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LI("display",o))}catch(P){Fe(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(P){Fe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ln(e,t),Sn(t),r&4&&V_(t);break;case 21:break;default:ln(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aS(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Da(i,""),r.flags&=-33);var s=D_(t);Rh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=D_(t);Ah(t,a,o);break;default:throw Error(H(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _N(t,e,n){Q=t,cS(t)}function cS(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||au;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yt;a=au;var u=yt;if(au=o,(yt=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?F_(i):l!==null?(l.return=o,Q=l):F_(i);for(;s!==null;)Q=s,cS(s),s=s.sibling;Q=i,au=a,yt=u}L_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):L_(t)}}function L_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Kc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&v_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Fa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}yt||e.flags&512&&Ch(e)}catch(m){Fe(e,e.return,m)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function U_(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function F_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kc(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var s=e.return;try{Ch(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{Ch(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var vN=Math.ceil,lc=ar.ReactCurrentDispatcher,pm=ar.ReactCurrentOwner,nn=ar.ReactCurrentBatchConfig,me=0,it=null,$e=null,ut=0,Ht=0,Rs=ci(0),Ye=0,Ja=null,Ji=0,Jc=0,mm=0,wa=null,Vt=null,gm=0,oo=1/0,Bn=null,uc=!1,Ph=null,$r=null,lu=!1,Ur=null,cc=0,Sa=0,Nh=null,Ru=-1,Pu=0;function Pt(){return me&6?Be():Ru!==-1?Ru:Ru=Be()}function zr(t){return t.mode&1?me&2&&ut!==0?ut&-ut:nN.transition!==null?(Pu===0&&(Pu=JI()),Pu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:tw(t.type)),t):1}function yn(t,e,n,r){if(50<Sa)throw Sa=0,Nh=null,Error(H(185));hl(t,n,r),(!(me&2)||t!==it)&&(t===it&&(!(me&2)&&(Jc|=n),Ye===4&&wr(t,ut)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(oo=Be()+500,$c&&di()))}function Ot(t,e){var n=t.callbackNode;nP(t,e);var r=Ku(t,t===it?ut:0);if(r===0)n!==null&&Wy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wy(n),e===1)t.tag===0?tN(b_.bind(null,t)):Tw(b_.bind(null,t)),XP(function(){!(me&6)&&di()}),n=null;else{switch(QI(r)){case 1:n=Gp;break;case 4:n=WI;break;case 16:n=Wu;break;case 536870912:n=KI;break;default:n=Wu}n=_S(n,dS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dS(t,e){if(Ru=-1,Pu=0,me&6)throw Error(H(327));var n=t.callbackNode;if(Vs()&&t.callbackNode!==n)return null;var r=Ku(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var i=me;me|=2;var s=hS();(it!==t||ut!==e)&&(Bn=null,oo=Be()+500,qi(t,e));do try{IN();break}catch(a){fS(t,a)}while(!0);tm(),lc.current=s,me=i,$e!==null?e=0:(it=null,ut=0,e=Ye)}if(e!==0){if(e===2&&(i=nh(t),i!==0&&(r=i,e=kh(t,i))),e===1)throw n=Ja,qi(t,0),wr(t,r),Ot(t,Be()),n;if(e===6)wr(t,r);else{if(i=t.current.alternate,!(r&30)&&!TN(i)&&(e=dc(t,r),e===2&&(s=nh(t),s!==0&&(r=s,e=kh(t,s))),e===1))throw n=Ja,qi(t,0),wr(t,r),Ot(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:wi(t,Vt,Bn);break;case 3:if(wr(t,r),(r&130023424)===r&&(e=gm+500-Be(),10<e)){if(Ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ch(wi.bind(null,t,Vt,Bn),e);break}wi(t,Vt,Bn);break;case 4:if(wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vN(r/1960))-r,10<r){t.timeoutHandle=ch(wi.bind(null,t,Vt,Bn),r);break}wi(t,Vt,Bn);break;case 5:wi(t,Vt,Bn);break;default:throw Error(H(329))}}}return Ot(t,Be()),t.callbackNode===n?dS.bind(null,t):null}function kh(t,e){var n=wa;return t.current.memoizedState.isDehydrated&&(qi(t,e).flags|=256),t=dc(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&xh(e)),t}function xh(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function TN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wr(t,e){for(e&=~mm,e&=~Jc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function b_(t){if(me&6)throw Error(H(327));Vs();var e=Ku(t,0);if(!(e&1))return Ot(t,Be()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=nh(t);r!==0&&(e=r,n=kh(t,r))}if(n===1)throw n=Ja,qi(t,0),wr(t,e),Ot(t,Be()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wi(t,Vt,Bn),Ot(t,Be()),null}function ym(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(oo=Be()+500,$c&&di())}}function Qi(t){Ur!==null&&Ur.tag===0&&!(me&6)&&Vs();var e=me;me|=1;var n=nn.transition,r=ve;try{if(nn.transition=null,ve=1,t)return t()}finally{ve=r,nn.transition=n,me=e,!(me&6)&&di()}}function _m(){Ht=Rs.current,Re(Rs)}function qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Zp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zu();break;case 3:io(),Re(Ft),Re(Tt),am();break;case 5:om(r);break;case 4:io();break;case 13:Re(xe);break;case 19:Re(xe);break;case 10:nm(r.type._context);break;case 22:case 23:_m()}n=n.return}if(it=t,$e=t=Wr(t.current,null),ut=Ht=e,Ye=0,Ja=null,mm=Jc=Ji=0,Vt=wa=null,Ai!==null){for(e=0;e<Ai.length;e++)if(n=Ai[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ai=null}return t}function fS(t,e){do{var n=$e;try{if(tm(),Su.current=ac,oc){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oc=!1}if(Ki=0,rt=Qe=Me=null,Ea=!1,za=0,pm.current=null,n===null||n.return===null){Ye=1,Ja=e,$e=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=C_(o);if(_!==null){_.flags&=-257,A_(_,o,a,s,e),_.mode&1&&S_(s,u,e),e=_,l=u;var R=e.updateQueue;if(R===null){var P=new Set;P.add(l),e.updateQueue=P}else R.add(l);break e}else{if(!(e&1)){S_(s,u,e),vm();break e}l=Error(H(426))}}else if(Ne&&a.mode&1){var x=C_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),A_(x,o,a,s,e),jp(so(l,a));break e}}s=l=so(l,a),Ye!==4&&(Ye=2),wa===null?wa=[s]:wa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Qw(s,l,e);__(s,w);break e;case 1:a=l;var T=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&($r===null||!$r.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=Yw(s,a,e);__(s,V);break e}}s=s.return}while(s!==null)}mS(n)}catch(L){e=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function hS(){var t=lc.current;return lc.current=ac,t===null?ac:t}function vm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),it===null||!(Ji&268435455)&&!(Jc&268435455)||wr(it,ut)}function dc(t,e){var n=me;me|=2;var r=hS();(it!==t||ut!==e)&&(Bn=null,qi(t,e));do try{EN();break}catch(i){fS(t,i)}while(!0);if(tm(),me=n,lc.current=r,$e!==null)throw Error(H(261));return it=null,ut=0,Ye}function EN(){for(;$e!==null;)pS($e)}function IN(){for(;$e!==null&&!KR();)pS($e)}function pS(t){var e=yS(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?mS(t):$e=e,pm.current=null}function mS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mN(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,$e=null;return}}else if(n=pN(n,e,Ht),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ye===0&&(Ye=5)}function wi(t,e,n){var r=ve,i=nn.transition;try{nn.transition=null,ve=1,wN(t,e,n,r)}finally{nn.transition=i,ve=r}return null}function wN(t,e,n,r){do Vs();while(Ur!==null);if(me&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rP(t,s),t===it&&($e=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lu||(lu=!0,_S(Wu,function(){return Vs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var o=ve;ve=1;var a=me;me|=4,pm.current=null,yN(t,n),uS(n,t),HP(lh),Ju=!!ah,lh=ah=null,t.current=n,_N(n),JR(),me=a,ve=o,nn.transition=s}else t.current=n;if(lu&&(lu=!1,Ur=t,cc=i),s=t.pendingLanes,s===0&&($r=null),XR(n.stateNode),Ot(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,t=Ph,Ph=null,t;return cc&1&&t.tag!==0&&Vs(),s=t.pendingLanes,s&1?t===Nh?Sa++:(Sa=0,Nh=t):Sa=0,di(),null}function Vs(){if(Ur!==null){var t=QI(cc),e=nn.transition,n=ve;try{if(nn.transition=null,ve=16>t?16:t,Ur===null)var r=!1;else{if(t=Ur,Ur=null,cc=0,me&6)throw Error(H(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Ia(8,h,s)}var p=h.child;if(p!==null)p.return=h,Q=p;else for(;Q!==null;){h=Q;var m=h.sibling,_=h.return;if(oS(h),h===u){Q=null;break}if(m!==null){m.return=_,Q=m;break}Q=_}}}var R=s.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ia(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Q=w;break e}Q=s.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Q=C;else e:for(o=T;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kc(9,a)}}catch(L){Fe(a,a.return,L)}if(a===o){Q=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,Q=V;break e}Q=a.return}}if(me=i,di(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Oc,t)}catch{}r=!0}return r}finally{ve=n,nn.transition=e}}return!1}function O_(t,e,n){e=so(n,e),e=Qw(t,e,1),t=Hr(t,e,1),e=Pt(),t!==null&&(hl(t,1,e),Ot(t,e))}function Fe(t,e,n){if(t.tag===3)O_(t,t,n);else for(;e!==null;){if(e.tag===3){O_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=so(n,t),t=Yw(e,t,1),e=Hr(e,t,1),t=Pt(),e!==null&&(hl(e,1,t),Ot(e,t));break}}e=e.return}}function SN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Ye===4||Ye===3&&(ut&130023424)===ut&&500>Be()-gm?qi(t,0):mm|=n),Ot(t,e)}function gS(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var n=Pt();t=er(t,e),t!==null&&(hl(t,e,n),Ot(t,n))}function CN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gS(t,n)}function AN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),gS(t,n)}var yS;yS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,hN(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Ne&&e.flags&1048576&&Ew(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Au(t,e),t=e.pendingProps;var i=to(e,Tt.current);Ds(e,n),i=um(null,e,r,t,i,n);var s=cm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,ju(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,im(e),i.updater=Wc,e.stateNode=i,i._reactInternals=e,yh(e,r,t,n),e=Th(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Xp(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Au(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PN(r),t=un(r,t),i){case 0:e=vh(null,e,r,t,n);break e;case 1:e=N_(null,e,r,t,n);break e;case 11:e=R_(null,e,r,t,n);break e;case 14:e=P_(null,e,r,un(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),vh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),N_(t,e,r,i,n);case 3:e:{if(eS(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Rw(t,e),ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=so(Error(H(423)),e),e=k_(t,e,r,n,i);break e}else if(r!==i){i=so(Error(H(424)),e),e=k_(t,e,r,n,i);break e}else for($t=Gr(e.stateNode.containerInfo.firstChild),Wt=e,Ne=!0,hn=null,n=Cw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),r===i){e=tr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Pw(e),t===null&&ph(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,uh(r,i)?o=null:s!==null&&uh(r,s)&&(e.flags|=32),jw(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&ph(e),null;case 13:return tS(t,e,n);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ro(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),R_(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ie(nc,r._currentValue),r._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===i.children&&!Ft.current){e=tr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Yn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),mh(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ds(e,n),i=sn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=un(r,e.pendingProps),i=un(r.type,i),P_(t,e,r,i,n);case 15:return Xw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),Au(t,e),e.tag=1,bt(r)?(t=!0,ju(e)):t=!1,Ds(e,n),Jw(e,r,i),yh(e,r,i,n),Th(null,e,r,!0,t,n);case 19:return nS(t,e,n);case 22:return Zw(t,e,n)}throw Error(H(156,e.tag))};function _S(t,e){return zI(t,e)}function RN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new RN(t,e,n,r)}function Tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PN(t){if(typeof t=="function")return Tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Op)return 11;if(t===qp)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ys:return Bi(n.children,i,s,e);case bp:o=8,i|=8;break;case Bf:return t=tn(12,n,e,i|2),t.elementType=Bf,t.lanes=s,t;case Gf:return t=tn(13,n,e,i),t.elementType=Gf,t.lanes=s,t;case Hf:return t=tn(19,n,e,i),t.elementType=Hf,t.lanes=s,t;case PI:return Qc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AI:o=10;break e;case RI:o=9;break e;case Op:o=11;break e;case qp:o=14;break e;case Tr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bi(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function Qc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=PI,t.lanes=n,t.stateNode={isHidden:!1},t}function Ef(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function If(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function NN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Em(t,e,n,r,i,s,o,a,l){return t=new NN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(s),t}function kN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vS(t){if(!t)return ei;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(bt(n))return vw(t,n,e)}return e}function TS(t,e,n,r,i,s,o,a,l){return t=Em(n,r,!0,t,i,s,o,a,l),t.context=vS(null),n=t.current,r=Pt(),i=zr(n),s=Yn(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,hl(t,i,r),Ot(t,r),t}function Yc(t,e,n,r){var i=e.current,s=Pt(),o=zr(i);return n=vS(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,o),t!==null&&(yn(t,i,o,s),wu(t,i,o)),o}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Im(t,e){q_(t,e),(t=t.alternate)&&q_(t,e)}function xN(){return null}var ES=typeof reportError=="function"?reportError:function(t){console.error(t)};function wm(t){this._internalRoot=t}Xc.prototype.render=wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Yc(t,e,null,null)};Xc.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Yc(null,t,null,null)}),e[jn]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&ew(t)}};function Sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B_(){}function MN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=fc(o);s.call(u)}}var o=TS(e,r,t,0,null,!1,!1,"",B_);return t._reactRootContainer=o,t[jn]=o.current,qa(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=fc(l);a.call(u)}}var l=Em(t,0,!1,null,null,!1,!1,"",B_);return t._reactRootContainer=l,t[jn]=l.current,qa(t.nodeType===8?t.parentNode:t),Qi(function(){Yc(e,l,n,r)}),l}function jc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=fc(o);a.call(l)}}Yc(e,o,t,i)}else o=MN(n,e,t,i,r);return fc(o)}YI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ua(e.pendingLanes);n!==0&&(Hp(e,n|1),Ot(e,Be()),!(me&6)&&(oo=Be()+500,di()))}break;case 13:Qi(function(){var r=er(t,1);if(r!==null){var i=Pt();yn(r,t,1,i)}}),Im(t,1)}};$p=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Pt();yn(e,t,134217728,n)}Im(t,134217728)}};XI=function(t){if(t.tag===13){var e=zr(t),n=er(t,e);if(n!==null){var r=Pt();yn(n,t,e,r)}Im(t,e)}};ZI=function(){return ve};jI=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};jf=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hc(r);if(!i)throw Error(H(90));kI(r),Wf(r,i)}}}break;case"textarea":MI(t,n);break;case"select":e=n.value,e!=null&&Ns(t,!!n.multiple,e,!1)}};OI=ym;qI=Qi;var DN={usingClientEntryPoint:!1,Events:[ml,Es,Hc,FI,bI,ym]},ra={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VN={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HI(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||xN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Oc=uu.inject(VN),xn=uu}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DN;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(e))throw Error(H(200));return kN(t,e,null,n)};Jt.createRoot=function(t,e){if(!Sm(t))throw Error(H(299));var n=!1,r="",i=ES;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Em(t,1,!1,null,null,n,!1,r,i),t[jn]=e.current,qa(t.nodeType===8?t.parentNode:t),new wm(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=HI(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Qi(t)};Jt.hydrate=function(t,e,n){if(!Zc(e))throw Error(H(200));return jc(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!Sm(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ES;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TS(e,null,t,1,n??null,i,!1,s,o),t[jn]=e.current,qa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xc(e)};Jt.render=function(t,e,n){if(!Zc(e))throw Error(H(200));return jc(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!Zc(t))throw Error(H(40));return t._reactRootContainer?(Qi(function(){jc(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Jt.unstable_batchedUpdates=ym;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return jc(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function IS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IS)}catch(t){console.error(t)}}IS(),II.exports=Jt;var LN=II.exports,wS,G_=LN;wS=G_.createRoot,G_.hydrateRoot;var yl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UN={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Rr,kp,tI,FN=(tI=class{constructor(){ee(this,Rr,UN);ee(this,kp,!1)}setTimeoutProvider(t){K(this,Rr,t)}setTimeout(t,e){return D(this,Rr).setTimeout(t,e)}clearTimeout(t){D(this,Rr).clearTimeout(t)}setInterval(t,e){return D(this,Rr).setInterval(t,e)}clearInterval(t){D(this,Rr).clearInterval(t)}},Rr=new WeakMap,kp=new WeakMap,tI),Pi=new FN;function bN(t){setTimeout(t,0)}var Yi=typeof window>"u"||"Deno"in globalThis;function Mt(){}function ON(t,e){return typeof t=="function"?t(e):t}function Mh(t){return typeof t=="number"&&t>=0&&t!==1/0}function SS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Kr(t,e){return typeof t=="function"?t(e):t}function Xt(t,e){return typeof t=="function"?t(e):t}function H_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Cm(o,e.options))return!1}else if(!Ya(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function $_(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Qa(e.options.mutationKey)!==Qa(s))return!1}else if(!Ya(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Cm(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qa)(t)}function Qa(t){return JSON.stringify(t,(e,n)=>Vh(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Ya(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ya(t[n],e[n])):!1}var qN=Object.prototype.hasOwnProperty;function CS(t,e){if(t===e)return t;const n=z_(t)&&z_(e);if(!n&&!(Vh(t)&&Vh(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const h=n?u:s[u],p=t[h],m=e[h];if(p===m){a[h]=p,(n?u<i:qN.call(t,h))&&l++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){a[h]=m;continue}const _=CS(p,m);a[h]=_,_===p&&l++}return i===o&&l===i?t:a}function Dh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function z_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Vh(t){if(!W_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!W_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function W_(t){return Object.prototype.toString.call(t)==="[object Object]"}function BN(t){return new Promise(e=>{Pi.setTimeout(e,t)})}function Lh(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?CS(t,e):e}function GN(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function HN(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Am=Symbol();function AS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Am?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function $N(t,e){return typeof t=="function"?t(...e):!!t}var xi,Pr,Gs,nI,zN=(nI=class extends yl{constructor(){super();ee(this,xi);ee(this,Pr);ee(this,Gs);K(this,Gs,e=>{if(!Yi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Pr)||this.setEventListener(D(this,Gs))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Pr))==null||e.call(this),K(this,Pr,void 0))}setEventListener(e){var n;K(this,Gs,e),(n=D(this,Pr))==null||n.call(this),K(this,Pr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){D(this,xi)!==e&&(K(this,xi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof D(this,xi)=="boolean"?D(this,xi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},xi=new WeakMap,Pr=new WeakMap,Gs=new WeakMap,nI),Rm=new zN;function Uh(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var WN=bN;function KN(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=WN;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var at=KN(),Hs,Nr,$s,rI,JN=(rI=class extends yl{constructor(){super();ee(this,Hs,!0);ee(this,Nr);ee(this,$s);K(this,$s,e=>{if(!Yi&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,Nr)||this.setEventListener(D(this,$s))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Nr))==null||e.call(this),K(this,Nr,void 0))}setEventListener(e){var n;K(this,$s,e),(n=D(this,Nr))==null||n.call(this),K(this,Nr,e(this.setOnline.bind(this)))}setOnline(e){D(this,Hs)!==e&&(K(this,Hs,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return D(this,Hs)}},Hs=new WeakMap,Nr=new WeakMap,$s=new WeakMap,rI),hc=new JN;function QN(t){return Math.min(1e3*2**t,3e4)}function RS(t){return(t??"online")==="online"?hc.isOnline():!0}var Fh=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function PS(t){let e=!1,n=0,r;const i=Uh(),s=()=>i.status!=="pending",o=P=>{var x;if(!s()){const w=new Fh(P);m(w),(x=t.onCancel)==null||x.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>Rm.isFocused()&&(t.networkMode==="always"||hc.isOnline())&&t.canRun(),h=()=>RS(t.networkMode)&&t.canRun(),p=P=>{s()||(r==null||r(),i.resolve(P))},m=P=>{s()||(r==null||r(),i.reject(P))},_=()=>new Promise(P=>{var x;r=w=>{(s()||u())&&P(w)},(x=t.onPause)==null||x.call(t)}).then(()=>{var P;r=void 0,s()||(P=t.onContinue)==null||P.call(t)}),R=()=>{if(s())return;let P;const x=n===0?t.initialPromise:void 0;try{P=x??t.fn()}catch(w){P=Promise.reject(w)}Promise.resolve(P).then(p).catch(w=>{var b;if(s())return;const T=t.retry??(Yi?0:3),C=t.retryDelay??QN,V=typeof C=="function"?C(n,w):C,L=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,w);if(e||!L){m(w);return}n++,(b=t.onFail)==null||b.call(t,n,w),BN(V).then(()=>u()?void 0:_()).then(()=>{e?m(w):R()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?R():_().then(R),i)}}var Mi,iI,NS=(iI=class{constructor(){ee(this,Mi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mh(this.gcTime)&&K(this,Mi,Pi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yi?1/0:5*60*1e3))}clearGcTimeout(){D(this,Mi)&&(Pi.clearTimeout(D(this,Mi)),K(this,Mi,void 0))}},Mi=new WeakMap,iI),Di,zs,Yt,Vi,tt,al,Li,cn,qn,sI,YN=(sI=class extends NS{constructor(n){super();ee(this,cn);ee(this,Di);ee(this,zs);ee(this,Yt);ee(this,Vi);ee(this,tt);ee(this,al);ee(this,Li);K(this,Li,!1),K(this,al,n.defaultOptions),this.setOptions(n.options),this.observers=[],K(this,Vi,n.client),K(this,Yt,D(this,Vi).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,K(this,Di,K_(this.options)),this.state=n.state??D(this,Di),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=D(this,tt))==null?void 0:n.promise}setOptions(n){if(this.options={...D(this,al),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=K_(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),K(this,Di,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Yt).remove(this)}setData(n,r){const i=Lh(this.state.data,n,this.options);return fe(this,cn,qn).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){fe(this,cn,qn).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=D(this,tt))==null?void 0:i.promise;return(s=D(this,tt))==null||s.cancel(n),r?r.then(Mt).catch(Mt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Di))}isActive(){return this.observers.some(n=>Xt(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Am||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Kr(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!SS(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,tt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,tt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),D(this,Yt).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(D(this,tt)&&(D(this,Li)?D(this,tt).cancel({revert:!0}):D(this,tt).cancelRetry()),this.scheduleGc()),D(this,Yt).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,cn,qn).call(this,{type:"invalidate"})}async fetch(n,r){var u,h,p,m,_,R,P,x,w,T,C,V;if(this.state.fetchStatus!=="idle"&&((u=D(this,tt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(D(this,tt))return D(this,tt).continueRetry(),D(this,tt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const L=this.observers.find(b=>b.options.queryFn);L&&this.setOptions(L.options)}const i=new AbortController,s=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>(K(this,Li,!0),i.signal)})},o=()=>{const L=AS(this.options,r),S=(()=>{const v={client:D(this,Vi),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return K(this,Li,!1),this.options.persister?this.options.persister(L,S,this):L(S)},l=(()=>{const L={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:D(this,Vi),state:this.state,fetchFn:o};return s(L),L})();(h=this.options.behavior)==null||h.onFetch(l,this),K(this,zs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&fe(this,cn,qn).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),K(this,tt,PS({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:L=>{L instanceof Fh&&L.revert&&this.setState({...D(this,zs),fetchStatus:"idle"}),i.abort()},onFail:(L,b)=>{fe(this,cn,qn).call(this,{type:"failed",failureCount:L,error:b})},onPause:()=>{fe(this,cn,qn).call(this,{type:"pause"})},onContinue:()=>{fe(this,cn,qn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const L=await D(this,tt).start();if(L===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(L),(R=(_=D(this,Yt).config).onSuccess)==null||R.call(_,L,this),(x=(P=D(this,Yt).config).onSettled)==null||x.call(P,L,this.state.error,this),L}catch(L){if(L instanceof Fh){if(L.silent)return D(this,tt).promise;if(L.revert){if(this.state.data===void 0)throw L;return this.state.data}}throw fe(this,cn,qn).call(this,{type:"error",error:L}),(T=(w=D(this,Yt).config).onError)==null||T.call(w,L,this),(V=(C=D(this,Yt).config).onSettled)==null||V.call(C,this.state.data,L,this),L}finally{this.scheduleGc()}}},Di=new WeakMap,zs=new WeakMap,Yt=new WeakMap,Vi=new WeakMap,tt=new WeakMap,al=new WeakMap,Li=new WeakMap,cn=new WeakSet,qn=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...kS(i.data,this.options),fetchMeta:n.meta??null};case"success":const s={...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,zs,n.manual?s:void 0),s;case"error":const o=n.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),at.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),D(this,Yt).notify({query:this,type:"updated",action:n})})},sI);function kS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function K_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var xt,he,ll,Ct,Ui,Ws,Hn,kr,ul,Ks,Js,Fi,bi,xr,Qs,ye,da,bh,Oh,qh,Bh,Gh,Hh,$h,MS,oI,xS=(oI=class extends yl{constructor(e,n){super();ee(this,ye);ee(this,xt);ee(this,he);ee(this,ll);ee(this,Ct);ee(this,Ui);ee(this,Ws);ee(this,Hn);ee(this,kr);ee(this,ul);ee(this,Ks);ee(this,Js);ee(this,Fi);ee(this,bi);ee(this,xr);ee(this,Qs,new Set);this.options=n,K(this,xt,e),K(this,kr,null),K(this,Hn,Uh()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,he).addObserver(this),J_(D(this,he),this.options)?fe(this,ye,da).call(this):this.updateResult(),fe(this,ye,Bh).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zh(D(this,he),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zh(D(this,he),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,ye,Gh).call(this),fe(this,ye,Hh).call(this),D(this,he).removeObserver(this)}setOptions(e){const n=this.options,r=D(this,he);if(this.options=D(this,xt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xt(this.options.enabled,D(this,he))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,ye,$h).call(this),D(this,he).setOptions(this.options),n._defaulted&&!Dh(this.options,n)&&D(this,xt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,he),observer:this});const i=this.hasListeners();i&&Q_(D(this,he),r,this.options,n)&&fe(this,ye,da).call(this),this.updateResult(),i&&(D(this,he)!==r||Xt(this.options.enabled,D(this,he))!==Xt(n.enabled,D(this,he))||Kr(this.options.staleTime,D(this,he))!==Kr(n.staleTime,D(this,he)))&&fe(this,ye,bh).call(this);const s=fe(this,ye,Oh).call(this);i&&(D(this,he)!==r||Xt(this.options.enabled,D(this,he))!==Xt(n.enabled,D(this,he))||s!==D(this,xr))&&fe(this,ye,qh).call(this,s)}getOptimisticResult(e){const n=D(this,xt).getQueryCache().build(D(this,xt),e),r=this.createResult(n,e);return ZN(this,r)&&(K(this,Ct,r),K(this,Ws,this.options),K(this,Ui,D(this,he).state)),r}getCurrentResult(){return D(this,Ct)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&D(this,Hn).status==="pending"&&D(this,Hn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){D(this,Qs).add(e)}getCurrentQuery(){return D(this,he)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=D(this,xt).defaultQueryOptions(e),r=D(this,xt).getQueryCache().build(D(this,xt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return fe(this,ye,da).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Ct)))}createResult(e,n){var I;const r=D(this,he),i=this.options,s=D(this,Ct),o=D(this,Ui),a=D(this,Ws),u=e!==r?e.state:D(this,ll),{state:h}=e;let p={...h},m=!1,_;if(n._optimisticResults){const A=this.hasListeners(),k=!A&&J_(e,n),M=A&&Q_(e,r,n,i);(k||M)&&(p={...p,...kS(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:R,errorUpdatedAt:P,status:x}=p;_=p.data;let w=!1;if(n.placeholderData!==void 0&&_===void 0&&x==="pending"){let A;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(A=s.data,w=!0):A=typeof n.placeholderData=="function"?n.placeholderData((I=D(this,Js))==null?void 0:I.state.data,D(this,Js)):n.placeholderData,A!==void 0&&(x="success",_=Lh(s==null?void 0:s.data,A,n),m=!0)}if(n.select&&_!==void 0&&!w)if(s&&_===(o==null?void 0:o.data)&&n.select===D(this,ul))_=D(this,Ks);else try{K(this,ul,n.select),_=n.select(_),_=Lh(s==null?void 0:s.data,_,n),K(this,Ks,_),K(this,kr,null)}catch(A){K(this,kr,A)}D(this,kr)&&(R=D(this,kr),_=D(this,Ks),P=Date.now(),x="error");const T=p.fetchStatus==="fetching",C=x==="pending",V=x==="error",L=C&&T,b=_!==void 0,v={status:x,fetchStatus:p.fetchStatus,isPending:C,isSuccess:x==="success",isError:V,isInitialLoading:L,isLoading:L,data:_,dataUpdatedAt:p.dataUpdatedAt,error:R,errorUpdatedAt:P,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:V&&!b,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:V&&b,isStale:Pm(e,n),refetch:this.refetch,promise:D(this,Hn),isEnabled:Xt(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=N=>{v.status==="error"?N.reject(v.error):v.data!==void 0&&N.resolve(v.data)},k=()=>{const N=K(this,Hn,v.promise=Uh());A(N)},M=D(this,Hn);switch(M.status){case"pending":e.queryHash===r.queryHash&&A(M);break;case"fulfilled":(v.status==="error"||v.data!==M.value)&&k();break;case"rejected":(v.status!=="error"||v.error!==M.reason)&&k();break}}return v}updateResult(){const e=D(this,Ct),n=this.createResult(D(this,he),this.options);if(K(this,Ui,D(this,he).state),K(this,Ws,this.options),D(this,Ui).data!==void 0&&K(this,Js,D(this,he)),Dh(n,e))return;K(this,Ct,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!D(this,Qs).size)return!0;const o=new Set(s??D(this,Qs));return this.options.throwOnError&&o.add("error"),Object.keys(D(this,Ct)).some(a=>{const l=a;return D(this,Ct)[l]!==e[l]&&o.has(l)})};fe(this,ye,MS).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,ye,Bh).call(this)}},xt=new WeakMap,he=new WeakMap,ll=new WeakMap,Ct=new WeakMap,Ui=new WeakMap,Ws=new WeakMap,Hn=new WeakMap,kr=new WeakMap,ul=new WeakMap,Ks=new WeakMap,Js=new WeakMap,Fi=new WeakMap,bi=new WeakMap,xr=new WeakMap,Qs=new WeakMap,ye=new WeakSet,da=function(e){fe(this,ye,$h).call(this);let n=D(this,he).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Mt)),n},bh=function(){fe(this,ye,Gh).call(this);const e=Kr(this.options.staleTime,D(this,he));if(Yi||D(this,Ct).isStale||!Mh(e))return;const r=SS(D(this,Ct).dataUpdatedAt,e)+1;K(this,Fi,Pi.setTimeout(()=>{D(this,Ct).isStale||this.updateResult()},r))},Oh=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,he)):this.options.refetchInterval)??!1},qh=function(e){fe(this,ye,Hh).call(this),K(this,xr,e),!(Yi||Xt(this.options.enabled,D(this,he))===!1||!Mh(D(this,xr))||D(this,xr)===0)&&K(this,bi,Pi.setInterval(()=>{(this.options.refetchIntervalInBackground||Rm.isFocused())&&fe(this,ye,da).call(this)},D(this,xr)))},Bh=function(){fe(this,ye,bh).call(this),fe(this,ye,qh).call(this,fe(this,ye,Oh).call(this))},Gh=function(){D(this,Fi)&&(Pi.clearTimeout(D(this,Fi)),K(this,Fi,void 0))},Hh=function(){D(this,bi)&&(Pi.clearInterval(D(this,bi)),K(this,bi,void 0))},$h=function(){const e=D(this,xt).getQueryCache().build(D(this,xt),this.options);if(e===D(this,he))return;const n=D(this,he);K(this,he,e),K(this,ll,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},MS=function(e){at.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(D(this,Ct))}),D(this,xt).getQueryCache().notify({query:D(this,he),type:"observerResultsUpdated"})})},oI);function XN(t,e){return Xt(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function J_(t,e){return XN(t,e)||t.state.data!==void 0&&zh(t,e,e.refetchOnMount)}function zh(t,e,n){if(Xt(e.enabled,t)!==!1&&Kr(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Pm(t,e)}return!1}function Q_(t,e,n,r){return(t!==e||Xt(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Pm(t,n)}function Pm(t,e){return Xt(e.enabled,t)!==!1&&t.isStaleByTime(Kr(e.staleTime,t))}function ZN(t,e){return!Dh(t.getCurrentResult(),e)}function pc(t){return{onFetch:(e,n)=>{var h,p,m,_,R;const r=e.options,i=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,s=((_=e.state.data)==null?void 0:_.pages)||[],o=((R=e.state.data)==null?void 0:R.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let P=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?P=!0:e.signal.addEventListener("abort",()=>{P=!0}),e.signal)})},w=AS(e.options,e.fetchOptions),T=async(C,V,L)=>{if(P)return Promise.reject();if(V==null&&C.pages.length)return Promise.resolve(C);const S=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:V,direction:L?"backward":"forward",meta:e.options.meta};return x(k),k})(),v=await w(S),{maxPages:I}=e.options,A=L?HN:GN;return{pages:A(C.pages,v,I),pageParams:A(C.pageParams,V,I)}};if(i&&s.length){const C=i==="backward",V=C?DS:Wh,L={pages:s,pageParams:o},b=V(r,L);a=await T(L,b,C)}else{const C=t??s.length;do{const V=l===0?o[0]??r.initialPageParam:Wh(r,a);if(l>0&&V==null)break;a=await T(a,V),l++}while(l<C)}return a};e.options.persister?e.fetchFn=()=>{var P,x;return(x=(P=e.options).persister)==null?void 0:x.call(P,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Wh(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function DS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function jN(t,e){return e?Wh(t,e)!=null:!1}function ek(t,e){return!e||!t.getPreviousPageParam?!1:DS(t,e)!=null}var tk=class extends xS{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:pc()})}getOptimisticResult(t){return t.behavior=pc(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var R,P;const{state:n}=t,r=super.createResult(t,e),{isFetching:i,isRefetching:s,isError:o,isRefetchError:a}=r,l=(P=(R=n.fetchMeta)==null?void 0:R.fetchMore)==null?void 0:P.direction,u=o&&l==="forward",h=i&&l==="forward",p=o&&l==="backward",m=i&&l==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:jN(e,n.data),hasPreviousPage:ek(e,n.data),isFetchNextPageError:u,isFetchingNextPage:h,isFetchPreviousPageError:p,isFetchingPreviousPage:m,isRefetchError:a&&!u&&!p,isRefetching:s&&!h&&!m}}},cl,Rn,At,Oi,Pn,vr,aI,nk=(aI=class extends NS{constructor(n){super();ee(this,Pn);ee(this,cl);ee(this,Rn);ee(this,At);ee(this,Oi);K(this,cl,n.client),this.mutationId=n.mutationId,K(this,At,n.mutationCache),K(this,Rn,[]),this.state=n.state||rk(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){D(this,Rn).includes(n)||(D(this,Rn).push(n),this.clearGcTimeout(),D(this,At).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){K(this,Rn,D(this,Rn).filter(r=>r!==n)),this.scheduleGc(),D(this,At).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){D(this,Rn).length||(this.state.status==="pending"?this.scheduleGc():D(this,At).remove(this))}continue(){var n;return((n=D(this,Oi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,u,h,p,m,_,R,P,x,w,T,C,V,L,b,S,v,I,A;const r=()=>{fe(this,Pn,vr).call(this,{type:"continue"})},i={client:D(this,cl),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Oi,PS({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(k,M)=>{fe(this,Pn,vr).call(this,{type:"failed",failureCount:k,error:M})},onPause:()=>{fe(this,Pn,vr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,At).canRun(this)}));const s=this.state.status==="pending",o=!D(this,Oi).canStart();try{if(s)r();else{fe(this,Pn,vr).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=D(this,At).config).onMutate)==null?void 0:l.call(a,n,this,i));const M=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,n,i));M!==this.state.context&&fe(this,Pn,vr).call(this,{type:"pending",context:M,variables:n,isPaused:o})}const k=await D(this,Oi).start();return await((m=(p=D(this,At).config).onSuccess)==null?void 0:m.call(p,k,n,this.state.context,this,i)),await((R=(_=this.options).onSuccess)==null?void 0:R.call(_,k,n,this.state.context,i)),await((x=(P=D(this,At).config).onSettled)==null?void 0:x.call(P,k,null,this.state.variables,this.state.context,this,i)),await((T=(w=this.options).onSettled)==null?void 0:T.call(w,k,null,n,this.state.context,i)),fe(this,Pn,vr).call(this,{type:"success",data:k}),k}catch(k){try{throw await((V=(C=D(this,At).config).onError)==null?void 0:V.call(C,k,n,this.state.context,this,i)),await((b=(L=this.options).onError)==null?void 0:b.call(L,k,n,this.state.context,i)),await((v=(S=D(this,At).config).onSettled)==null?void 0:v.call(S,void 0,k,this.state.variables,this.state.context,this,i)),await((A=(I=this.options).onSettled)==null?void 0:A.call(I,void 0,k,n,this.state.context,i)),k}finally{fe(this,Pn,vr).call(this,{type:"error",error:k})}}finally{D(this,At).runNext(this)}}},cl=new WeakMap,Rn=new WeakMap,At=new WeakMap,Oi=new WeakMap,Pn=new WeakSet,vr=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),at.batch(()=>{D(this,Rn).forEach(i=>{i.onMutationUpdate(n)}),D(this,At).notify({mutation:this,type:"updated",action:n})})},aI);function rk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $n,dn,dl,lI,ik=(lI=class extends yl{constructor(e={}){super();ee(this,$n);ee(this,dn);ee(this,dl);this.config=e,K(this,$n,new Set),K(this,dn,new Map),K(this,dl,0)}build(e,n,r){const i=new nk({client:e,mutationCache:this,mutationId:++Wl(this,dl)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){D(this,$n).add(e);const n=cu(e);if(typeof n=="string"){const r=D(this,dn).get(n);r?r.push(e):D(this,dn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,$n).delete(e)){const n=cu(e);if(typeof n=="string"){const r=D(this,dn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&D(this,dn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=cu(e);if(typeof n=="string"){const r=D(this,dn).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=cu(e);if(typeof n=="string"){const i=(r=D(this,dn).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){at.batch(()=>{D(this,$n).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,$n).clear(),D(this,dn).clear()})}getAll(){return Array.from(D(this,$n))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$_(n,r))}findAll(e={}){return this.getAll().filter(n=>$_(e,n))}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return at.batch(()=>Promise.all(e.map(n=>n.continue().catch(Mt))))}},$n=new WeakMap,dn=new WeakMap,dl=new WeakMap,lI);function cu(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Nn,uI,sk=(uI=class extends yl{constructor(e={}){super();ee(this,Nn);this.config=e,K(this,Nn,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??Cm(i,n);let o=this.get(s);return o||(o=new YN({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){D(this,Nn).has(e.queryHash)||(D(this,Nn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=D(this,Nn).get(e.queryHash);n&&(e.destroy(),n===e&&D(this,Nn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){at.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,Nn).get(e)}getAll(){return[...D(this,Nn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>H_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>H_(e,r)):n}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){at.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){at.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Nn=new WeakMap,uI),Ue,Mr,Dr,Ys,Xs,Vr,Zs,js,cI,ok=(cI=class{constructor(t={}){ee(this,Ue);ee(this,Mr);ee(this,Dr);ee(this,Ys);ee(this,Xs);ee(this,Vr);ee(this,Zs);ee(this,js);K(this,Ue,t.queryCache||new sk),K(this,Mr,t.mutationCache||new ik),K(this,Dr,t.defaultOptions||{}),K(this,Ys,new Map),K(this,Xs,new Map),K(this,Vr,0)}mount(){Wl(this,Vr)._++,D(this,Vr)===1&&(K(this,Zs,Rm.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ue).onFocus())})),K(this,js,hc.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ue).onOnline())})))}unmount(){var t,e;Wl(this,Vr)._--,D(this,Vr)===0&&((t=D(this,Zs))==null||t.call(this),K(this,Zs,void 0),(e=D(this,js))==null||e.call(this),K(this,js,void 0))}isFetching(t){return D(this,Ue).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,Mr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ue).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=D(this,Ue).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Kr(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return D(this,Ue).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=D(this,Ue).get(r.queryHash),s=i==null?void 0:i.state.data,o=ON(e,s);if(o!==void 0)return D(this,Ue).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return at.batch(()=>D(this,Ue).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ue).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=D(this,Ue);at.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=D(this,Ue);return at.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=at.batch(()=>D(this,Ue).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Mt).catch(Mt)}invalidateQueries(t,e={}){return at.batch(()=>(D(this,Ue).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=at.batch(()=>D(this,Ue).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mt)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Mt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=D(this,Ue).build(this,e);return n.isStaleByTime(Kr(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mt).catch(Mt)}fetchInfiniteQuery(t){return t.behavior=pc(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mt).catch(Mt)}ensureInfiniteQueryData(t){return t.behavior=pc(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hc.isOnline()?D(this,Mr).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Ue)}getMutationCache(){return D(this,Mr)}getDefaultOptions(){return D(this,Dr)}setDefaultOptions(t){K(this,Dr,t)}setQueryDefaults(t,e){D(this,Ys).set(Qa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Ys).values()],n={};return e.forEach(r=>{Ya(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){D(this,Xs).set(Qa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Xs).values()],n={};return e.forEach(r=>{Ya(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,Dr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Cm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Am&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,Dr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,Ue).clear(),D(this,Mr).clear()}},Ue=new WeakMap,Mr=new WeakMap,Dr=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Vr=new WeakMap,Zs=new WeakMap,js=new WeakMap,cI),VS=oe.createContext(void 0),ed=t=>{const e=oe.useContext(VS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ak=({client:t,children:e})=>(oe.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),F.jsx(VS.Provider,{value:t,children:e})),LS=oe.createContext(!1),lk=()=>oe.useContext(LS);LS.Provider;function uk(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ck=oe.createContext(uk()),dk=()=>oe.useContext(ck),fk=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},hk=t=>{oe.useEffect(()=>{t.clearReset()},[t])},pk=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||$N(n,[t.error,r])),mk=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},gk=(t,e)=>t.isLoading&&t.isFetching&&!e,yk=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Y_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function US(t,e,n){var p,m,_,R,P;const r=lk(),i=dk(),s=ed(),o=s.defaultQueryOptions(t);(m=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=r?"isRestoring":"optimistic",mk(o),fk(o,i),hk(i);const a=!s.getQueryCache().get(o.queryHash),[l]=oe.useState(()=>new e(s,o)),u=l.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(oe.useSyncExternalStore(oe.useCallback(x=>{const w=h?l.subscribe(at.batchCalls(x)):Mt;return l.updateResult(),w},[l,h]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),oe.useEffect(()=>{l.setOptions(o)},[o,l]),yk(o,u))throw Y_(o,l,i);if(pk({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((R=(_=s.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||R.call(_,o,u),o.experimental_prefetchInRender&&!Yi&&gk(u,r)){const x=a?Y_(o,l,i):(P=s.getQueryCache().get(o.queryHash))==null?void 0:P.promise;x==null||x.catch(Mt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function _k(t,e){return US(t,xS)}function vk(t,e){return US(t,tk)}const Tk="modulepreload",Ek=function(t){return"/"+t},X_={},Ik=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Ek(l),l in X_)return;X_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Tk,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},wk=({className:t="w-5 h-5"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Sk=({className:t="w-6 h-6"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M20 20v-5h-5M4 4a8 8 0 0113.89 4.02M20 20a8 8 0 01-13.89-4.02"})}),Ck="1.5.0",Ak={en:[{key:"all",label:"All News"},{key:"politics",label:"Politics"},{key:"world",label:"World"},{key:"technology",label:"Technology"},{key:"business",label:"Business"},{key:"sports",label:"Sports"},{key:"local",label:"Local"}],ar:[{key:"all",label:"كل الأخبار"},{key:"politics",label:"سياسة"},{key:"world",label:"العالم"},{key:"technology",label:"تكنولوجيا"},{key:"business",label:"أعمال"},{key:"sports",label:"رياضة"},{key:"local",label:"أخبار محلية"}]},Nm={en:{title:"suhf",subtitle:"Freshly AI-Generated News from Around the World",language_toggle:"العربية",generating_title:"Connecting to Live News Feed...",generating_subtitle:"Syncing with our continuously updated global news database.",error_title:"Failed to Generate Articles",error_cache_title:"Application Out of Date",error_cache_body:"Your browser is running an old version of the app from its cache. Please perform a hard refresh (Ctrl+Shift+R or Cmd+Shift+R) to load the latest version.",config_error_title:"Configuration Error",config_error_gemini:'The backend is not configured with a Gemini API key. For local development, create a `.env` file and add `API_KEY="YOUR_KEY"`. For deployment, ensure the `API_KEY` environment variable is set in your platform\'s settings.',config_error_firebase:"Firebase is not configured. Please open the `config.js` file, fill in your Firebase project details, save, and then **re-deploy** the site for login/comments to work.",error_subtitle:"There was an issue connecting to our news desk. Please try again later.",error_gemini_invalid_key:"The provided API key is not valid. Please check for typos or get a new key.",error_gemini_quota:"You have exceeded your free quota or billing limit. Please check your billing status on Google Cloud to increase your quota, or try again later.",error_gemini_json:"The AI returned an unexpected response. Please try refreshing.",manage_billing_link:"Manage Billing on Google Cloud",read_more:"Read More",by:"By",search_placeholder:"Search articles...",refresh_tooltip:"Sync with live feed",account_tooltip:"My Account",share_article:"Share this article:",copy_link_success:"Link copied!",virality_tooltip:"Virality: How widely this story is spreading based on real-world data.",login:"Login",logout:"Logout",comments_title:"Reader Comments",add_comment_placeholder:"Add your comment...",post_comment:"Post Comment",login_to_comment:"Please log in to post a comment.",share_suhuf:"Share with suhf Friends",share_whatsapp:"Share on WhatsApp",share_telegram:"Share on Telegram",fast_spreading:"Fast Spreading",medium_spreading:"Medium Spreading",low_spreading:"Low Spreading",unknown:"Virality Unknown",sources:"Sources",topic_filter_prompt:"What are you interested in today?",loading_older_articles:"Loading older articles...",load_older_articles:"Click to load older articles",new_edition_available:"New edition available!",click_to_refresh:"Click to refresh",login_failed_title:"Login Failed",login_failed_body:"Could not sign you in. Please ensure pop-ups are not blocked by your browser and try again. There might be a configuration issue with the site's authentication provider.",ok_button:"OK",end_of_feed_title:"You've Reached the End of the Feed",end_of_feed_body:"Our live archive currently holds articles from the past 30 days."},ar:{title:"صحف",subtitle:"أخبار عاجلة تم إنشاؤها بواسطة الذكاء الاصطناعي",language_toggle:"English",generating_title:"جاري الاتصال ببث الأخبار المباشر...",generating_subtitle:"تتم المزامنة مع قاعدة بيانات الأخبار العالمية المحدثة باستمرار.",error_title:"فشل في توليد المقالات",error_cache_title:"التطبيق غير محدّث",error_cache_body:"يستخدم متصفحك نسخة قديمة من التطبيق من الذاكرة المؤقتة. الرجاء القيام بإعادة تحميل كاملة للصفحة (Ctrl+Shift+R أو Cmd+Shift+R) لتحميل أحدث إصدار.",config_error_title:"خطأ في الإعدادات",config_error_gemini:'الواجهة الخلفية غير مهيأة بمفتاح Gemini API. للتطوير المحلي، أنشئ ملف `.env` وأضف `API_KEY="YOUR_KEY"`. للنشر، تأكد من تعيين متغير البيئة `API_KEY` في إعدادات منصة النشر.',config_error_firebase:"Firebase غير مهيأ. الرجاء فتح ملف `config.js`، وتعبئة بيانات مشروع Firebase، ثم الحفظ، ثم **إعادة نشر** الموقع لتعمل ميزات تسجيل الدخول والتعليقات.",error_subtitle:"حدثت مشكلة في الاتصال بمكتب الأخبار. يرجى المحاولة مرة أخرى في وقت لاحق.",error_gemini_invalid_key:"مفتاح API المُقدَّم غير صالح. يرجى التحقق من الأخطاء الإملائية أو الحصول على مفتاح جديد.",error_gemini_quota:"لقد تجاوزت حصتك المجانية أو حد الفوترة. يرجى التحقق من حالة الفوترة في Google Cloud لزيادة الحصة، أو المحاولة مرة أخرى لاحقًا.",error_gemini_json:"أعاد الذكاء الاصطناعي استجابة غير متوقعة. يرجى محاولة التحديث.",manage_billing_link:"إدارة الفوترة على Google Cloud",read_more:"اقرأ المزيد",by:"بقلم",search_placeholder:"ابحث في المقالات...",refresh_tooltip:"مزامنة مع البث المباشر",account_tooltip:"حسابي",share_article:"شارك هذا المقال:",copy_link_success:"تم نسخ الرابط!",virality_tooltip:"مؤشر الانتشار: مدى انتشار هذه القصة بناءً على بيانات حقيقية.",login:"تسجيل الدخول",logout:"تسجيل الخروج",comments_title:"تعليقات القراء",add_comment_placeholder:"أضف تعليقك...",post_comment:"نشر التعليق",login_to_comment:"الرجاء تسجيل الدخول لنشر تعليق.",share_suhuf:"شارك مع أصدقاء صحف",share_whatsapp:"شارك عبر واتساب",share_telegram:"شارك عبر تيليجرام",fast_spreading:"سريع الانتشار",medium_spreading:"متوسط الانتشار",low_spreading:"قليل الانتشار",unknown:"انتشار غير معروف",sources:"المصادر",topic_filter_prompt:"ما الذي يثير اهتمامك اليوم؟",loading_older_articles:"جاري تحميل المقالات الأقدم...",load_older_articles:"اضغط لتحميل المقالات الأقدم",new_edition_available:"إصدار جديد متوفر!",click_to_refresh:"اضغط للتحديث",login_failed_title:"فشل تسجيل الدخول",login_failed_body:"تعذر تسجيل دخولك. يرجى التأكد من عدم حظر النوافذ المنبثقة بواسطة متصفحك والمحاولة مرة أخرى. قد تكون هناك مشكلة في إعدادات المصادقة للموقع.",ok_button:"حسناً",end_of_feed_title:"لقد وصلت إلى نهاية البث",end_of_feed_body:"يحتوي أرشيفنا المباشر حاليًا على مقالات من آخر 30 يومًا."}},Z_={en:{World:"World News",Technology:"Technology",Sports:"Sports",Business:"Business",Local:"Local News",Politics:"Politics"},ar:{World:"أخبار العالم",Technology:"تكنولوجيا",Sports:"رياضة",Business:"أعمال",Local:"أخبار محلية",Politics:"سياسة"}},Rk=({title:t,subtitle:e,language:n,toggleLanguage:r,languageToggleText:i,onRefresh:s,searchQuery:o,setSearchQuery:a,user:l,onLogin:u,onLogout:h,uiText:p})=>{const m=new Date,_={weekday:"long",year:"numeric",month:"long",day:"numeric"},R=new Intl.DateTimeFormat(n==="ar"?"ar-EG-u-nu-latn":"en-US",_).format(m),P=n==="ar";return F.jsxs("header",{className:"bg-stone-100 p-3 lg:p-4 border-b-2 border-stone-200",children:[F.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[F.jsxs("div",{className:"w-full md:w-auto flex-1 flex items-center gap-4",children:[F.jsx("button",{onClick:s,title:p.refresh_tooltip,className:"p-2 hover:bg-stone-200 rounded-full transition-colors",children:F.jsx(Sk,{className:"w-5 h-5 text-stone-700"})}),F.jsxs("div",{className:"relative flex-grow max-w-sm",children:[F.jsx("input",{type:"search",placeholder:p.search_placeholder,value:o,onChange:x=>a(x.target.value),className:"bg-stone-100 border border-stone-300 rounded-full py-1.5 px-4 pl-10 w-full focus:outline-none focus:ring-2 focus:ring-stone-400"}),F.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 rtl:right-3 rtl:left-auto",children:F.jsx(wk,{className:"w-4 h-4 text-stone-500"})})]})]}),F.jsxs("div",{className:"flex-1.5 text-center px-4 order-first md:order-none",children:[F.jsx("h1",{className:`text-3xl lg:text-4xl font-black tracking-wider text-stone-900 ${P?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{className:`text-xs mt-1 text-stone-600 ${P?"font-serif-ar":"font-serif-en"}`,children:e})]}),F.jsxs("div",{className:"w-full md:w-auto flex-1 flex items-center justify-center md:justify-end gap-4",children:[F.jsx("button",{onClick:l?h:u,className:"bg-stone-800 text-white px-4 py-1.5 rounded-md text-sm font-bold hover:bg-stone-900 transition-colors",children:l?p.logout:p.login}),F.jsx("button",{onClick:r,className:"border-2 border-stone-800 text-stone-800 px-3 py-1 rounded-md text-sm font-bold hover:bg-stone-800 hover:text-white transition-colors",children:i})]})]}),F.jsxs("div",{className:"flex justify-between items-center mt-4 border-t-4 border-b-2 border-stone-900 border-double py-2",children:[F.jsx("span",{className:"text-xs font-bold text-stone-900",children:R}),F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsxs("span",{className:"text-xs font-bold text-stone-500",children:["v",Ck]}),F.jsx("span",{className:"text-xs font-bold text-stone-900",children:"VOL. 1, NO. 1"})]})]})]})},j_=({className:t="w-5 h-5",color:e})=>F.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:e||"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Pk=t=>t==="Fast Spreading"||t==="سريع الانتشار"?{color:"text-red-600",key:"fast_spreading"}:t==="Medium Spreading"||t==="متوسط الانتشار"?{color:"text-orange-500",key:"medium_spreading"}:{color:"text-stone-500",key:"low_spreading"},ev=({article:t,isFeatured:e})=>F.jsx("div",{className:`relative w-full overflow-hidden ${e?"md:w-1/2 h-64 md:h-auto":"h-48"}`,children:t.imageUrl?F.jsxs(F.Fragment,{children:[F.jsxs("picture",{children:[F.jsx("source",{srcSet:t.imageUrl.replace(/\.png$/i,".webp"),type:"image/webp"}),F.jsx("img",{src:t.imageUrl,alt:t.headline,className:"absolute inset-0 h-full w-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",width:"1280",height:"720"})]}),F.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):F.jsx("div",{className:"absolute inset-0 h-full w-full bg-stone-200 animate-pulse"})}),tv=({article:t,onReadMore:e,categoryText:n,uiText:r,isFeatured:i=!1})=>{const{color:s,key:o}=Pk(t.viralityDescription||""),a=r[o]||t.viralityDescription,l=document.documentElement.dir==="rtl",u=document.documentElement.lang,h=oe.useMemo(()=>{const m=new Date(t.date),_={year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat(u==="ar"?"ar-EG-u-nu-latn":"en-US",_).format(m)},[t.date,u]),p=t.body?t.body.split(`
`)[0].substring(0,i?200:100)+"...":"";return i?F.jsxs("div",{className:"bg-white flex flex-col md:flex-row cursor-pointer group transform hover:-translate-y-1 transition-transform duration-300 shadow-lg hover:shadow-2xl rounded-lg overflow-hidden h-full",onClick:()=>e(t),role:"article","aria-labelledby":`headline-${t.id}`,children:[F.jsx(ev,{article:t,isFeatured:!0}),F.jsxs("div",{className:"p-6 flex flex-col flex-grow md:w-1/2",children:[F.jsx("span",{className:"text-[10px] font-bold uppercase text-red-700 mb-1",children:n}),F.jsx("h2",{id:`headline-${t.id}`,className:`font-bold text-stone-900 text-2xl lg:text-3xl ${l?"font-serif-ar":"font-header-en"}`,children:t.headline}),F.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500 mt-1 mb-3",children:[F.jsxs("span",{children:[t.byline," - ",h]}),F.jsxs("div",{title:r.virality_tooltip,className:`flex items-center gap-1 font-bold ${s}`,children:[F.jsx(j_,{className:"w-4 h-4",color:"currentColor"}),F.jsx("span",{children:a})]})]}),F.jsx("p",{className:"text-sm text-stone-600 flex-grow",children:p}),F.jsx("span",{className:"text-red-700 font-bold mt-4 self-start group-hover:underline",children:l?"اقرأ المزيد ←":"Read More →"})]})]}):F.jsxs("div",{className:"bg-white flex flex-col cursor-pointer group transform hover:-translate-y-1 transition-transform duration-300 shadow-md hover:shadow-xl rounded-lg overflow-hidden h-full",onClick:()=>e(t),role:"article","aria-labelledby":`headline-${t.id}`,children:[F.jsxs("div",{className:"relative",children:[F.jsx(ev,{article:t,isFeatured:!1}),F.jsx("span",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2 bg-red-700 text-white text-[10px] font-bold uppercase px-2 py-1 rounded z-10",children:n})]}),F.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[F.jsx("h2",{id:`headline-${t.id}`,className:`font-bold text-stone-900 text-xl ${l?"font-serif-ar":"font-header-en"}`,children:t.headline}),F.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500 mt-1 mb-2",children:[F.jsxs("span",{children:[t.byline," - ",h]}),F.jsxs("div",{title:r.virality_tooltip,className:`flex items-center gap-1 font-bold ${s}`,children:[F.jsx(j_,{className:"w-4 h-4",color:"currentColor"}),F.jsx("span",{children:a})]})]}),F.jsx("p",{className:"text-sm text-stone-600 flex-grow",children:p}),F.jsx("span",{className:"text-red-700 font-bold mt-4 self-start group-hover:underline",children:l?"اقرأ المزيد ←":"Read More →"})]})]})},km=({className:t="w-12 h-12"})=>F.jsxs("svg",{className:`${t} animate-spin`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[F.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),F.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Nk=({title:t,subtitle:e})=>{const n=document.documentElement.dir==="rtl";return F.jsxs("div",{className:"fixed inset-0 bg-stone-900/75 flex flex-col items-center justify-center z-[100] text-white",children:[F.jsx(km,{className:"w-16 h-16 text-white"}),F.jsx("h2",{className:`mt-6 text-3xl font-bold ${n?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{className:"mt-2 text-lg",children:e})]})},nv=({language:t,activeTopic:e,onSelect:n})=>{const r=Ak[t],i=Nm[t].topic_filter_prompt;return F.jsx("div",{className:"my-6 p-4 bg-white rounded-lg shadow-sm border border-stone-200",children:F.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[F.jsx("h3",{className:"text-md font-bold text-stone-700 flex-shrink-0",children:i}),F.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.map(s=>F.jsx("button",{onClick:()=>n(s.key),className:`
                px-4 py-1.5 text-sm font-semibold rounded-full transition-colors duration-200
                ${e===s.key?"bg-stone-800 text-white shadow":"bg-stone-200 text-stone-700 hover:bg-stone-300"}
              `,children:s.label},s.key))})]})})},kk=({className:t="w-12 h-12"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})});/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=()=>{};var rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Mk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Mk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new Dk;const m=s<<2|a>>4;if(r.push(m),u!==64){const _=a<<4&240|u>>2;if(r.push(_),p!==64){const R=u<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Dk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vk=function(t){const e=FS(t);return bS.encodeByteArray(e,!0)},mc=function(t){return Vk(t).replace(/\./g,"")},OS=function(t){try{return bS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=()=>Lk().__FIREBASE_DEFAULTS__,Fk=()=>{if(typeof process>"u"||typeof rv>"u")return;const t=rv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},td=()=>{try{return xk()||Uk()||Fk()||bk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qS=t=>{var e,n;return(n=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Ok=t=>{const e=qS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BS=()=>{var t;return(t=td())==null?void 0:t.config},GS=t=>{var e;return(e=td())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}const Ca={};function Gk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ca))Ca[e]?t.emulator.push(e):t.prod.push(e);return t}function Hk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iv=!1;function $S(t,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Ca[t]===e||Ca[t]||iv)return;Ca[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=Gk().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{iv=!0,o()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=Hk(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),w=n("preprendIcon"),T=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;a(C),h(x,P);const V=u();l(T,w),C.append(T,R,x,V),document.body.appendChild(C)}s?(R.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function zk(){var e;const t=(e=td())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qk(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Yk(){return!zk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xk(){try{return typeof indexedDB=="object"}catch{return!1}}function Zk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jk,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?e1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lr(i,a,r)}}function e1(t,e){return t.replace(t1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const t1=/\{\$([^}]+)}/g;function n1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ti(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(sv(s)&&sv(o)){if(!ti(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function r1(t,e){const n=new i1(t,e);return n.subscribe.bind(n)}class i1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wf),i.error===void 0&&(i.error=wf),i.complete===void 0&&(i.complete=wf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l1(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a1(t){return t===Si?void 0:t}function l1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const c1={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},d1=ue.INFO,f1={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},h1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=f1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=d1,this._logHandler=h1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const p1=(t,e)=>e.some(n=>t instanceof n);let ov,av;function m1(){return ov||(ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g1(){return av||(av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zS=new WeakMap,Kh=new WeakMap,WS=new WeakMap,Sf=new WeakMap,Mm=new WeakMap;function y1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zS.set(n,t)}).catch(()=>{}),Mm.set(e,t),e}function _1(t){if(Kh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kh.set(t,e)}let Jh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v1(t){Jh=t(Jh)}function T1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cf(this),e,...n);return WS.set(r,e.sort?e.sort():[e]),Jr(r)}:g1().includes(t)?function(...e){return t.apply(Cf(this),e),Jr(zS.get(this))}:function(...e){return Jr(t.apply(Cf(this),e))}}function E1(t){return typeof t=="function"?T1(t):(t instanceof IDBTransaction&&_1(t),p1(t,m1())?new Proxy(t,Jh):t)}function Jr(t){if(t instanceof IDBRequest)return y1(t);if(Sf.has(t))return Sf.get(t);const e=E1(t);return e!==t&&(Sf.set(t,e),Mm.set(e,t)),e}const Cf=t=>Mm.get(t);function I1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jr(o.result),l.oldVersion,l.newVersion,Jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const w1=["get","getKey","getAll","getAllKeys","count"],S1=["put","add","delete","clear"],Af=new Map;function lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=S1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||w1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Af.set(e,s),s}v1(t=>({...t,get:(e,n,r)=>lv(e,n)||t.get(e,n,r),has:(e,n)=>!!lv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",uv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new xm("@firebase/app"),R1="@firebase/app-compat",P1="@firebase/analytics-compat",N1="@firebase/analytics",k1="@firebase/app-check-compat",x1="@firebase/app-check",M1="@firebase/auth",D1="@firebase/auth-compat",V1="@firebase/database",L1="@firebase/data-connect",U1="@firebase/database-compat",F1="@firebase/functions",b1="@firebase/functions-compat",O1="@firebase/installations",q1="@firebase/installations-compat",B1="@firebase/messaging",G1="@firebase/messaging-compat",H1="@firebase/performance",$1="@firebase/performance-compat",z1="@firebase/remote-config",W1="@firebase/remote-config-compat",K1="@firebase/storage",J1="@firebase/storage-compat",Q1="@firebase/firestore",Y1="@firebase/ai",X1="@firebase/firestore-compat",Z1="firebase",j1="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="[DEFAULT]",ex={[Qh]:"fire-core",[R1]:"fire-core-compat",[N1]:"fire-analytics",[P1]:"fire-analytics-compat",[x1]:"fire-app-check",[k1]:"fire-app-check-compat",[M1]:"fire-auth",[D1]:"fire-auth-compat",[V1]:"fire-rtdb",[L1]:"fire-data-connect",[U1]:"fire-rtdb-compat",[F1]:"fire-fn",[b1]:"fire-fn-compat",[O1]:"fire-iid",[q1]:"fire-iid-compat",[B1]:"fire-fcm",[G1]:"fire-fcm-compat",[H1]:"fire-perf",[$1]:"fire-perf-compat",[z1]:"fire-rc",[W1]:"fire-rc-compat",[K1]:"fire-gcs",[J1]:"fire-gcs-compat",[Q1]:"fire-fst",[X1]:"fire-fst-compat",[Y1]:"fire-vertex","fire-js":"fire-js",[Z1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,tx=new Map,Xh=new Map;function cv(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ao(t){const e=t.name;if(Xh.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,t);for(const n of gc.values())cv(n,t);for(const n of tx.values())cv(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new _l("app","Firebase",nx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=j1;function KS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Yh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Qr.create("bad-app-name",{appName:String(i)});if(n||(n=BS()),!n)throw Qr.create("no-options");const s=gc.get(i);if(s){if(ti(n,s.options)&&ti(r,s.config))return s;throw Qr.create("duplicate-app",{appName:i})}const o=new u1(i);for(const l of Xh.values())o.addComponent(l);const a=new rx(n,r,o);return gc.set(i,a),a}function JS(t=Yh){const e=gc.get(t);if(!e&&t===Yh&&BS())return KS();if(!e)throw Qr.create("no-app",{appName:t});return e}function Yr(t,e,n){let r=ex[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(o.join(" "));return}ao(new Xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebase-heartbeat-database",sx=1,Xa="firebase-heartbeat-store";let Rf=null;function QS(){return Rf||(Rf=I1(ix,sx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qr.create("idb-open",{originalErrorMessage:t.message})})),Rf}async function ox(t){try{const n=(await QS()).transaction(Xa),r=await n.objectStore(Xa).get(YS(t));return await n.done,r}catch(e){if(e instanceof lr)nr.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function dv(t,e){try{const r=(await QS()).transaction(Xa,"readwrite");await r.objectStore(Xa).put(e,YS(t)),await r.done}catch(n){if(n instanceof lr)nr.warn(n.message);else{const r=Qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=1024,lx=30;class ux{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lx){const o=fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fv(),{heartbeatsToSend:r,unsentEntries:i}=cx(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return nr.warn(n),""}}}function fv(){return new Date().toISOString().substring(0,10)}function cx(t,e=ax){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xk()?Zk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ox(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hv(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}function fx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){ao(new Xi("platform-logger",e=>new C1(e),"PRIVATE")),ao(new Xi("heartbeat",e=>new ux(e),"PRIVATE")),Yr(Qh,uv,t),Yr(Qh,uv,"esm2020"),Yr("fire-js","")}hx("");function XS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const px=XS,ZS=new _l("auth","Firebase",XS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new xm("@firebase/auth");function mx(t,...e){yc.logLevel<=ue.WARN&&yc.warn(`Auth (${Io}): ${t}`,...e)}function ku(t,...e){yc.logLevel<=ue.ERROR&&yc.error(`Auth (${Io}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw Lm(t,...e)}function _n(t,...e){return Lm(t,...e)}function Vm(t,e,n){const r={...px(),[e]:n};return new _l("auth","Firebase",r).create(e,{appName:t.name})}function Gi(t){return Vm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bn(t,"argument-error"),Vm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZS.create(t,...e)}function ne(t,e,...n){if(!t)throw Lm(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function rr(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function yx(){return pv()==="http:"||pv()==="https:"}function pv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yx()||Kk()||"connection"in navigator)?navigator.onLine:!0}function vx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,rr(n>e,"Short delay should be less than long delay!"),this.isMobile=$k()||Jk()}get(){return _x()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ix=new Tl(3e4,6e4);function Fm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wo(t,e,n,r,i={}){return eC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=vl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return Wk()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(u.credentials="include"),jS.fetch()(await tC(t,t.config.apiHost,n,a),u)})}async function eC(t,e,n){t._canInitEmulator=!1;const r={...Tx,...e};try{const i=new Sx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw du(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Vm(t,h,u);bn(t,h)}}catch(i){if(i instanceof lr)throw i;bn(t,"network-request-failed",{message:String(i)})}}async function wx(t,e,n,r,i={}){const s=await wo(t,e,n,r,i);return"mfaPendingCredential"in s&&bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function tC(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Um(t.config,i):`${t.config.apiScheme}://${i}`;return Ex.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class Sx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),Ix.get())})}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_n(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function _c(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ax(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=bm(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Aa(Pf(i.auth_time)),issuedAtTime:Aa(Pf(i.iat)),expirationTime:Aa(Pf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Pf(t){return Number(t)*1e3}function bm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=OS(n);return i?JSON.parse(i):(ku("Failed to decode base64 JWT payload"),null)}catch(i){return ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mv(t){const e=bm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&Rx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Za(t,_c(e,{idToken:n}));ne(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?nC(i.providerUserInfo):[],o=kx(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new jh(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Nx(t){const e=Ke(t);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e){const n=await eC(t,{},async()=>{const r=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await tC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(l.credentials="include"),jS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mx(t,e){return wo(t,"POST","/v2/accounts:revokeToken",Fm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ls;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ls,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Px(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Za(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ax(this,e)}reload(){return Nx(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Gi(this.auth));const e=await this.getIdToken();return await Za(this,Cx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:R,stsTokenManager:P}=n;ne(p&&P,e,"internal-error");const x=Ls.fromJSON(this.name,P);ne(typeof p=="string",e,"internal-error"),_r(r,e.name),_r(i,e.name),ne(typeof m=="boolean",e,"internal-error"),ne(typeof _=="boolean",e,"internal-error"),_r(s,e.name),_r(o,e.name),_r(a,e.name),_r(l,e.name),_r(u,e.name),_r(h,e.name);const w=new mn({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:u,lastLoginAt:h});return R&&Array.isArray(R)&&(w.providerData=R.map(T=>({...T}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ls;i.updateFromServerResponse(n);const s=new mn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?nC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ls;a.updateFromIdToken(r);const l=new mn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function Qn(t){rr(t instanceof Function,"Expected a class definition");let e=gv.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rC.type="NONE";const yv=rC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class Us{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=xu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _c(this.auth,{idToken:e}).catch(()=>{});return n?mn._fromGetAccountInfoResponse(this.auth,n,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Us(Qn(yv),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Qn(yv);const o=xu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await _c(e,{idToken:h}).catch(()=>{});if(!m)break;p=await mn._fromGetAccountInfoResponse(e,m,h)}else p=mn._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Us(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Us(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uC(e))return"Blackberry";if(cC(e))return"Webos";if(sC(e))return"Safari";if((e.includes("chrome/")||oC(e))&&!e.includes("edge/"))return"Chrome";if(lC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iC(t=Et()){return/firefox\//i.test(t)}function sC(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oC(t=Et()){return/crios\//i.test(t)}function aC(t=Et()){return/iemobile/i.test(t)}function lC(t=Et()){return/android/i.test(t)}function uC(t=Et()){return/blackberry/i.test(t)}function cC(t=Et()){return/webos/i.test(t)}function Om(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dx(t=Et()){var e;return Om(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Vx(){return Qk()&&document.documentMode===10}function dC(t=Et()){return Om(t)||lC(t)||cC(t)||uC(t)||/windows phone/i.test(t)||aC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e=[]){let n;switch(t){case"Browser":n=_v(Et());break;case"Worker":n=`${_v(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t,e={}){return wo(t,"GET","/v2/passwordPolicy",Fm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=6;class bx{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Fx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new Lx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _c(this,{idToken:e}),r=await mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Gi(this));const n=e?Ke(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ux(this),n=new bx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nd(t){return Ke(t)}class vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=r1(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qx(t){qm=t}function Bx(t){return qm.loadJS(t)}function Gx(){return qm.gapiScript}function Hx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ti(s,e??{}))return i;bn(i,"already-initialized")}return n.initialize({options:e})}function zx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Wx(t,e,n){const r=nd(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=hC(e),{host:o,port:a}=Kx(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(ti(u,r.config.emulator)&&ti(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Eo(o)?(HS(`${s}//${o}${l}`),$S("Auth",!0)):Jx()}function hC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Kx(t){const e=hC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Tv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Tv(o)}}}function Tv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e){return wx(t,"POST","/v1/accounts:signInWithIdp",Fm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="http://localhost";class Zi extends pC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Zi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}buildRequest(){const e={requestUri:Qx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends El{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends El{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends El{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await mn._fromIdTokenResponse(e,r,i),o=Ev(r);return new lo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ev(r);return new lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ev(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends lr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Tc(e,n,r,i)}}function mC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Tc._fromErrorAndOperation(t,s,e,r):s})}async function Yx(t,e,n=!1){const r=await Za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(Gi(r));const i="reauthenticate";try{const s=await Za(t,mC(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=bm(s.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),lo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t,e,n=!1){if(pn(t.app))return Promise.reject(Gi(t));const r="signIn",i=await mC(t,r,e),s=await lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function jx(t,e,n,r){return Ke(t).onIdTokenChanged(e,n,r)}function eM(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function tM(t,e,n,r){return Ke(t).onAuthStateChanged(e,n,r)}function nM(t){return Ke(t).signOut()}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=1e3,iM=10;class yC extends gC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Vx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yC.type="LOCAL";const sM=yC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C extends gC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_C.type="SESSION";const vC=_C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await oM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Gm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function lM(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function uM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function dM(){return TC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="firebaseLocalStorageDb",fM=1,Ic="firebaseLocalStorage",IC="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function id(t,e){return t.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function hM(){const t=indexedDB.deleteDatabase(EC);return new Il(t).toPromise()}function ep(){const t=indexedDB.open(EC,fM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ic,{keyPath:IC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ic)?e(r):(r.close(),await hM(),e(await ep()))})})}async function Iv(t,e,n){const r=id(t,!0).put({[IC]:e,value:n});return new Il(r).toPromise()}async function pM(t,e){const n=id(t,!1).get(e),r=await new Il(n).toPromise();return r===void 0?null:r.value}function wv(t,e){const n=id(t,!0).delete(e);return new Il(n).toPromise()}const mM=800,gM=3;class wC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(dM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await uM(),!this.activeServiceWorker)return;this.sender=new aM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await Iv(e,Ec,"1"),await wv(e,Ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=id(i,!1).getAll();return new Il(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wC.type="LOCAL";const yM=wC;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t,e){return e?Qn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends pC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _M(t){return Zx(t.auth,new Hm(t),t.bypassAuthState)}function vM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Xx(n,new Hm(t),t.bypassAuthState)}async function TM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Yx(n,new Hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _M;case"linkViaPopup":case"linkViaRedirect":return TM;case"reauthViaPopup":case"reauthViaRedirect":return vM;default:bn(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new Tl(2e3,1e4);async function IM(t,e,n){if(pn(t.app))return Promise.reject(_n(t,"operation-not-supported-in-this-environment"));const r=nd(t);gx(t,e,Bm);const i=SC(r,n);return new Ni(r,"signInViaPopup",e,i).executeNotNull()}class Ni extends CC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EM.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",Mu=new Map;class SM extends CC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const r=await CM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CM(t,e){const n=PM(e),r=RM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function AM(t,e){Mu.set(t._key(),e)}function RM(t){return Qn(t._redirectPersistence)}function PM(t){return xu(wM,t.config.apiKey,t.name)}async function NM(t,e,n=!1){if(pn(t.app))return Promise.reject(Gi(t));const r=nd(t),i=SC(r,e),o=await new SM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=10*60*1e3;class xM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(e))}saveEventToCache(e){this.cachedEventUids.add(Sv(e)),this.lastProcessedEventTime=Date.now()}}function Sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LM=/^https?/;async function UM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DM(t);for(const n of e)try{if(FM(n))return}catch{}bn(t,"unauthorized-domain")}function FM(t){const e=Zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!LM.test(n))return!1;if(VM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Tl(3e4,6e4);function Cv(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OM(t){return new Promise((e,n)=>{var i,s,o;function r(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(_n(t,"network-request-failed"))},timeout:bM.get()})}if((s=(i=Dn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Dn().gapi)!=null&&o.load)r();else{const a=Hx("iframefcb");return Dn()[a]=()=>{gapi.load?r():n(_n(t,"network-request-failed"))},Bx(`${Gx()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Du=null,e})}let Du=null;function qM(t){return Du=Du||OM(t),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Tl(5e3,15e3),GM="__/auth/iframe",HM="emulator/auth/iframe",$M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WM(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Um(e,HM):`https://${t.config.authDomain}/${GM}`,r={apiKey:e.apiKey,appName:t.name,v:Io},i=zM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vl(r).slice(1)}`}async function KM(t){const e=await qM(t),n=Dn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:WM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$M,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),a=Dn().setTimeout(()=>{s(o)},BM.get());function l(){Dn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QM=500,YM=600,XM="_blank",ZM="http://localhost";class Av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jM(t,e,n,r=QM,i=YM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...JM,width:r.toString(),height:i.toString(),top:s,left:o},u=Et().toLowerCase();n&&(a=oC(u)?XM:n),iC(u)&&(e=e||ZM,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[_,R])=>`${m}${_}=${R},`,"");if(Dx(u)&&a!=="_self")return eD(e||"",a),new Av(null);const p=window.open(e||"",a,h);ne(p,t,"popup-blocked");try{p.focus()}catch{}return new Av(p)}function eD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="__/auth/handler",nD="emulator/auth/handler",rD=encodeURIComponent("fac");async function Rv(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Io,eventId:i};if(e instanceof Bm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",n1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof El){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${rD}=${encodeURIComponent(l)}`:"";return`${iD(t)}?${vl(a).slice(1)}${u}`}function iD({config:t}){return t.emulator?Um(t,nD):`https://${t.authDomain}/${tD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class sD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vC,this._completeRedirectFn=NM,this._overrideRedirectResult=AM}async _openPopup(e,n,r,i){var o;rr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Rv(e,n,r,Zh(),i);return jM(e,s,Gm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Rv(e,n,r,Zh(),i);return lM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(rr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KM(e),r=new xM(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nf,{type:Nf},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Nf];s!==void 0&&n(!!s),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dC()||sC()||Om()}}const oD=sD;var Pv="@firebase/auth",Nv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uD(t){ao(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fC(t)},u=new Ox(r,i,s,l);return zx(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ao(new Xi("auth-internal",e=>{const n=nd(e.getProvider("auth").getImmediate());return(r=>new aD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(Pv,Nv,lD(t)),Yr(Pv,Nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=5*60,dD=GS("authIdTokenMaxAge")||cD;let kv=null;const fD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dD)return;const i=n==null?void 0:n.token;kv!==i&&(kv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hD(t=JS()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$x(t,{popupRedirectResolver:oD,persistence:[yM,sM,vC]}),r=GS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fD(s.toString());eM(n,o,()=>o(n.currentUser)),jx(n,a=>o(a))}}const i=qS("auth");return i&&Wx(n,`http://${i}`),n}function pD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}qx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=_n("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uD("Browser");var mD="firebase",gD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(mD,gD,"app");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,RC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function I(){}I.prototype=v.prototype,S.F=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(A,k,M){for(var N=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)N[Pe-2]=arguments[Pe];return v.prototype[k].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,I){I||(I=0);const A=Array(16);if(typeof v=="string")for(var k=0;k<16;++k)A[k]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(k=0;k<16;++k)A[k]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],k=S.g[2];let M=S.g[3],N;N=v+(M^I&(k^M))+A[0]+3614090360&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[1]+3905402710&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[2]+606105819&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[3]+3250441966&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[4]+4118548399&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[5]+1200080426&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[6]+2821735955&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[7]+4249261313&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[8]+1770035416&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[9]+2336552879&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[10]+4294925233&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[11]+2304563134&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[12]+1804603682&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[13]+4254626195&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[14]+2792965006&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[15]+1236535329&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(k^M&(I^k))+A[1]+4129170786&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[6]+3225465664&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[11]+643717713&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[0]+3921069994&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[5]+3593408605&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[10]+38016083&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[15]+3634488961&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[4]+3889429448&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[9]+568446438&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[14]+3275163606&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[3]+4107603335&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[8]+1163531501&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[13]+2850285829&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[2]+4243563512&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[7]+1735328473&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[12]+2368359562&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(I^k^M)+A[5]+4294588738&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[8]+2272392833&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[11]+1839030562&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[14]+4259657740&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[1]+2763975236&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[4]+1272893353&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[7]+4139469664&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[10]+3200236656&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[13]+681279174&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[0]+3936430074&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[3]+3572445317&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[6]+76029189&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[9]+3654602809&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[12]+3873151461&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[15]+530742520&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[2]+3299628645&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(k^(I|~M))+A[0]+4096336452&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[7]+1126891415&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[14]+2878612391&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[5]+4237533241&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[12]+1700485571&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[3]+2399980690&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[10]+4293915773&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[1]+2240044497&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[8]+1873313359&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[15]+4264355552&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[6]+2734768916&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[13]+1309151649&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[4]+4149444226&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[11]+3174756917&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[2]+718787259&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.v=function(S,v){v===void 0&&(v=S.length);const I=v-this.blockSize,A=this.C;let k=this.h,M=0;for(;M<v;){if(k==0)for(;M<=I;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<v;)if(A[k++]=S.charCodeAt(M++),k==this.blockSize){i(this,A),k=0;break}}else for(;M<v;)if(A[k++]=S[M++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)S[v++]=this.g[I]>>>A&255;return S};function s(S,v){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function o(S,v){this.h=v;const I=[];let A=!0;for(let k=S.length-1;k>=0;k--){const M=S[k]|0;A&&M==v||(I[k]=M,A=!1)}this.g=I}var a={};function l(S){return-128<=S&&S<128?s(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return x(u(-S));const v=[];let I=1;for(let A=0;S>=I;A++)v[A]=S/I|0,I*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return x(h(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(v,8));let A=p;for(let M=0;M<S.length;M+=8){var k=Math.min(8,S.length-M);const N=parseInt(S.substring(M,M+k),v);k<8?(k=u(Math.pow(v,k)),A=A.j(k).add(u(N))):(A=A.j(I),A=A.add(u(N)))}return A}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-x(this).m();let S=0,v=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);S+=(A>=0?A:4294967296+A)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R(this))return"0";if(P(this))return"-"+x(this).toString(S);const v=u(Math.pow(S,6));var I=this;let A="";for(;;){const k=V(I,v).g;I=w(I,k.j(v));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=k,R(I))return M+A;for(;M.length<6;)M="0"+M;A=M+A}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function R(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=w(this,S),P(S)?-1:R(S)?0:1};function x(S){const v=S.g.length,I=[];for(let A=0;A<v;A++)I[A]=~S.g[A];return new o(I,~S.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),I=[];let A=0;for(let k=0;k<=v;k++){let M=A+(this.i(k)&65535)+(S.i(k)&65535),N=(M>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=N>>>16,M&=65535,N&=65535,I[k]=N<<16|M}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(S,v){return S.add(x(v))}t.j=function(S){if(R(this)||R(S))return p;if(P(this))return P(S)?x(this).j(x(S)):x(x(this).j(S));if(P(S))return x(this.j(x(S)));if(this.l(_)<0&&S.l(_)<0)return u(this.m()*S.m());const v=this.g.length+S.g.length,I=[];for(var A=0;A<2*v;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let k=0;k<S.g.length;k++){const M=this.i(A)>>>16,N=this.i(A)&65535,Pe=S.i(k)>>>16,It=S.i(k)&65535;I[2*A+2*k]+=N*It,T(I,2*A+2*k),I[2*A+2*k+1]+=M*It,T(I,2*A+2*k+1),I[2*A+2*k+1]+=N*Pe,T(I,2*A+2*k+1),I[2*A+2*k+2]+=M*Pe,T(I,2*A+2*k+2)}for(S=0;S<v;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=v;S<2*v;S++)I[S]=0;return new o(I,0)};function T(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function C(S,v){this.g=S,this.h=v}function V(S,v){if(R(v))throw Error("division by zero");if(R(S))return new C(p,p);if(P(S))return v=V(x(S),v),new C(x(v.g),x(v.h));if(P(v))return v=V(S,x(v)),new C(x(v.g),v.h);if(S.g.length>30){if(P(S)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=v;A.l(S)<=0;)I=L(I),A=L(A);var k=b(I,1),M=b(A,1);for(A=b(A,2),I=b(I,2);!R(A);){var N=M.add(A);N.l(S)<=0&&(k=k.add(I),M=N),A=b(A,1),I=b(I,1)}return v=w(S,k.j(v)),new C(k,v)}for(k=p;S.l(v)>=0;){for(I=Math.max(1,Math.floor(S.m()/v.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),M=u(I),N=M.j(v);P(N)||N.l(S)>0;)I-=A,M=u(I),N=M.j(v);R(M)&&(M=m),k=k.add(M),S=w(S,N)}return new C(k,S)}t.B=function(S){return V(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)&S.i(A);return new o(I,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)|S.i(A);return new o(I,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)^S.i(A);return new o(I,this.h^S.h)};function L(S){const v=S.g.length+1,I=[];for(let A=0;A<v;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(I,S.h)}function b(S,v){const I=v>>5;v%=32;const A=S.g.length-I,k=[];for(let M=0;M<A;M++)k[M]=v>0?S.i(M+I)>>>v|S.i(M+I+1)<<32-v:S.i(M+I);return new o(k,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Xr=o}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PC,fa,NC,Vu,tp,kC,xC,MC;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var E=0;E<d.length-1;E++){var U=d[E];if(!(U in y))break e;y=y[U]}d=d[d.length-1],E=y[d],g=g(E),g!=E&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var y=[],E;for(E in g)Object.prototype.hasOwnProperty.call(g,E)&&y.push([E,g[E]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,y){return d.call.apply(d.bind,arguments)}function u(d,g,y){return u=l,u.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),d.apply(this,E)}}function p(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(E,U,O){for(var $=Array(arguments.length-2),se=2;se<arguments.length;se++)$[se-2]=arguments[se];return g.prototype[U].apply(E,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const g=d.length;if(g>0){const y=Array(g);for(let E=0;E<g;E++)y[E]=d[E];return y}return[]}function R(d,g){for(let E=1;E<arguments.length;E++){const U=arguments[E];var y=typeof U;if(y=y!="object"?y:U?Array.isArray(U)?"array":y:"null",y=="array"||y=="object"&&typeof U.length=="number"){y=d.length||0;const O=U.length||0;d.length=y+O;for(let $=0;$<O;$++)d[y+$]=U[$]}else d.push(U)}}class P{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){o.setTimeout(()=>{throw d},0)}function w(){var d=S;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class T{constructor(){this.h=this.g=null}add(g,y){const E=C.get();E.set(g,y),this.h?this.h.next=E:this.g=E,this.h=E}}var C=new P(()=>new V,d=>d.reset());class V{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,b=!1,S=new T,v=()=>{const d=Promise.resolve(void 0);L=()=>{d.then(I)}};function I(){for(var d;d=w();){try{d.h.call(d.g)}catch(y){x(y)}var g=C;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}b=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function Pe(d,g){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(Pe,k),Pe.prototype.init=function(d,g){const y=this.type=d.type,E=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function ae(d,g,y,E,U){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!E,this.ha=U,this.key=++Ze,this.da=this.fa=!1}function G(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function W(d,g,y){for(const E in d)g.call(y,d[E],E,d)}function X(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function j(d){const g={};for(const y in d)g[y]=d[y];return g}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(d,g){let y,E;for(let U=1;U<arguments.length;U++){E=arguments[U];for(y in E)d[y]=E[y];for(let O=0;O<ke.length;O++)y=ke[O],Object.prototype.hasOwnProperty.call(E,y)&&(d[y]=E[y])}}function je(d){this.src=d,this.g={},this.h=0}je.prototype.add=function(d,g,y,E,U){const O=d.toString();d=this.g[O],d||(d=this.g[O]=[],this.h++);const $=an(d,g,E,U);return $>-1?(g=d[$],y||(g.fa=!1)):(g=new ae(g,this.src,O,!!E,U),g.fa=y,d.push(g)),g};function gi(d,g){const y=g.type;if(y in d.g){var E=d.g[y],U=Array.prototype.indexOf.call(E,g,void 0),O;(O=U>=0)&&Array.prototype.splice.call(E,U,1),O&&(G(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function an(d,g,y,E){for(let U=0;U<d.length;++U){const O=d[U];if(!O.da&&O.listener==g&&O.capture==!!y&&O.ha==E)return U}return-1}var cr="closure_lm_"+(Math.random()*1e6|0),Pd={};function Lg(d,g,y,E,U){if(Array.isArray(g)){for(let O=0;O<g.length;O++)Lg(d,g[O],y,E,U);return null}return y=bg(y),d&&d[It]?d.J(g,y,a(E)?!!E.capture:!1,U):VA(d,g,y,!1,E,U)}function VA(d,g,y,E,U,O){if(!g)throw Error("Invalid event type");const $=a(U)?!!U.capture:!!U;let se=kd(d);if(se||(d[cr]=se=new je(d)),y=se.add(g,y,E,$,O),y.proxy)return y;if(E=LA(),y.proxy=E,E.src=d,E.listener=y,d.addEventListener)M||(U=$),U===void 0&&(U=!1),d.addEventListener(g.toString(),E,U);else if(d.attachEvent)d.attachEvent(Fg(g.toString()),E);else if(d.addListener&&d.removeListener)d.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function LA(){function d(y){return g.call(d.src,d.listener,y)}const g=UA;return d}function Ug(d,g,y,E,U){if(Array.isArray(g))for(var O=0;O<g.length;O++)Ug(d,g[O],y,E,U);else E=a(E)?!!E.capture:!!E,y=bg(y),d&&d[It]?(d=d.i,O=String(g).toString(),O in d.g&&(g=d.g[O],y=an(g,y,E,U),y>-1&&(G(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[O],d.h--)))):d&&(d=kd(d))&&(g=d.g[g.toString()],d=-1,g&&(d=an(g,y,E,U)),(y=d>-1?g[d]:null)&&Nd(y))}function Nd(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[It])gi(g.i,d);else{var y=d.type,E=d.proxy;g.removeEventListener?g.removeEventListener(y,E,d.capture):g.detachEvent?g.detachEvent(Fg(y),E):g.addListener&&g.removeListener&&g.removeListener(E),(y=kd(g))?(gi(y,d),y.h==0&&(y.src=null,g[cr]=null)):G(d)}}}function Fg(d){return d in Pd?Pd[d]:Pd[d]="on"+d}function UA(d,g){if(d.da)d=!0;else{g=new Pe(g,this);const y=d.listener,E=d.ha||d.src;d.fa&&Nd(d),d=y.call(E,g)}return d}function kd(d){return d=d[cr],d instanceof je?d:null}var xd="__closure_events_fn_"+(Math.random()*1e9>>>0);function bg(d){return typeof d=="function"?d:(d[xd]||(d[xd]=function(g){return d.handleEvent(g)}),d[xd])}function ft(){A.call(this),this.i=new je(this),this.M=this,this.G=null}p(ft,A),ft.prototype[It]=!0,ft.prototype.removeEventListener=function(d,g,y,E){Ug(this,d,g,y,E)};function wt(d,g){var y,E=d.G;if(E)for(y=[];E;E=E.G)y.push(E);if(d=d.M,E=g.type||g,typeof g=="string")g=new k(g,d);else if(g instanceof k)g.target=g.target||d;else{var U=g;g=new k(E,d),Ge(g,U)}U=!0;let O,$;if(y)for($=y.length-1;$>=0;$--)O=g.g=y[$],U=Vl(O,E,!0,g)&&U;if(O=g.g=d,U=Vl(O,E,!0,g)&&U,U=Vl(O,E,!1,g)&&U,y)for($=0;$<y.length;$++)O=g.g=y[$],U=Vl(O,E,!1,g)&&U}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let E=0;E<y.length;E++)G(y[E]);delete d.g[g],d.h--}}this.G=null},ft.prototype.J=function(d,g,y,E){return this.i.add(String(d),g,!1,y,E)},ft.prototype.K=function(d,g,y,E){return this.i.add(String(d),g,!0,y,E)};function Vl(d,g,y,E){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let O=0;O<g.length;++O){const $=g[O];if($&&!$.da&&$.capture==y){const se=$.listener,Je=$.ha||$.src;$.fa&&gi(d.i,$),U=se.call(Je,E)!==!1&&U}}return U&&!E.defaultPrevented}function FA(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function Og(d){d.g=FA(()=>{d.g=null,d.i&&(d.i=!1,Og(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class bA extends A{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Og(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vo(d){A.call(this),this.h=d,this.g={}}p(Vo,A);var qg=[];function Bg(d){W(d.g,function(g,y){this.g.hasOwnProperty(y)&&Nd(g)},d),d.g={}}Vo.prototype.N=function(){Vo.Z.N.call(this),Bg(this)},Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Md=o.JSON.stringify,OA=o.JSON.parse,qA=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Gg(){}function Hg(){}var Lo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dd(){k.call(this,"d")}p(Dd,k);function Vd(){k.call(this,"c")}p(Vd,k);var yi={},$g=null;function Ll(){return $g=$g||new ft}yi.Ia="serverreachability";function zg(d){k.call(this,yi.Ia,d)}p(zg,k);function Uo(d){const g=Ll();wt(g,new zg(g))}yi.STAT_EVENT="statevent";function Wg(d,g){k.call(this,yi.STAT_EVENT,d),this.stat=g}p(Wg,k);function St(d){const g=Ll();wt(g,new Wg(g,d))}yi.Ja="timingevent";function Kg(d,g){k.call(this,yi.Ja,d),this.size=g}p(Kg,k);function Fo(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function bo(){this.g=!0}bo.prototype.ua=function(){this.g=!1};function BA(d,g,y,E,U,O){d.info(function(){if(d.g)if(O){var $="",se=O.split("&");for(let Te=0;Te<se.length;Te++){var Je=se[Te].split("=");if(Je.length>1){const et=Je[0];Je=Je[1];const wn=et.split("_");$=wn.length>=2&&wn[1]=="type"?$+(et+"="+Je+"&"):$+(et+"=redacted&")}}}else $=null;else $=O;return"XMLHTTP REQ ("+E+") [attempt "+U+"]: "+g+`
`+y+`
`+$})}function GA(d,g,y,E,U,O,$){d.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+U+"]: "+g+`
`+y+`
`+O+" "+$})}function as(d,g,y,E){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+$A(d,y)+(E?" "+E:"")})}function HA(d,g){d.info(function(){return"TIMEOUT: "+g})}bo.prototype.info=function(){};function $A(d,g){if(!d.g)return g;if(!g)return null;try{const O=JSON.parse(g);if(O){for(d=0;d<O.length;d++)if(Array.isArray(O[d])){var y=O[d];if(!(y.length<2)){var E=y[1];if(Array.isArray(E)&&!(E.length<1)){var U=E[0];if(U!="noop"&&U!="stop"&&U!="close")for(let $=1;$<E.length;$++)E[$]=""}}}}return Md(O)}catch{return g}}var Ul={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qg;function Ld(){}p(Ld,Gg),Ld.prototype.g=function(){return new XMLHttpRequest},Qg=new Ld;function Oo(d){return encodeURIComponent(String(d))}function zA(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function dr(d,g,y,E){this.j=d,this.i=g,this.l=y,this.S=E||1,this.V=new Vo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var Xg={},Ud={};function Fd(d,g,y){d.M=1,d.A=bl(In(g)),d.u=y,d.R=!0,Zg(d,null)}function Zg(d,g){d.F=Date.now(),Fl(d),d.B=In(d.A);var y=d.B,E=d.S;Array.isArray(E)||(E=[String(E)]),dy(y.i,"t",E),d.C=0,y=d.j.L,d.h=new Yg,d.g=Ny(d.j,y?g:null,!d.u),d.P>0&&(d.O=new bA(u(d.Y,d,d.g),d.P)),g=d.V,y=d.g,E=d.ba;var U="readystatechange";Array.isArray(U)||(U&&(qg[0]=U.toString()),U=qg);for(let O=0;O<U.length;O++){const $=Lg(y,U[O],E||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.J?j(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Uo(),BA(d.i,d.v,d.B,d.l,d.S,d.u)}dr.prototype.ba=function(d){d=d.target;const g=this.O;g&&pr(d)==3?g.j():this.Y(d)},dr.prototype.Y=function(d){try{if(d==this.g)e:{const se=pr(this.g),Je=this.g.ya(),Te=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||_y(this.g)))){this.K||se!=4||Je==7||(Je==8||Te<=0?Uo(3):Uo(2)),bd(this);var g=this.g.ca();this.X=g;var y=WA(this);if(this.o=g==200,GA(this.i,this.v,this.B,this.l,this.S,se,g),this.o){if(this.U&&!this.L){t:{if(this.g){var E,U=this.g;if((E=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(E)){var O=E;break t}}O=null}if(d=O)as(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Od(this,d);else{this.o=!1,this.m=3,St(12),_i(this),qo(this);break e}}if(this.R){d=!0;let et;for(;!this.K&&this.C<y.length;)if(et=KA(this,y),et==Ud){se==4&&(this.m=4,St(14),d=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Xg){this.m=4,St(15),as(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else as(this.i,this.l,et,null),Od(this,et);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||y.length!=0||this.h.h||(this.m=1,St(16),d=!1),this.o=this.o&&d,!d)as(this.i,this.l,y,"[Invalid Chunked Response]"),_i(this),qo(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Kd($),$.P=!0,St(11))}}else as(this.i,this.l,y,null),Od(this,y);se==4&&_i(this),this.o&&!this.K&&(se==4?Cy(this.j,this):(this.o=!1,Fl(this)))}else aR(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),_i(this),qo(this)}}}catch{}finally{}};function WA(d){if(!jg(d))return d.g.la();const g=_y(d.g);if(g==="")return"";let y="";const E=g.length,U=pr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return _i(d),qo(d),"";d.h.i=new o.TextDecoder}for(let O=0;O<E;O++)d.h.h=!0,y+=d.h.i.decode(g[O],{stream:!(U&&O==E-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function jg(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function KA(d,g){var y=d.C,E=g.indexOf(`
`,y);return E==-1?Ud:(y=Number(g.substring(y,E)),isNaN(y)?Xg:(E+=1,E+y>g.length?Ud:(g=g.slice(E,E+y),d.C=E+y,g)))}dr.prototype.cancel=function(){this.K=!0,_i(this)};function Fl(d){d.T=Date.now()+d.H,ey(d,d.H)}function ey(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fo(u(d.aa,d),g)}function bd(d){d.D&&(o.clearTimeout(d.D),d.D=null)}dr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(HA(this.i,this.B),this.M!=2&&(Uo(),St(17)),_i(this),this.m=2,qo(this)):ey(this,this.T-d)};function qo(d){d.j.I==0||d.K||Cy(d.j,d)}function _i(d){bd(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Bg(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Od(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||qd(y.h,d))){if(!d.L&&qd(y.h,d)&&y.I==3){try{var E=y.Ba.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var U=E;if(U[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)Hl(y),Bl(y);else break e;Wd(y),St(18)}}else y.xa=U[1],0<y.xa-y.K&&U[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Fo(u(y.Va,y),6e3));ry(y.h)<=1&&y.ta&&(y.ta=void 0)}else Ti(y,11)}else if((d.L||y.g==d)&&Hl(y),!N(g))for(U=y.Ba.g.parse(g),g=0;g<U.length;g++){let Te=U[g];const et=Te[0];if(!(et<=y.K))if(y.K=et,Te=Te[1],y.I==2)if(Te[0]=="c"){y.M=Te[1],y.ba=Te[2];const wn=Te[3];wn!=null&&(y.ka=wn,y.j.info("VER="+y.ka));const Ei=Te[4];Ei!=null&&(y.za=Ei,y.j.info("SVER="+y.za));const mr=Te[5];mr!=null&&typeof mr=="number"&&mr>0&&(E=1.5*mr,y.O=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const gr=d.g;if(gr){const zl=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var O=E.h;O.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Bd(O,O.h),O.h=null))}if(E.G){const Jd=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jd&&(E.wa=Jd,we(E.J,E.G,Jd))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),E=y;var $=d;if(E.na=Py(E,E.L?E.ba:null,E.W),$.L){iy(E.h,$);var se=$,Je=E.O;Je&&(se.H=Je),se.D&&(bd(se),Fl(se)),E.g=$}else wy(E);y.i.length>0&&Gl(y)}else Te[0]!="stop"&&Te[0]!="close"||Ti(y,7);else y.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Ti(y,7):zd(y):Te[0]!="noop"&&y.l&&y.l.qa(Te),y.A=0)}}Uo(4)}catch{}}var JA=class{constructor(d,g){this.g=d,this.map=g}};function ty(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ny(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ry(d){return d.h?1:d.g?d.g.size:0}function qd(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Bd(d,g){d.g?d.g.add(g):d.h=g}function iy(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}ty.prototype.cancel=function(){if(this.i=sy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function sy(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return _(d.i)}var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QA(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const E=d[y].indexOf("=");let U,O=null;E>=0?(U=d[y].substring(0,E),O=d[y].substring(E+1)):U=d[y],g(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof fr?(this.l=d.l,Bo(this,d.j),this.o=d.o,this.g=d.g,Go(this,d.u),this.h=d.h,Gd(this,fy(d.i)),this.m=d.m):d&&(g=String(d).match(oy))?(this.l=!1,Bo(this,g[1]||"",!0),this.o=Ho(g[2]||""),this.g=Ho(g[3]||"",!0),Go(this,g[4]),this.h=Ho(g[5]||"",!0),Gd(this,g[6]||"",!0),this.m=Ho(g[7]||"")):(this.l=!1,this.i=new zo(null,this.l))}fr.prototype.toString=function(){const d=[];var g=this.j;g&&d.push($o(g,ay,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push($o(g,ay,!0),"@"),d.push(Oo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push($o(y,y.charAt(0)=="/"?ZA:XA,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",$o(y,eR)),d.join("")},fr.prototype.resolve=function(d){const g=In(this);let y=!!d.j;y?Bo(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var E=d.h;if(y)Go(g,d.u);else if(y=!!d.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var U=g.h.lastIndexOf("/");U!=-1&&(E=g.h.slice(0,U+1)+E)}if(U=E,U==".."||U==".")E="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){E=U.lastIndexOf("/",0)==0,U=U.split("/");const O=[];for(let $=0;$<U.length;){const se=U[$++];se=="."?E&&$==U.length&&O.push(""):se==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),E&&$==U.length&&O.push("")):(O.push(se),E=!0)}E=O.join("/")}else E=U}return y?g.h=E:y=d.i.toString()!=="",y?Gd(g,fy(d.i)):y=!!d.m,y&&(g.m=d.m),g};function In(d){return new fr(d)}function Bo(d,g,y){d.j=y?Ho(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Go(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Gd(d,g,y){g instanceof zo?(d.i=g,tR(d.i,d.l)):(y||(g=$o(g,jA)),d.i=new zo(g,d.l))}function we(d,g,y){d.i.set(g,y)}function bl(d){return we(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ho(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function $o(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,YA),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function YA(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ay=/[#\/\?@]/g,XA=/[#\?:]/g,ZA=/[#\?]/g,jA=/[#\?@]/g,eR=/#/g;function zo(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function vi(d){d.g||(d.g=new Map,d.h=0,d.i&&QA(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=zo.prototype,t.add=function(d,g){vi(this),this.i=null,d=ls(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function ly(d,g){vi(d),g=ls(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function uy(d,g){return vi(d),g=ls(d,g),d.g.has(g)}t.forEach=function(d,g){vi(this),this.g.forEach(function(y,E){y.forEach(function(U){d.call(g,U,E,this)},this)},this)};function cy(d,g){vi(d);let y=[];if(typeof g=="string")uy(d,g)&&(y=y.concat(d.g.get(ls(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return vi(this),this.i=null,d=ls(this,d),uy(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=cy(this,d),d.length>0?String(d[0]):g):g};function dy(d,g,y){ly(d,g),y.length>0&&(d.i=null,d.g.set(ls(d,g),_(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let E=0;E<g.length;E++){var y=g[E];const U=Oo(y);y=cy(this,y);for(let O=0;O<y.length;O++){let $=U;y[O]!==""&&($+="="+Oo(y[O])),d.push($)}}return this.i=d.join("&")};function fy(d){const g=new zo;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function ls(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function tR(d,g){g&&!d.j&&(vi(d),d.i=null,d.g.forEach(function(y,E){const U=E.toLowerCase();E!=U&&(ly(this,E),dy(this,U,y))},d)),d.j=g}function nR(d,g){const y=new bo;if(o.Image){const E=new Image;E.onload=h(hr,y,"TestLoadImage: loaded",!0,g,E),E.onerror=h(hr,y,"TestLoadImage: error",!1,g,E),E.onabort=h(hr,y,"TestLoadImage: abort",!1,g,E),E.ontimeout=h(hr,y,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=d}else g(!1)}function rR(d,g){const y=new bo,E=new AbortController,U=setTimeout(()=>{E.abort(),hr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:E.signal}).then(O=>{clearTimeout(U),O.ok?hr(y,"TestPingServer: ok",!0,g):hr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),hr(y,"TestPingServer: error",!1,g)})}function hr(d,g,y,E,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),E(y)}catch{}}function iR(){this.g=new qA}function Hd(d){this.i=d.Sb||null,this.h=d.ab||!1}p(Hd,Gg),Hd.prototype.g=function(){return new Ol(this.i,this.h)};function Ol(d,g){ft.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ol,ft),t=Ol.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Ko(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wo(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hy(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function hy(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Wo(this):Ko(this),this.readyState==3&&hy(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Wo(this))},t.Na=function(d){this.g&&(this.response=d,Wo(this))},t.ga=function(){this.g&&Wo(this)};function Wo(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ko(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function Ko(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function py(d){let g="";return W(d,function(y,E){g+=E,g+=":",g+=y,g+=`\r
`}),g}function $d(d,g,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=py(y),typeof d=="string"?y!=null&&Oo(y):we(d,g,y))}function Le(d){ft.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,ft);var sR=/^https?$/i,oR=["POST","PUT"];t=Le.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qg.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(O){my(this,O);return}if(d=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var U in E)y.set(U,E[U]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())y.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(O=>O.toLowerCase()=="content-type"),U=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(oR,g,void 0)>=0)||E||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of y)this.g.setRequestHeader(O,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(O){my(this,O)}};function my(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,gy(d),ql(d)}function gy(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,wt(this,"complete"),wt(this,"abort"),ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ql(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?yy(this):this.Xa())},t.Xa=function(){yy(this)};function yy(d){if(d.h&&typeof s<"u"){if(d.v&&pr(d)==4)setTimeout(d.Ca.bind(d),0);else if(wt(d,"readystatechange"),pr(d)==4){d.h=!1;try{const O=d.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var E;if(E=O===0){let $=String(d.D).match(oy)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),E=!sR.test($?$.toLowerCase():"")}y=E}if(y)wt(d,"complete"),wt(d,"success");else{d.o=6;try{var U=pr(d)>2?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.ca()+"]",gy(d)}}finally{ql(d)}}}}function ql(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||wt(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function pr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return pr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),OA(g)}};function _y(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function aR(d){const g={};d=(d.g&&pr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<d.length;E++){if(N(d[E]))continue;var y=zA(d[E]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const O=g[U]||[];g[U]=O,O.push(y)}X(g,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function vy(d){this.za=0,this.i=[],this.j=new bo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jo("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jo("baseRetryDelayMs",5e3,d),this.Za=Jo("retryDelaySeedMs",1e4,d),this.Ta=Jo("forwardChannelMaxRetries",2,d),this.va=Jo("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ty(d&&d.concurrentRequestLimit),this.Ba=new iR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vy.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,E){St(0),this.W=d,this.H=g||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.J=Py(this,null,this.W),Gl(this)};function zd(d){if(Ty(d),d.I==3){var g=d.V++,y=In(d.J);if(we(y,"SID",d.M),we(y,"RID",g),we(y,"TYPE","terminate"),Qo(d,y),g=new dr(d,d.j,g),g.M=2,g.A=bl(In(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.A,y=!0),y||(g.g=Ny(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Fl(g)}Ry(d)}function Bl(d){d.g&&(Kd(d),d.g.cancel(),d.g=null)}function Ty(d){Bl(d),d.v&&(o.clearTimeout(d.v),d.v=null),Hl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Gl(d){if(!ny(d.h)&&!d.m){d.m=!0;var g=d.Ea;L||v(),b||(L(),b=!0),S.add(g,d),d.D=0}}function lR(d,g){return ry(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Fo(u(d.Ea,d,g),Ay(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const U=new dr(this,this.j,d);let O=this.o;if(this.U&&(O?(O=j(O),Ge(O,this.U)):O=this.U),this.u!==null||this.R||(U.J=O,O=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Iy(this,U,g),y=In(this.J),we(y,"RID",d),we(y,"CVER",22),this.G&&we(y,"X-HTTP-Session-Id",this.G),Qo(this,y),O&&(this.R?g="headers="+Oo(py(O))+"&"+g:this.u&&$d(y,this.u,O)),Bd(this.h,U),this.Ra&&we(y,"TYPE","init"),this.S?(we(y,"$req",g),we(y,"SID","null"),U.U=!0,Fd(U,y,null)):Fd(U,y,g),this.I=2}}else this.I==3&&(d?Ey(this,d):this.i.length==0||ny(this.h)||Ey(this))};function Ey(d,g){var y;g?y=g.l:y=d.V++;const E=In(d.J);we(E,"SID",d.M),we(E,"RID",y),we(E,"AID",d.K),Qo(d,E),d.u&&d.o&&$d(E,d.u,d.o),y=new dr(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Iy(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Bd(d.h,y),Fd(y,E,g)}function Qo(d,g){d.H&&W(d.H,function(y,E){we(g,E,y)}),d.l&&W({},function(y,E){we(g,E,y)})}function Iy(d,g,y){y=Math.min(d.i.length,y);const E=d.l?u(d.l.Ka,d.l,d):null;e:{var U=d.i;let se=-1;for(;;){const Je=["count="+y];se==-1?y>0?(se=U[0].g,Je.push("ofs="+se)):se=0:Je.push("ofs="+se);let Te=!0;for(let et=0;et<y;et++){var O=U[et].g;const wn=U[et].map;if(O-=se,O<0)se=Math.max(0,U[et].g-100),Te=!1;else try{O="req"+O+"_"||"";try{var $=wn instanceof Map?wn:Object.entries(wn);for(const[Ei,mr]of $){let gr=mr;a(mr)&&(gr=Md(mr)),Je.push(O+Ei+"="+encodeURIComponent(gr))}}catch(Ei){throw Je.push(O+"type="+encodeURIComponent("_badmap")),Ei}}catch{E&&E(wn)}}if(Te){$=Je.join("&");break e}}$=void 0}return d=d.i.splice(0,y),g.G=d,$}function wy(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;L||v(),b||(L(),b=!0),S.add(g,d),d.A=0}}function Wd(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Fo(u(d.Da,d),Ay(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Sy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fo(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Bl(this),Sy(this))};function Kd(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Sy(d){d.g=new dr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=In(d.na);we(g,"RID","rpc"),we(g,"SID",d.M),we(g,"AID",d.K),we(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&we(g,"TO",d.ia),we(g,"TYPE","xmlhttp"),Qo(d,g),d.u&&d.o&&$d(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=bl(In(g)),y.u=null,y.R=!0,Zg(y,d)}t.Va=function(){this.C!=null&&(this.C=null,Bl(this),Wd(this),St(19))};function Hl(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Cy(d,g){var y=null;if(d.g==g){Hl(d),Kd(d),d.g=null;var E=2}else if(qd(d.h,g))y=g.G,iy(d.h,g),E=1;else return;if(d.I!=0){if(g.o)if(E==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var U=d.D;E=Ll(),wt(E,new Kg(E,y)),Gl(d)}else wy(d);else if(U=g.m,U==3||U==0&&g.X>0||!(E==1&&lR(d,g)||E==2&&Wd(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),U){case 1:Ti(d,5);break;case 4:Ti(d,10);break;case 3:Ti(d,6);break;default:Ti(d,2)}}}function Ay(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function Ti(d,g){if(d.j.info("Error code "+g),g==2){var y=u(d.bb,d),E=d.Ua;const U=!E;E=new fr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Bo(E,"https"),bl(E),U?nR(E.toString(),y):rR(E.toString(),y)}else St(2);d.I=0,d.l&&d.l.pa(g),Ry(d),Ty(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Ry(d){if(d.I=0,d.ja=[],d.l){const g=sy(d.h);(g.length!=0||d.i.length!=0)&&(R(d.ja,g),R(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function Py(d,g,y){var E=y instanceof fr?In(y):new fr(y);if(E.g!="")g&&(E.g=g+"."+E.g),Go(E,E.u);else{var U=o.location;E=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const O=new fr(null);E&&Bo(O,E),g&&(O.g=g),U&&Go(O,U),y&&(O.h=y),E=O}return y=d.G,g=d.wa,y&&g&&we(E,y,g),we(E,"VER",d.ka),Qo(d,E),E}function Ny(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new Le(new Hd({ab:y})):new Le(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ky(){}t=ky.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $l(){}$l.prototype.g=function(d,g){return new Gt(d,g)};function Gt(d,g){ft.call(this),this.g=new vy(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new us(this)}p(Gt,ft),Gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){zd(this.g)},Gt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Md(d),d=y);g.i.push(new JA(g.Ya++,d)),g.I==3&&Gl(g)},Gt.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,Gt.Z.N.call(this)};function xy(d){Dd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(xy,Dd);function My(){Vd.call(this),this.status=1}p(My,Vd);function us(d){this.g=d}p(us,ky),us.prototype.ra=function(){wt(this.g,"a")},us.prototype.qa=function(d){wt(this.g,new xy(d))},us.prototype.pa=function(d){wt(this.g,new My)},us.prototype.oa=function(){wt(this.g,"b")},$l.prototype.createWebChannel=$l.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,MC=function(){return new $l},xC=function(){return Ll()},kC=yi,tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ul.NO_ERROR=0,Ul.TIMEOUT=8,Ul.HTTP_ERROR=6,Vu=Ul,Jg.COMPLETE="complete",NC=Jg,Hg.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",ft.prototype.listen=ft.prototype.J,fa=Hg,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,PC=Le}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const Mv="@firebase/firestore",Dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new xm("@firebase/firestore");function ds(){return ji.logLevel}function J(t,...e){if(ji.logLevel<=ue.DEBUG){const n=e.map($m);ji.debug(`Firestore (${So}): ${t}`,...n)}}function ir(t,...e){if(ji.logLevel<=ue.ERROR){const n=e.map($m);ji.error(`Firestore (${So}): ${t}`,...n)}}function uo(t,...e){if(ji.logLevel<=ue.WARN){const n=e.map($m);ji.warn(`Firestore (${So}): ${t}`,...n)}}function $m(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DC(t,r,n)}function DC(t,e,n){let r=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||DC(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class _D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vD{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new VC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class TD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ED{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new TD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ID{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function np(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return kf(i)===kf(s)?ce(i,s):kf(i)?1:-1}return ce(t.length,e.length)}const SD=55296,CD=57343;function kf(t){const e=t.charCodeAt(0);return e>=SD&&e<=CD}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="__name__";class An{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return An.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof An?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=An.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=An.isNumericId(e),i=An.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?An.extractNumericId(e).compare(An.extractNumericId(n)):np(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xr.fromString(e.substring(4,e.length-2))}}class Ee extends An{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const AD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends An{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return AD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lv}static keyField(){return new lt([Lv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ee.fromString(e))}static fromName(e){return new Z(Ee.fromString(e).popFirst(5))}static empty(){return new Z(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e,n){if(!n)throw new z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RD(t,e,n,r){if(e===!0&&r===!0)throw new z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uv(t){if(!Z.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fv(t){if(Z.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function UC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sd(t);throw new z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function wl(t,e){if(!UC(t))throw new z(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new z(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=-62135596800,Ov=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ov);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bv)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:We("string",Ae._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ae(0,0))}static max(){return new re(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=-1;function PD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new ni(i,Z.empty(),e)}function ND(t){return new ni(t.readTime,t.key,ja)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(re.min(),Z.empty(),ja)}static max(){return new ni(re.max(),Z.empty(),ja)}}function kD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==xD)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function DD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}od.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function ad(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function VD(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="";function LD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qv(e)),e=UD(t.get(n),e);return qv(e)}function UD(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case FC:n+="";break;default:n+=s}}return n}function qv(t){return t+FC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Xe(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new OC("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const FD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=FD.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="server_timestamp",BC="__type__",GC="__previous_value__",HC="__local_write_time__";function Km(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BC])==null?void 0:r.stringValue)===qC}function ld(t){const e=t.mapValue.fields[GC];return Km(e)?ld(e):e}function el(t){const e=ri(t.mapValue.fields[HC].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Sc="(default)";class tl{constructor(e,n){this.projectId=e,this.database=n||Sc}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__type__",OD="__max__",pu={mapValue:{}},zC="__vector__",Cc="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Km(t)?4:BD(t)?9007199254740991:qD(t)?10:11:te(28295,{value:t})}function On(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ri(i.timestampValue),a=ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ii(i.bytesValue).isEqual(ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?wc(o)===wc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Bv(o)!==Bv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!On(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function nl(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function fo(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Oe(s.integerValue||s.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Hv(t.timestampValue,e.timestampValue);case 4:return Hv(el(t),el(e));case 5:return np(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ii(s),l=ii(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ce(a[u],l[u]);if(h!==0)return h}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(Oe(s.latitude),Oe(o.latitude));return a!==0?a:ce(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $v(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,_,R,P;const a=s.fields||{},l=o.fields||{},u=(m=a[Cc])==null?void 0:m.arrayValue,h=(_=l[Cc])==null?void 0:_.arrayValue,p=ce(((R=u==null?void 0:u.values)==null?void 0:R.length)||0,((P=h==null?void 0:h.values)==null?void 0:P.length)||0);return p!==0?p:$v(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=np(l[p],h[p]);if(m!==0)return m;const _=fo(a[l[p]],u[h[p]]);if(_!==0)return _}return ce(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function Hv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=ri(t),r=ri(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function $v(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=fo(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function ho(t){return rp(t)}function rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rp(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Lu(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(t);return e?16+Lu(e):16;case 5:return 2*t.stringValue.length;case 6:return ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Lu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return fi(r.fields,(s,o)=>{i+=s.length+Lu(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function zv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ip(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function Wv(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function qD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$C])==null?void 0:r.stringValue)===zC}function Ra(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return{...t}}function BD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ra(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(Ra(this.value))}}function WC(t){const e=[];return fi(t.fields,(n,r)=>{const i=new lt([n]);if(Uu(r)){const s=WC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,re.min(),re.min(),re.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new _t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new _t(e,2,n,re.min(),re.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,re.min(),re.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function Jv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=fo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n="asc"){this.field=e,this.dir=n}}function GD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class ze extends KC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $D(e,n,r):n==="array-contains"?new KD(e,r):n==="in"?new JD(e,r):n==="not-in"?new QD(e,r):n==="array-contains-any"?new YD(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zD(e,r):new WD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fo(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tn(e,n)}matches(e){return JC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function JC(t){return t.op==="and"}function QC(t){return HD(t)&&JC(t)}function HD(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function sp(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(QC(t))return t.filters.map(e=>sp(e)).join(",");{const e=t.filters.map(n=>sp(n)).join(",");return`${t.op}(${e})`}}function YC(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&YC(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function XC(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(XC).join(" ,")+"}"}(t):"Filter"}class $D extends ze{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class zD extends ze{constructor(e,n){super(e,"in",n),this.keys=ZC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WD extends ze{constructor(e,n){super(e,"not-in",n),this.keys=ZC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class KD extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&nl(n.arrayValue,this.value)}}class JD extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nl(this.value.arrayValue,n)}}class QD extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nl(this.value.arrayValue,n)}}class YD extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Yv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XD(t,e,n,r,i,s,o)}function Qm(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.Te=n}return e.Te}function Ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qv(t.startAt,e.startAt)&&Qv(t.endAt,e.endAt)}function op(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZD(t,e,n,r,i,s,o,a){return new Ro(t,e,n,r,i,s,o,a)}function ud(t){return new Ro(t)}function Xv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jC(t){return t.collectionGroup!==null}function Pa(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xe(lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new rl(s,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new rl(lt.keyField(),r))}return e.Ie}function Vn(t){const e=ie(t);return e.Ee||(e.Ee=jD(e,Pa(t))),e.Ee}function jD(t,e){if(t.limitType==="F")return Yv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new rl(i.field,s)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Yv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ap(t,e){const n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lp(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cd(t,e){return Ym(Vn(t),Vn(e))&&t.limitType===e.limitType}function e0(t){return`${Qm(Vn(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XC(i)).join(", ")}]`),ad(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ho(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function dd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Pa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Jv(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Pa(r),i)||r.endAt&&!function(o,a,l){const u=Jv(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Pa(r),i))}(t,e)}function eV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t0(t){return(e,n)=>{let r=!1;for(const i of Pa(t)){const s=tV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tV(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?fo(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return bC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new Ve(Z.comparator);function sr(){return nV}const n0=new Ve(Z.comparator);function ha(...t){let e=n0;for(const n of t)e=e.insert(n.key,n);return e}function r0(t){let e=n0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Na()}function i0(){return Na()}function Na(){return new is(t=>t.toString(),(t,e)=>t.isEqual(e))}const rV=new Ve(Z.comparator),iV=new Xe(Z.comparator);function de(...t){let e=iV;for(const n of t)e=e.add(n);return e}const sV=new Xe(ce);function oV(){return sV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function s0(t){return{integerValue:""+t}}function aV(t,e){return VD(e)?s0(e):Xm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function lV(t,e,n){return t instanceof il?function(i,s){const o={fields:{[BC]:{stringValue:qC},[HC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Km(s)&&(s=ld(s)),s&&(o.fields[GC]=s),{mapValue:o}}(n,e):t instanceof po?a0(t,e):t instanceof sl?l0(t,e):function(i,s){const o=o0(i,s),a=Zv(o)+Zv(i.Ae);return ip(o)&&ip(i.Ae)?s0(a):Xm(i.serializer,a)}(t,e)}function uV(t,e,n){return t instanceof po?a0(t,e):t instanceof sl?l0(t,e):n}function o0(t,e){return t instanceof Rc?function(r){return ip(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class il extends fd{}class po extends fd{constructor(e){super(),this.elements=e}}function a0(t,e){const n=u0(e);for(const r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}class sl extends fd{constructor(e){super(),this.elements=e}}function l0(t,e){let n=u0(e);for(const r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}class Rc extends fd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Zv(t){return Oe(t.integerValue||t.doubleValue)}function u0(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.field=e,this.transform=n}}function cV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof po&&i instanceof po||r instanceof sl&&i instanceof sl?co(r.elements,i.elements,On):r instanceof Rc&&i instanceof Rc?On(r.Ae,i.Ae):r instanceof il&&i instanceof il}(t.transform,e.transform)}class dV{constructor(e,n){this.version=e,this.transformResults=n}}class Bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hd{}function d0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zm(t.key,Bt.none()):new Sl(t.key,t.data,Bt.none());{const n=t.data,r=Lt.empty();let i=new Xe(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hi(t.key,r,new zt(i.toArray()),Bt.none())}}function fV(t,e,n){t instanceof Sl?function(i,s,o){const a=i.value.clone(),l=eT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hi?function(i,s,o){if(!Fu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=eT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(f0(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof Sl?function(s,o,a,l){if(!Fu(s.precondition,o))return a;const u=s.value.clone(),h=tT(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof hi?function(s,o,a,l){if(!Fu(s.precondition,o))return a;const u=tT(s.fieldTransforms,l,o),h=o.data;return h.setAll(f0(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Fu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function hV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=o0(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(s,o)=>cV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sl extends hd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hi extends hd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function f0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eT(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uV(o,a,n[i]))}return r}function tT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lV(s,o,e))}return r}class Zm extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pV extends hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=d0(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>jv(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>jv(n,r))}}class jm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return rV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new jm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,pe;function _V(t){switch(t){case q.OK:return te(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function h0(t){if(t===void 0)return ir("GRPC error has no .code"),q.UNKNOWN;switch(t){case He.OK:return q.OK;case He.CANCELLED:return q.CANCELLED;case He.UNKNOWN:return q.UNKNOWN;case He.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case He.INTERNAL:return q.INTERNAL;case He.UNAVAILABLE:return q.UNAVAILABLE;case He.UNAUTHENTICATED:return q.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case He.NOT_FOUND:return q.NOT_FOUND;case He.ALREADY_EXISTS:return q.ALREADY_EXISTS;case He.PERMISSION_DENIED:return q.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case He.ABORTED:return q.ABORTED;case He.OUT_OF_RANGE:return q.OUT_OF_RANGE;case He.UNIMPLEMENTED:return q.UNIMPLEMENTED;case He.DATA_LOSS:return q.DATA_LOSS;default:return te(39323,{code:t})}}(pe=He||(He={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Xr([4294967295,4294967295],0);function nT(t){const e=vV().encode(t),n=new RC;return n.update(e),new Uint8Array(n.digest())}function rT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([i,s],0)]}class eg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pa(`Invalid padding: ${n}`);if(r<0)throw new pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Xr.fromNumber(r)));return i.compare(TV)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nT(e),[r,i]=rT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=nT(e),[r,i]=rT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pd(re.min(),i,new Ve(ce),sr(),de())}}class Cl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cl(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class p0{constructor(e,n){this.targetId=e,this.Ce=n}}class m0{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class iT{constructor(){this.ve=0,this.Fe=sT(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new Cl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=sT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EV{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=mu(),this.He=mu(),this.Ye=new Ve(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(op(s))if(r===0){const o=new Z(s.path);this.et(n,o,_t.newNoDocument(o,re.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ii(r).toUint8Array()}catch(l){if(l instanceof OC)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new eg(o,i,s)}catch(l){return uo(l instanceof pa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&op(a.target)){const l=new Z(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,_t.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=de();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new pd(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=mu(),this.He=mu(),this.Ye=new Ve(ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xe(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xe(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mu(){return new Ve(Z.comparator)}function sT(){return new Ve(Z.comparator)}const IV={asc:"ASCENDING",desc:"DESCENDING"},wV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SV={and:"AND",or:"OR"};class CV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function up(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AV(t,e){return Pc(t,e.toTimestamp())}function Ln(t){return _e(!!t,49232),re.fromTimestamp(function(n){const r=ri(n);return new Ae(r.seconds,r.nanos)}(t))}function tg(t,e){return cp(t,e).canonicalString()}function cp(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function y0(t){const e=Ee.fromString(t);return _e(I0(e),10190,{key:e.toString()}),e}function dp(t,e){return tg(t.databaseId,e.path)}function xf(t,e){const n=y0(e);if(n.get(1)!==t.databaseId.projectId)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(v0(n))}function _0(t,e){return tg(t.databaseId,e)}function RV(t){const e=y0(t);return e.length===4?Ee.emptyPath():v0(e)}function fp(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v0(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oT(t,e,n){return{name:dp(t,e),fields:n.value.mapValue.fields}}function PV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(_e(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?q.UNKNOWN:h0(u.code);return new z(h,u.message||"")}(o);n=new m0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xf(t,r.document.name),s=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):re.min(),a=new Lt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new bu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xf(t,r.document),s=r.readTime?Ln(r.readTime):re.min(),o=_t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xf(t,r.document),s=r.removedTargetIds||[];n=new bu([],s,i,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new yV(i,s),a=r.targetId;n=new p0(a,o)}}return n}function NV(t,e){let n;if(e instanceof Sl)n={update:oT(t,e.key,e.value)};else if(e instanceof Zm)n={delete:dp(t,e.key)};else if(e instanceof hi)n={update:oT(t,e.key,e.data),updateMask:bV(e.fieldMask)};else{if(!(e instanceof pV))return te(16599,{Vt:e.type});n={verify:dp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof il)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof po)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function kV(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Ln(i.updateTime):Ln(s);return o.isEqual(re.min())&&(o=Ln(s)),new dV(o,i.transformResults||[])}(n,e))):[]}function xV(t,e){return{documents:[_0(t,e.path)]}}function MV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_0(t,i);const s=function(u){if(u.length!==0)return E0(Tn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:hs(m.field),direction:LV(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=up(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function DV(t){let e=RV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=T0(p);return m instanceof Tn&&QC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(R){return new rl(ps(R.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,ad(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new Ac(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,_=p.values||[];return new Ac(_,m)}(n.endAt)),ZD(e,i,o,s,a,"F",l,u)}function VV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ps(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ps(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ps(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ps(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(ps(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>T0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function LV(t){return IV[t]}function UV(t){return wV[t]}function FV(t){return SV[t]}function hs(t){return{fieldPath:t.canonicalString()}}function ps(t){return lt.fromServerFormat(t.fieldPath)}function E0(t){return t instanceof ze?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(Wv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(Wv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:UV(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(i=>E0(i));return r.length===1?r[0]:{compositeFilter:{op:FV(n.op),filters:r}}}(t):te(54877,{filter:t})}function bV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function I0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.yt=e}}function qV(t){const e=DV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.Cn=new GV}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ni.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class GV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w0=41943040;class Dt{static withCacheSize(e){return new Dt(e,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(w0,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mo(0)}static cr(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="LruGarbageCollector",HV=1048576;function uT([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class $V{constructor(e){this.Ir=e,this.buffer=new Xe(uT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();uT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(lT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?J(lT,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Vr(3e5)})}}class WV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(od.ce);const r=new $V(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(aT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),ds()<=ue.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function KV(t,e){return new WV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.changes=new is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ka(r.mutation,i,zt.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=sr();const o=Na(),a=function(){return Na()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof hi)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ka(h.mutation,u,h.mutation.getFieldMask(),Ae.now())):o.set(u.key,zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new QV(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Na();let i=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||zt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const p=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,p=i0();h.forEach(m=>{if(!s.has(m)){const _=d0(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(ki());let a=ja,l=s;return o.next(u=>B.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,de())).next(h=>({batchId:a,changes:r0(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const u=function(p,m){return new Ro(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=ha();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&ka(h.mutation,u,zt.empty(),Ae.now()),dd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:qV(i.bundledQuery),readTime:Ln(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.overlays=new Ve(Z.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ki();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=ki(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=ki(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ki(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return B.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gV(n,r));let s=this.qr.get(n);s===void 0&&(s=de(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.Qr=new Xe(nt.$r),this.Ur=new Xe(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Ee([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Ee([])),r=new nt(n,e),i=new nt(n,e+1);let s=de();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Wm:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ce);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new nt(new Z(s),0);let a=new Xe(ce);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),B.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.ri=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_t.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=sr();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||kD(ND(h),r)<=0||(i.has(h.key)||dd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nL(this)}getSize(e){return B.resolve(this.size)}}class nL extends JV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.persistence=e,this.si=new is(n=>Qm(n),Ym),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new ng,this.targetCount=0,this.ai=mo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new mo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.ui={},this.overlays={},this.ci=new od(0),this.li=!1,this.li=!0,this.hi=new jV,this.referenceDelegate=e(this),this.Pi=new rL(this),this.indexManager=new BV,this.remoteDocumentCache=function(i){return new tL(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new OV(n),this.Ii=new XV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new eL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new iL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class iL extends MD{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ng,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=Z.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nc{constructor(e,n){this.persistence=e,this.pi=new is(r=>LD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=KV(this,n)}static mi(e,n){return new Nc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Lu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ig(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Yk()?8:DD(Et())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new sL;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ds()<=ue.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ds()<=ue.DEBUG&&J("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ds()<=ue.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):B.resolve())}ys(e,n){if(Xv(n))return B.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lp(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,lp(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return Xv(n)||i.isEqual(re.min())?B.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?B.resolve(null):(ds()<=ue.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fs(n)),this.vs(e,o,n,PD(i,ja)).next(a=>a))})}Ds(e,n){let r=new Xe(t0(e));return n.forEach((i,s)=>{dd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ds()<=ue.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",fs(n)),this.ps.getDocumentsMatchingQuery(e,n,ni.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LocalStore",aL=3e8;class lL{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ve(ce),this.xs=new is(s=>Qm(s),Ym),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function uL(t,e,n,r){return new lL(t,e,n,r)}async function C0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function cL(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const p=u.batch,m=p.keys();let _=B.resolve();return m.forEach(R=>{_=_.next(()=>h.getEntry(l,R)).next(P=>{const x=u.docVersions.get(R);_e(x!==null,48541),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function A0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function dL(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(P,x,w){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=aL?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,h)&&a.push(n.Pi.updateTargetData(s,_))});let l=sr(),u=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(fL(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(re.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function fL(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=sr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(sg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function hL(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pL(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function hp(t,e,n){const r=ie(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ao(o))throw o;J(sg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function cT(t,e,n){const r=ie(t);let i=re.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const p=ie(l),m=p.xs.get(h);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)}(r,o,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:de())).next(a=>(mL(r,eV(e),a),{documents:a,Qs:s})))}function mL(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class dT{constructor(){this.activeTargetIds=oV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gL{constructor(){this.Mo=new dT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="ConnectivityMonitor";class hT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(fT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(fT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function pp(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="RestConnection",_L={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Sc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=pp(),a=this.zo(e,n.toUriEncodedString());J(Mf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=Eo(u);return this.Jo(e,a,l,r,h).then(p=>(J(Mf,`Received RPC '${e}' ${o}: `,p),p),p=>{throw uo(Mf,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=_L[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class EL extends vL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=pp();return new Promise((a,l)=>{const u=new PC;u.setWithCredentials(!0),u.listenOnce(NC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:const p=u.getResponseJson();J(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Vu.TIMEOUT:J(mt,`RPC '${e}' ${o} timed out`),l(new z(q.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const m=u.getStatus();if(J(mt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(T)>=0?T:q.UNKNOWN}(R.status);l(new z(P,R.message))}else l(new z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(q.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{J(mt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);J(mt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=pp(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MC(),a=xC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");J(mt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);this.I_(p);let m=!1,_=!1;const R=new TL({Yo:x=>{_?J(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(J(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),J(mt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Zo:()=>p.close()}),P=(x,w,T)=>{x.listen(w,C=>{try{T(C)}catch(V){setTimeout(()=>{throw V},0)}})};return P(p,fa.EventType.OPEN,()=>{_||(J(mt,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),P(p,fa.EventType.CLOSE,()=>{_||(_=!0,J(mt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),P(p,fa.EventType.ERROR,x=>{_||(_=!0,uo(mt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),R.a_(new z(q.UNAVAILABLE,"The operation could not be completed")))}),P(p,fa.EventType.MESSAGE,x=>{var w;if(!_){const T=x.data[0];_e(!!T,16349);const C=T,V=(C==null?void 0:C.error)||((w=C[0])==null?void 0:w.error);if(V){J(mt,`RPC '${e}' stream ${i} received error:`,V);const L=V.status;let b=function(I){const A=He[I];if(A!==void 0)return h0(A)}(L),S=V.message;b===void 0&&(b=q.INTERNAL,S="Unknown error status: "+L+" with message "+V.message),_=!0,R.a_(new z(b,S)),p.close()}else J(mt,`RPC '${e}' stream ${i} received:`,T),R.u_(T)}}),P(a,kC.STAT_EVENT,x=>{x.stat===tp.PROXY?J(mt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===tp.NOPROXY&&J(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){return new CV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="PersistentStream";class P0{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new z(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(pT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(pT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IL extends P0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=PV(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Ln(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=op(l)?{documents:xV(s,l)}:{query:MV(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=g0(s,o.resumeToken);const u=up(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=Pc(s,o.snapshotVersion.toTimestamp());const u=up(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=VV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fp(this.serializer),n.removeTarget=e,this.q_(n)}}class wL extends P0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kV(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{}class CL extends SL{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,cp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(q.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,cp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class AL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="RemoteStore";class RL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ss(this)&&(J(es,"Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.Ea.add(4),await Al(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gd(u)}(this))})}),this.Ra=new AL(r,i)}}async function gd(t){if(ss(t))for(const e of t.da)await e(!0)}async function Al(t){for(const e of t.da)await e(!1)}function N0(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ug(n)?lg(n):Po(n).O_()&&ag(n,e))}function og(t,e){const n=ie(t),r=Po(n);n.Ia.delete(e),r.O_()&&k0(n,e),n.Ia.size===0&&(r.O_()?r.L_():ss(n)&&n.Ra.set("Unknown"))}function ag(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(t).Y_(e)}function k0(t,e){t.Va.Ue(e),Po(t).Z_(e)}function lg(t){t.Va=new EV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Po(t).start(),t.Ra.ua()}function ug(t){return ss(t)&&!Po(t).x_()&&t.Ia.size>0}function ss(t){return ie(t).Ea.size===0}function x0(t){t.Va=void 0}async function PL(t){t.Ra.set("Online")}async function NL(t){t.Ia.forEach((e,n)=>{ag(t,e)})}async function kL(t,e){x0(t),ug(t)?(t.Ra.ha(e),lg(t)):t.Ra.set("Unknown")}async function xL(t,e,n){if(t.Ra.set("Online"),e instanceof m0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){J(es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kc(t,r)}else if(e instanceof bu?t.Va.Ze(e):e instanceof p0?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await A0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),k0(s,l);const p=new Fr(h.target,l,u,h.sequenceNumber);ag(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(es,"Failed to raise snapshot:",r),await kc(t,r)}}async function kc(t,e,n){if(!Ao(e))throw e;t.Ea.add(1),await Al(t),t.Ra.set("Offline"),n||(n=()=>A0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(es,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gd(t)})}function M0(t,e){return e().catch(n=>kc(t,n,e))}async function yd(t){const e=ie(t),n=oi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;ML(e);)try{const i=await hL(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,DL(e,i)}catch(i){await kc(e,i)}D0(e)&&V0(e)}function ML(t){return ss(t)&&t.Ta.length<10}function DL(t,e){t.Ta.push(e);const n=oi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function D0(t){return ss(t)&&!oi(t).x_()&&t.Ta.length>0}function V0(t){oi(t).start()}async function VL(t){oi(t).ra()}async function LL(t){const e=oi(t);for(const n of t.Ta)e.ea(n.mutations)}async function UL(t,e,n){const r=t.Ta.shift(),i=jm.from(r,e,n);await M0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yd(t)}async function FL(t,e){e&&oi(t).X_&&await async function(r,i){if(function(o){return _V(o)&&o!==q.ABORTED}(i.code)){const s=r.Ta.shift();oi(r).B_(),await M0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yd(r)}}(t,e),D0(t)&&V0(t)}async function mT(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),J(es,"RemoteStore received new credentials");const r=ss(n);n.Ea.add(3),await Al(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gd(n)}async function bL(t,e){const n=ie(t);e?(n.Ea.delete(2),await gd(n)):e||(n.Ea.add(2),await Al(n),n.Ra.set("Unknown"))}function Po(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new IL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:PL.bind(null,t),t_:NL.bind(null,t),r_:kL.bind(null,t),H_:xL.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ug(t)?lg(t):t.Ra.set("Unknown")):(await t.ma.stop(),x0(t))})),t.ma}function oi(t){return t.fa||(t.fa=function(n,r,i){const s=ie(n);return s.sa(),new wL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:VL.bind(null,t),r_:FL.bind(null,t),ta:LL.bind(null,t),na:UL.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await yd(t)):(await t.fa.stop(),t.Ta.length>0&&(J(es,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new cg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dg(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ao(t))return new z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{static emptySet(e){return new bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.ga=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class go{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new go(e,n,bs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class qL{constructor(){this.queries=yT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=yT(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new z(q.ABORTED,"Firestore shutting down"))}}function yT(){return new is(t=>e0(t),cd)}async function fg(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new OL,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=dg(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&pg(n)}async function hg(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BL(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&pg(n)}function GL(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function pg(t){t.Ca.forEach(e=>{e.next()})}var mp,_T;(_T=mp||(mp={})).Ma="default",_T.Cache="cache";class mg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.key=e}}class U0{constructor(e){this.key=e}}class HL{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=t0(e),this.tu=new bs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new gT,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=dd(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?R!==P&&(r.track({type:3,doc:_}),x=!0):this.su(m,_)||(r.track({type:2,doc:_}),x=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),x=!0):m&&!_&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(a=!0)),x&&(_?(o=o.add(_),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(_,R){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:x})}};return P(_)-P(R)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new go(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new U0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new L0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gg="SyncEngine";class $L{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zL{constructor(e){this.key=e,this.hu=!1}}class WL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new is(a=>e0(a),cd),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(Z.comparator),this.Au=new Map,this.Ru=new ng,this.Vu={},this.mu=new Map,this.fu=mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KL(t,e,n=!0){const r=G0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await F0(r,e,n,!0),i}async function JL(t,e){const n=G0(t);await F0(n,e,!0,!1)}async function F0(t,e,n,r){const i=await pL(t.localStore,Vn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await QL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&N0(t.remoteStore,i),a}async function QL(t,e,n,r,i){t.pu=(p,m,_)=>async function(P,x,w,T){let C=x.view.ru(w);C.Cs&&(C=await cT(P.localStore,x.query,!1).then(({documents:S})=>x.view.ru(S,C)));const V=T&&T.targetChanges.get(x.targetId),L=T&&T.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(C,P.isPrimaryClient,V,L);return TT(P,x.targetId,b.au),b.snapshot}(t,p,m,_);const s=await cT(t.localStore,e,!0),o=new HL(e,s.Qs),a=o.ru(s.documents),l=Cl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);TT(t,n,u.au);const h=new $L(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function YL(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!cd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&og(r.remoteStore,i.targetId),gp(r,i.targetId)}).catch(Co)):(gp(r,i.targetId),await hp(r.localStore,i.targetId,!0))}async function XL(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),og(n.remoteStore,r.targetId))}async function ZL(t,e,n){const r=s2(t);try{const i=await function(o,a){const l=ie(o),u=Ae.now(),h=a.reduce((_,R)=>_.add(R.key),de());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=sr(),P=de();return l.Ns.getEntries(_,h).next(x=>{R=x,R.forEach((w,T)=>{T.isValidDocument()||(P=P.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,R)).next(x=>{p=x;const w=[];for(const T of a){const C=hV(T,p.get(T.key).overlayedDocument);C!=null&&w.push(new hi(T.key,C,WC(C.value.mapValue),Bt.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,w,a)}).next(x=>{m=x;const w=x.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(_,x.batchId,w)})}).then(()=>({batchId:m.batchId,changes:r0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ve(ce)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Rl(r,i.changes),await yd(r.remoteStore)}catch(i){const s=dg(i,"Failed to persist write");n.reject(s)}}async function b0(t,e){const n=ie(t);try{const r=await dL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?_e(o.hu,14607):i.removedDocuments.size>0&&(_e(o.hu,42227),o.hu=!1))}),await Rl(n,r,e)}catch(r){await Co(r)}}function vT(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(a)&&(u=!0)}),u&&pg(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jL(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ve(Z.comparator);o=o.insert(s,_t.newNoDocument(s,re.min()));const a=de().add(s),l=new pd(re.min(),new Map,new Ve(ce),o,a);await b0(r,l),r.du=r.du.remove(s),r.Au.delete(e),yg(r)}else await hp(r.localStore,e,!1).then(()=>gp(r,e,n)).catch(Co)}async function e2(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await cL(n.localStore,e);q0(n,r,null),O0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,i)}catch(i){await Co(i)}}async function t2(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(_e(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);q0(r,e,n),O0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,i)}catch(i){await Co(i)}}function O0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function q0(t,e,n){const r=ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function gp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||B0(t,r)})}function B0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(og(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),yg(t))}function TT(t,e,n){for(const r of n)r instanceof L0?(t.Ru.addReference(r.key,e),n2(t,r)):r instanceof U0?(J(gg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||B0(t,r.key)):te(19791,{wu:r})}function n2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(gg,"New document in limbo: "+n),t.Eu.add(r),yg(t))}function yg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new zL(n)),t.du=t.du.insert(n,r),N0(t.remoteStore,new Fr(Vn(ud(n.path)),r,"TargetPurposeLimboResolution",od.ce))}}async function Rl(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=ig.As(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(u,m=>B.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>B.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Ao(p))throw p;J(sg,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),R=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,P)}}}(r.localStore,s))}async function r2(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){J(gg,"User change. New user:",e.toKey());const r=await C0(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new z(q.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.Ls)}}function i2(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let i=de();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function G0(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jL.bind(null,e),e.Pu.H_=BL.bind(null,e.eventManager),e.Pu.yu=GL.bind(null,e.eventManager),e}function s2(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t2.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uL(this.persistence,new oL,e.initialUser,this.serializer)}Cu(e){return new S0(rg.mi,this.serializer)}Du(e){return new gL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class o2 extends xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Nc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new S0(r=>Nc.mi(r,n),this.serializer)}}class yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r2.bind(null,this.syncEngine),await bL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qL}()}createDatastore(e){const n=md(e.databaseInfo.databaseId),r=function(s){return new EL(s)}(e.databaseInfo);return function(s,o,a,l){return new CL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new RL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vT(this.syncEngine,n,0),function(){return hT.v()?new hT:new yL}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const p=new WL(i,s,o,a,l,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);J(es,"RemoteStore shutting down."),s.Ea.add(5),await Al(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="FirestoreClient";class a2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J(ai,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(ai,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),J(ai,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await C0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ET(t,e){t.asyncQueue.verifyOperationInProgress();const n=await l2(t);J(ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mT(e.remoteStore,i)),t._onlineComponents=e}async function l2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(ai,"Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new xc)}}else J(ai,"Using default OfflineComponentProvider"),await Vf(t,new o2(void 0));return t._offlineComponents}async function H0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(ai,"Using user provided OnlineComponentProvider"),await ET(t,t._uninitializedComponentsProvider._online)):(J(ai,"Using default OnlineComponentProvider"),await ET(t,new yp))),t._onlineComponents}function u2(t){return H0(t).then(e=>e.syncEngine)}async function Mc(t){const e=await H0(t),n=e.eventManager;return n.onListen=KL.bind(null,e.syncEngine),n.onUnlisten=YL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XL.bind(null,e.syncEngine),n}function c2(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new _g({next:m=>{h.Nu(),o.enqueueAndForget(()=>hg(s,p));const _=m.docs.has(a);!_&&m.fromCache?u.reject(new z(q.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new z(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new mg(ud(a.path),h,{includeMetadataChanges:!0,qa:!0});return fg(s,p)}(await Mc(t),t.asyncQueue,e,n,r)),r.promise}function d2(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new _g({next:m=>{h.Nu(),o.enqueueAndForget(()=>hg(s,p)),m.fromCache&&l.source==="server"?u.reject(new z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new mg(a,h,{includeMetadataChanges:!0,qa:!0});return fg(s,p)}(await Mc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firestore.googleapis.com",wT=!0;class ST{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z0,this.ssl=wT}else this.host=e.host,this.ssl=e.ssl??wT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HV)throw new z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ST({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ST(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yD;switch(r.type){case"firstParty":return new ED(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IT.get(n);r&&(J("ComponentProvider","Removing Datastore"),IT.delete(n),r.terminate())}(this),Promise.resolve()}}function f2(t,e,n,r={}){var u;t=qt(t,_d);const i=Eo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(HS(`https://${a}`),$S("Firestore",!0)),s.host!==z0&&s.host!==a&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!ti(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=gt.MOCK_USER;else{h=Bk(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gt(m)}t._authCredentials=new _D(new VC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new be(this.firestore,e,this._key)}toJSON(){return{type:be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wl(n,be._jsonSchema))return new be(e,r||null,new Z(Ee.fromString(n.referencePath)))}}be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:We("string",be._jsonSchemaVersion),referencePath:We("string")};class Zr extends pi{constructor(e,n,r){super(e,n,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new be(this.firestore,null,new Z(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function h2(t,e,...n){if(t=Ke(t),LC("collection","path",e),t instanceof _d){const r=Ee.fromString(e,...n);return Fv(r),new Zr(t,null,r)}{if(!(t instanceof be||t instanceof Zr))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Fv(r),new Zr(t.firestore,null,r)}}function vd(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=zm.newId()),LC("doc","path",e),t instanceof _d){const r=Ee.fromString(e,...n);return Uv(r),new be(t,null,new Z(r))}{if(!(t instanceof be||t instanceof Zr))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Uv(r),new be(t.firestore,t instanceof Zr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="AsyncQueue";class AT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R0(this,"async_queue_retry"),this._c=()=>{const r=Df();r&&J(CT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ao(e))throw e;J(CT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",RT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=cg.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:RT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function RT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends _d{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new AT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AT(e),this._firestoreClient=void 0,await e}}}function p2(t,e){const n=typeof t=="object"?t:JS(),r=typeof t=="string"?t:Sc,i=Dm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ok("firestore");s&&f2(i,...s)}return i}function Pl(t){if(t._terminated)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||m2(t),t._firestoreClient}function m2(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new bD(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$0(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new a2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(dt.fromBase64String(e))}catch(n){throw new z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new en(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:en._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,en._jsonSchema))return en.fromBase64String(e.bytes)}}en._jsonSchemaVersion="firestore/bytes/1.0",en._jsonSchema={type:We("string",en._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(e){if(wl(e,Un._jsonSchema))return new Un(e.latitude,e.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:We("string",Un._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fn(e.vectorValues);throw new z(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:We("string",Fn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=/^__.*__$/;class y2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sl(e,this.data,n,this.fieldTransforms)}}class W0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class Td{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Td({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(K0(this.Ac)&&g2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||md(e)}Cc(e,n,r,i=!1){return new Td({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(t){const e=t._freezeSettings(),n=md(t._databaseId);return new _2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vg(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Ig("Data must be an object, but it was:",o,r);const a=Y0(r,o);let l,u;if(s.merge)l=new zt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=_p(e,p,n);if(!o.contains(m))throw new z(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Z0(h,m)||h.push(m)}l=new zt(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new y2(new Lt(a),l,u)}class Ed extends kl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ed}}function v2(t,e,n){return new Td({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tg extends kl{_toFieldTransform(e){return new c0(e.path,new il)}isEqual(e){return e instanceof Tg}}class Eg extends kl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=v2(this,e,!0),r=this.vc.map(s=>No(s,n)),i=new po(r);return new c0(e.path,i)}isEqual(e){return e instanceof Eg&&ti(this.vc,e.vc)}}function J0(t,e,n,r){const i=t.Cc(1,e,n);Ig("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();fi(r,(l,u)=>{const h=wg(e,l,n);u=Ke(u);const p=i.yc(h);if(u instanceof Ed)s.push(h);else{const m=No(u,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new zt(s);return new W0(o,a,i.fieldTransforms)}function Q0(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[_p(e,r,n)],l=[i];if(s.length%2!=0)throw new z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(_p(e,s[m])),l.push(s[m+1]);const u=[],h=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!Z0(u,a[m])){const _=a[m];let R=l[m];R=Ke(R);const P=o.yc(_);if(R instanceof Ed)u.push(_);else{const x=No(R,P);x!=null&&(u.push(_),h.set(_,x))}}const p=new zt(u);return new W0(h,p,o.fieldTransforms)}function T2(t,e,n,r=!1){return No(n,t.Cc(r?4:3,e))}function No(t,e){if(X0(t=Ke(t)))return Ig("Unsupported field value:",e,t),Y0(t,e);if(t instanceof kl)return function(r,i){if(!K0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=No(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Un)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof en)return{bytesValue:g0(i.serializer,r._byteString)};if(r instanceof be){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fn)return function(o,a){return{mapValue:{fields:{[$C]:{stringValue:zC},[Cc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Xm(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${sd(r)}`)}(t,e)}function Y0(t,e){const n={};return bC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(r,i)=>{const s=No(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function X0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Un||t instanceof en||t instanceof be||t instanceof kl||t instanceof Fn)}function Ig(t,e,n){if(!X0(n)||!UC(n)){const r=sd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _p(t,e,n){if((e=Ke(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return wg(t,e);throw Dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const E2=new RegExp("[~\\*/\\[\\]]");function wg(t,e,n){if(e.search(E2)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nl(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(q.INVALID_ARGUMENT,a+t+l)}function Z0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Id("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I2 extends j0{data(){return super.data()}}function Id(t,e){return typeof e=="string"?wg(t,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class tA extends Sg{}function w2(t,e,...n){let r=[];e instanceof Sg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof ko).length,a=s.filter(l=>l instanceof Ml).length;if(o>1||o>0&&a>0)throw new z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ml extends tA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ml(e,n,r)}_apply(e){const n=this._parse(e);return nA(e._query,n),new pi(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=xl(e.firestore);return function(s,o,a,l,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xT(p,h);const R=[];for(const P of p)R.push(kT(l,s,P));m={arrayValue:{values:R}}}else m=kT(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xT(p,h),m=T2(a,o,p,h==="in"||h==="not-in");return ze.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function NT(t,e,n){const r=e,i=Id("where",t);return Ml._create(i,r,n)}class ko extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ko(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)nA(o,l),o=ap(o,l)}(e._query,n),new pi(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Z3(...t){return t.forEach(e=>rA("or",e)),ko._create("or",t)}function j3(...t){return t.forEach(e=>rA("and",e)),ko._create("and",t)}class Cg extends tA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new z(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rl(s,o)}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ro(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function e6(t,e="asc"){const n=e,r=Id("orderBy",t);return Cg._create(r,n)}function kT(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jC(e)&&n.indexOf("/")!==-1)throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!Z.isDocumentKey(r))throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zv(t,new Z(r))}if(n instanceof be)return zv(t,n._key);throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(n)}.`)}function xT(t,e){if(!Array.isArray(t)||t.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function rA(t,e){if(!(e instanceof Ml||e instanceof ko))throw new z(q.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class S2{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Cc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Oe(o.doubleValue));return new Fn(n)}convertGeoPoint(e){return new Un(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ld(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const n=ri(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);_e(I0(r),9688,{name:e});const i=new tl(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||ir(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hi extends j0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Id("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:We("string",Hi._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Ou extends Hi{data(e={}){return super.data(e)}}class $i{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ma(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ou(this._firestore,this._userDataWriter,r.key,r,new ma(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ou(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ma(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ou(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ma(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:C2(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$i._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t){t=qt(t,be);const e=qt(t.firestore,or);return c2(Pl(e),t._key).then(n=>iA(e,t,n))}$i._jsonSchemaVersion="firestore/querySnapshot/1.0",$i._jsonSchema={type:We("string",$i._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class Rg extends S2{constructor(e){super(),this.firestore=e}convertBytes(e){return new en(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,n)}}function A2(t){t=qt(t,pi);const e=qt(t.firestore,or),n=Pl(e),r=new Rg(e);return eA(t._query),d2(n,t._query).then(i=>new $i(e,r,t,i))}function R2(t,e,n){t=qt(t,be);const r=qt(t.firestore,or),i=Ag(t.converter,e,n);return wd(r,[vg(xl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Bt.none())])}function P2(t,e,n,...r){t=qt(t,be);const i=qt(t.firestore,or),s=xl(i);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Nl?Q0(s,"updateDoc",t._key,e,n,r):J0(s,"updateDoc",t._key,e),wd(i,[o.toMutation(t._key,Bt.exists(!0))])}function n6(t,e){const n=qt(t.firestore,or),r=vd(t),i=Ag(t.converter,e);return wd(n,[vg(xl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Bt.exists(!1))]).then(()=>r)}function r6(t,...e){var l,u,h;t=Ke(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||PT(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(PT(e[r])){const p=e[r];e[r]=(l=p.next)==null?void 0:l.bind(p),e[r+1]=(u=p.error)==null?void 0:u.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let s,o,a;if(t instanceof be)o=qt(t.firestore,or),a=ud(t._key.path),s={next:p=>{e[r]&&e[r](iA(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=qt(t,pi);o=qt(p.firestore,or),a=p._query;const m=new Rg(o);s={next:_=>{e[r]&&e[r](new $i(o,m,p,_))},error:e[r+1],complete:e[r+2]},eA(t._query)}return function(m,_,R,P){const x=new _g(P),w=new mg(_,x,R);return m.asyncQueue.enqueueAndForget(async()=>fg(await Mc(m),w)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>hg(await Mc(m),w))}}(Pl(o),a,i,s)}function wd(t,e){return function(r,i){const s=new Xn;return r.asyncQueue.enqueueAndForget(async()=>ZL(await u2(r),i,s)),s.promise}(Pl(t),e)}function iA(t,e,n){const r=n.docs.get(e._key),i=new Rg(t);return new Hi(t,i,e._key,r,new ma(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,n,r){this._verifyNotCommitted();const i=Lf(e,this._firestore),s=Ag(i.converter,n,r),o=vg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Bt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Lf(e,this._firestore);let o;return o=typeof(n=Ke(n))=="string"||n instanceof Nl?Q0(this._dataReader,"WriteBatch.update",s._key,n,r,i):J0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Lf(e,this._firestore);return this._mutations=this._mutations.concat(new Zm(n._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lf(t,e){if((t=Ke(t)).firestore!==e)throw new z(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function i6(){return new Tg("serverTimestamp")}function k2(...t){return new Eg("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){return Pl(t=qt(t,or)),new N2(t,e=>wd(t,e))}(function(e,n=!0){(function(i){So=i})(Io),ao(new Xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new or(new vD(r.getProvider("auth-internal")),new ID(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Yr(Mv,Dv,e),Yr(Mv,Dv,"esm2020")})();const vp={apiKey:"AIzaSyCH4tFEAWz58YI7_m1UszWahRfU4hYs9Yg",authDomain:"suhufapp-deb24.firebaseapp.com",databaseURL:"https://suhufapp-deb24-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"suhufapp-deb24",storageBucket:"suhufapp-deb24.firebasestorage.app",messagingSenderId:"293441864745",appId:"1:293441864745:web:e2ecdf71b94e60d7090838",measurementId:"G-FY9LKR682G"},sA=!!vp.apiKey&&!vp.apiKey.includes("PASTE_YOUR");let oA=null;if(sA)try{const t=KS(vp),e=hD(t),n=p2(t);oA={app:t,auth:e,db:n}}catch(t){console.error("Firebase initialization failed:",t)}else console.warn("Firebase is not configured. Login and commenting features will be disabled. Please check your src/config.ts file.");const aA=()=>oA,Uf=aA(),yo=Uf==null?void 0:Uf.auth,M2=async()=>{if(!yo){const e="Firebase Auth is not available; login unavailable.";throw console.warn(e),new Error(e)}const t=new zn;try{await IM(yo,t)}catch(e){throw console.error("Error during sign-in:",e),e}},D2=async()=>{if(!yo){console.warn("Firebase Auth is not available; logout unavailable.");return}try{await nM(yo)}catch(t){console.error("Error during sign-out:",t)}},V2=t=>yo?tM(yo,e=>{if(e){const{uid:n,displayName:r,email:i,photoURL:s}=e;t({uid:n,displayName:r,email:i,photoURL:s})}else t(null)}):(t(null),()=>{}),Tp={login:M2,logout:D2,onAuthChange:V2,isConfigured:sA},Ff=aA(),Vc=Ff==null?void 0:Ff.db,li=Vc?h2(Vc,"articles"):null,L2=async(t,e)=>{if(!li){console.warn("Firestore is disabled; comment not saved.");return}const n=vd(li,t);try{await P2(n,{comments:k2(e)})}catch(r){console.error("Error adding comment to Firestore:",r)}},U2=async(t,e)=>{if(!li)return null;try{const n=new Date(`${t}T00:00:00.000Z`),r=new Date(`${t}T23:59:59.999Z`),i=w2(li,NT("date",">=",n.toISOString()),NT("date","<=",r.toISOString())),s=await A2(i);if(s.empty)return console.log(`Cache miss for ${t} (${e})`),null;const o=s.docs.map(a=>a.data());return console.log(`Cache hit for ${t} (${e})`),o.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(n){return console.error("Error fetching day from Firestore:",n),null}},F2=async t=>{if(!Vc||!li||t.length===0)return;const e=x2(Vc);t.forEach(n=>{const r=vd(li,n.id);e.set(r,n,{merge:!0})});try{await e.commit(),console.log(`Synced batch of ${t.length} articles to Firestore.`)}catch(n){console.error("Error syncing article batch:",n)}},b2=async t=>{if(li)try{const e=vd(li,t.id);await R2(e,t,{merge:!0}),console.log(`Synced article ${t.id} to Firestore.`)}catch(e){console.error(`Error syncing article ${t.id}:`,e)}},ol={addCommentToArticle:L2,getArticlesForDay:U2,syncArticle:b2,syncArticlesBatch:F2},MT=t=>{let e;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(_=>_(e,m))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,i,a);return a},O2=t=>t?MT(t):MT,q2=t=>t;function B2(t,e=q2){const n=ms.useSyncExternalStore(t.subscribe,ms.useCallback(()=>e(t.getState()),[t,e]),ms.useCallback(()=>e(t.getInitialState()),[t,e]));return ms.useDebugValue(n),n}const DT=t=>{const e=O2(t),n=r=>B2(e,r);return Object.assign(n,e),n},G2=t=>t?DT(t):DT,qu="suhf-articles-cache",ia=t=>[...t].sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()),yu=t=>{try{const e=t.filter(n=>n.body);e.length>0&&localStorage.setItem(qu,JSON.stringify(e))}catch(e){console.error("Failed to save articles to local storage",e)}},br=G2(t=>({language:"ar",appStatus:"initializing",errorMessage:null,loadingMessage:{title:"",subtitle:""},articles:[],user:null,isNewEditionAvailable:!1,initialTodayHeadlines:[],activeTopic:"all",hydrateFromLocalStorage:()=>{try{const e=localStorage.getItem(qu);if(e){const n=JSON.parse(e);Array.isArray(n)&&t({articles:ia(n)})}}catch(e){console.error("Failed to load or parse articles from local storage",e),localStorage.removeItem(qu)}},setLanguage:e=>{localStorage.removeItem(qu),t({language:e,articles:[],initialTodayHeadlines:[],isNewEditionAvailable:!1,appStatus:"initializing",activeTopic:"all"})},setAppStatus:(e,n=null)=>t({appStatus:e,errorMessage:n}),setLoadingMessage:(e,n)=>t({loadingMessage:{title:e,subtitle:n}}),setArticles:e=>{const n=ia(e);yu(n),t({articles:n})},addArticles:e=>t(n=>{const r=ia([...n.articles,...e]);return yu(r),{articles:r}}),updateArticle:e=>t(n=>{const r=new Map(n.articles.map(s=>[s.id,s]));r.set(e.id,e);const i=ia(Array.from(r.values()));return yu(i),{articles:i}}),updateMultipleArticles:e=>t(n=>{const r=new Map(n.articles.map(o=>[o.id,o]));let i=!1;if(e.forEach(o=>{const a=r.get(o.id),l={...a||{},...o};(!a||JSON.stringify(a)!==JSON.stringify(l))&&(r.set(o.id,l),i=!0)}),!i)return n;const s=ia(Array.from(r.values()));return yu(s),{articles:s}}),setUser:e=>t({user:e}),setIsNewEditionAvailable:e=>t({isNewEditionAvailable:e}),setInitialTodayHeadlines:e=>t({initialTodayHeadlines:e}),setActiveTopic:e=>t(n=>n.activeTopic!==e?{activeTopic:e,articles:[]}:{activeTopic:e})})),H2=()=>{const t=br(e=>e.setUser);oe.useEffect(()=>{const e=Tp.onAuthChange(t);return()=>e()},[t])};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $2,z2;function W2(){return{geminiUrl:$2,vertexUrl:z2}}function K2(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=W2();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class os{}function Y(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const h=l[u];f(h,e.slice(s+1),n[u])}else for(const u of l)f(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function J2(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}Ep(t,i,s,0,o)}}function Ep(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])Ep(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,h]of Object.entries(l)){const p=[];for(const m of n.slice(r))m==="*"?p.push(u):p.push(m);f(o,p,h)}for(const u of a)delete o[u]}}else{const o=t;s in o&&Ep(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function Y2(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],Z2(o)),e}function X2(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response"]);return o!=null&&f(e,["response"],j2(o)),e}function Z2(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>eU(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function j2(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>tU(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function eU(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],iU(n)),e}function tU(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],sU(n)),e}function nU(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function rU(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function iU(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],Pg(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function sU(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],Pg(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VT||(VT={}));var LT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(LT||(LT={}));var qe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qe||(qe={}));var UT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(UT||(UT={}));var FT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(FT||(FT={}));var bT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bT||(bT={}));var OT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(OT||(OT={}));var qT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qT||(qT={}));var BT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(BT||(BT={}));var GT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(GT||(GT={}));var HT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(HT||(HT={}));var $T;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})($T||($T={}));var zT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zT||(zT={}));var WT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(WT||(WT={}));var KT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(KT||(KT={}));var Lc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Lc||(Lc={}));var JT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(JT||(JT={}));var Ip;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ip||(Ip={}));var QT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(QT||(QT={}));var YT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(YT||(YT={}));var XT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(XT||(XT={}));var ZT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ZT||(ZT={}));var jT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(jT||(jT={}));var eE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tE||(tE={}));var nE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(nE||(nE={}));var rE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(rE||(rE={}));var iE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(iE||(iE={}));var sE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sE||(sE={}));var oE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(oE||(oE={}));var aE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var lE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lE||(lE={}));var uE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uE||(uE={}));var cE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(cE||(cE={}));var dE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(dE||(dE={}));var fE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(fE||(fE={}));var hE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hE||(hE={}));var pE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(pE||(pE={}));var mE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(mE||(mE={}));var gE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(gE||(gE={}));var yE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(yE||(yE={}));var _E;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_E||(_E={}));var vE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vE||(vE={}));var TE;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(TE||(TE={}));var EE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(EE||(EE={}));var IE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(IE||(IE={}));var wE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wE||(wE={}));var SE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(SE||(SE={}));var Ps;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ps||(Ps={}));class wp{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class sa{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const p=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[_,R]of Object.entries(m))_!=="text"&&_!=="thought"&&(R!==null||R!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class CE{}class AE{}class oU{}class aU{}class lU{}class uU{}class RE{}class PE{}class NE{}class cU{}class Uc{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Uc;let i;const s=e;return n?i=X2(s):i=Y2(s),Object.assign(r,i),r}}class kE{}class xE{}class ME{}class dU{}class fU{}class hU{}class DE{}class pU{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class mU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ge(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function lA(t,e){const n=ge(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function uA(t){return Array.isArray(t)?t.map(e=>Fc(e)):[Fc(t)]}function Fc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function cA(t){const e=Fc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dA(t){const e=Fc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fA(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>VE(e)):[VE(t)]}function Sp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function LE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function UE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return Sp(t)?t:{role:"user",parts:fA(t)}}function Ng(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=vt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=vt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vt(n)):[vt(e)]}function rn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(LE(t)||UE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}const e=[],n=[],r=Sp(t[0]);for(const i of t){const s=Sp(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(LE(i)||UE(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:fA(n)}),e}function gU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(qe).includes(n[0].toUpperCase())?n[0].toUpperCase():qe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(qe).includes(r.toUpperCase())?r.toUpperCase():qe.TYPE_UNSPECIFIED})}}function Os(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&gU(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(qe).includes(a.toUpperCase())?a.toUpperCase():qe.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Os(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Os(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,h]of Object.entries(a))l[u]=Os(h);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function kg(t){return Os(t)}function xg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function xo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Os(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Os(e.response));return t}function Mo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function yU(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function ur(t,e){if(typeof e!="string")throw new Error("name must be a string");return yU(t,e,"cachedContents")}function hA(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mi(t){return Pg(t)}function _U(t){return t!=null&&typeof t=="object"&&"name"in t}function vU(t){return t!=null&&typeof t=="object"&&"video"in t}function TU(t){return t!=null&&typeof t=="object"&&"uri"in t}function pA(t){var e;let n;if(_U(t)&&(n=t.name),!(TU(t)&&(n=t.uri,n===void 0))&&!(vU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function mA(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function gA(t){for(const e of["models","tunedModels","publisherModels"])if(EU(t,e))return t[e];return[]}function EU(t,e){return t!==null&&typeof t=="object"&&e in t}function IU(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function wU(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=IU(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function yA(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function SU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _A(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Do(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vA(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CU(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>nF(o))),f(e,["inlinedResponses"],s)}const i=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["inlinedEmbedContentResponses"],s)}return e}function AU(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function RU(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bu(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["metadata","state"]);i!=null&&f(e,["state"],vA(i));const s=c(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&f(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&f(e,["dest"],CU(_A(u))),e}function Cp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],vA(i));const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&f(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["model"]);h!=null&&f(e,["model"],h);const p=c(t,["inputConfig"]);p!=null&&f(e,["src"],PU(p));const m=c(t,["outputConfig"]);return m!=null&&f(e,["dest"],AU(_A(m))),e}function PU(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function NU(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>tF(t,o))),f(n,["requests","requests"],s)}return n}function kU(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function xU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function MU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function DU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function VU(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],LU(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=c(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}return e}function LU(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function TA(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>uF(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function UU(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function FU(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],RU(SU(i))),n}function FE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],NU(t,yA(t,i)));const s=c(e,["config"]);return s!=null&&UU(s,n),n}function bU(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["inputConfig"],kU(yA(t,i)));const s=c(e,["config"]);return s!=null&&FU(s,n),n}function OU(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function qU(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],KU(t,i));const s=c(e,["config"]);return s!=null&&OU(s,n),n}function BU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function GU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function HU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);return s!=null&&f(e,["error"],s),e}function $U(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);return s!=null&&f(e,["error"],s),e}function zU(t,e){const n={},r=c(e,["contents"]);if(r!=null){let s=Ng(t,r);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["requests[]","request","content"],s)}const i=c(e,["config"]);return i!=null&&(f(n,["_self"],WU(i,n)),J2(n,{"requests[].*":"requests[].request.*"})),n}function WU(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function KU(t,e){const n={},r=c(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],zU(t,i)),n}function JU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function QU(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],TA(vt(i)));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],kg(w));const T=c(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(N=>cF(N))),f(n,["safetySettings"],M)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let M=Mo(V);Array.isArray(M)&&(M=M.map(N=>dF(xo(N)))),f(n,["tools"],M)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],ur(t,b));const S=c(e,["responseModalities"]);S!=null&&f(r,["responseModalities"],S);const v=c(e,["mediaResolution"]);v!=null&&f(r,["mediaResolution"],v);const I=c(e,["speechConfig"]);if(I!=null&&f(r,["speechConfig"],xg(I)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=c(e,["thinkingConfig"]);A!=null&&f(r,["thinkingConfig"],A);const k=c(e,["imageConfig"]);return k!=null&&f(r,["imageConfig"],k),r}function YU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>VU(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function XU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function ZU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],Do(t,r)),n}function jU(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function eF(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function tF(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["request","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let a=rn(i);Array.isArray(a)&&(a=a.map(l=>TA(l))),f(n,["request","contents"],a)}const s=c(e,["metadata"]);s!=null&&f(n,["metadata"],s);const o=c(e,["config"]);return o!=null&&f(n,["request","generationConfig"],QU(t,o,c(n,["request"],{}))),n}function nF(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],YU(n));const r=c(t,["error"]);return r!=null&&f(e,["error"],r),e}function rF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function iF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function sF(t){const e={},n=c(t,["config"]);return n!=null&&rF(n,e),e}function oF(t){const e={},n=c(t,["config"]);return n!=null&&iF(n,e),e}function aF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Bu(o))),f(e,["batchJobs"],s)}return e}function lF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Cp(o))),f(e,["batchJobs"],s)}return e}function uF(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],xU(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],JU(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function cF(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function dF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],eF(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],jU(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ts;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ts||(ts={}));class Dl{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fF extends os{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Dl(ts.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=FE(this.apiClient,e),r=n._url,i=Y("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=bU(this.apiClient,e);return a=Y("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Cp(h))}else{const u=FE(this.apiClient,e);return a=Y("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Bu(h))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qU(this.apiClient,e);return s=Y("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Bu(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ZU(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Cp(h))}else{const u=XU(this.apiClient,e);return a=Y("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Bu(h))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=DU(this.apiClient,e);o=Y("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=MU(this.apiClient,e);o=Y("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=oF(e);return a=Y("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=lF(h),m=new DE;return Object.assign(m,p),m})}else{const u=sF(e);return a=Y("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=aF(h),m=new DE;return Object.assign(m,p),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=GU(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>$U(h))}else{const u=BU(this.apiClient,e);return a=Y("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>HU(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bE(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>VF(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function pF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let h=rn(o);Array.isArray(h)&&(h=h.map(p=>bE(p))),f(e,["contents"],h)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],bE(vt(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>LF(p))),f(e,["tools"],h)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&f(e,["toolConfig"],u),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function mF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let p=rn(o);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],vt(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>UF(m))),f(e,["tools"],p)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&f(e,["toolConfig"],u);const h=c(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function gF(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],lA(t,r));const i=c(e,["config"]);return i!=null&&pF(i,n),n}function yF(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],lA(t,r));const i=c(e,["config"]);return i!=null&&mF(i,n),n}function _F(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ur(t,r)),n}function vF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ur(t,r)),n}function TF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function EF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function IF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wF(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function SF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ur(t,r)),n}function CF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ur(t,r)),n}function AF(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function RF(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function PF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function NF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function kF(t){const e={},n=c(t,["config"]);return n!=null&&PF(n,e),e}function xF(t){const e={},n=c(t,["config"]);return n!=null&&NF(n,e),e}function MF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function DF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function VF(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],hF(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],IF(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function LF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],RF(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],AF(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function UF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>wF(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function FF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function bF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function OF(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],ur(t,r));const i=c(e,["config"]);return i!=null&&FF(i,n),n}function qF(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],ur(t,r));const i=c(e,["config"]);return i!=null&&bF(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BF extends os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Dl(ts.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=yF(this.apiClient,e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=gF(this.apiClient,e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=CF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=SF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=EF(h),m=new xE;return Object.assign(m,p),m})}else{const u=_F(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=TF(h),m=new xE;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=qF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=OF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=xF(e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=DF(h),m=new ME;return Object.assign(m,p),m})}else{const u=kF(e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=MF(h),m=new ME;return Object.assign(m,p),m})}}}function OE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function qs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(R){return Promise.resolve(R).then(_,p)}}function a(_,R){r[_]&&(i[_]=function(P){return new Promise(function(x,w){s.push([_,P,x,w])>1||l(_,P)})},R&&(i[_]=R(i[_])))}function l(_,R){try{u(r[_](R))}catch(P){m(s[0][3],P)}}function u(_){_.value instanceof Ce?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){l("next",_)}function p(_){l("throw",_)}function m(_,R){_(R),s.shift(),s.length&&l(s[0][0],s[0][1])}}function xa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OE=="function"?OE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GF(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:EA(n)}function EA(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function HF(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!EA(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class $F{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new zF(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zF{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),HF(s)}async sendMessage(e){var n;await this.sendPromise;const r=vt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const _=u?[u]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=vt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?qE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return qs(this,arguments,function*(){var o,a,l,u;const h=[];try{for(var p=!0,m=xa(e),_;_=yield Ce(m.next()),o=_.done,!o;p=!0){u=_.value,p=!1;const R=u;if(GF(R)){const P=(i=(r=R.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&h.push(P)}yield yield Ce(R)}}catch(R){a={error:R}}finally{try{!p&&!o&&(l=m.return)&&(yield Ce(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...qE(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WF(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function KF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function JF(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],pA(n)),e}function QF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function YF(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],pA(n)),e}function XF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function ZF(t){const e={},n=c(t,["config"]);return n!=null&&XF(n,e),e}function jF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eb extends os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Dl(ts.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZF(e);return s=Y("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=jF(l),h=new dU;return Object.assign(h,u),h})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WF(e);return s=Y("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=KF(l),h=new fU;return Object.assign(h,u),h})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YF(e);return s=Y("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JF(e);return s=Y("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=QF(l),h=new hU;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gu(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tb(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>gb(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function nb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rb(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function ib(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const i=c(t,["candidateCount"]);i!=null&&f(e,["candidateCount"],i);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=c(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const R=c(t,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const w=c(t,["seed"]);w!=null&&f(e,["seed"],w);const T=c(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],IA(T));const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const V=c(t,["temperature"]);V!=null&&f(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const b=c(t,["topK"]);b!=null&&f(e,["topK"],b);const S=c(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function sb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function ob(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ab(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Mg(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],tb(vt(R)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=Mo(P);Array.isArray(b)&&(b=b.map(S=>_b(xo(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],yb(x));const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function lb(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],ib(r));const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],IA(Mg(p)));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],vt(R));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=Mo(P);Array.isArray(b)&&(b=b.map(S=>vb(xo(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function ub(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],ab(i,n)),n}function cb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],lb(i,n)),n}function db(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function fb(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function hb(t){const e={},n=c(t,["media"]);if(n!=null){let u=uA(n);Array.isArray(u)&&(u=u.map(h=>Gu(h))),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],Gu(dA(r)));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&f(e,["video"],Gu(cA(s)));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function pb(t){const e={},n=c(t,["media"]);if(n!=null){let u=uA(n);Array.isArray(u)&&(u=u.map(h=>h)),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],dA(r));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&f(e,["video"],cA(s));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function mb(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=c(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const s=c(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);const o=c(t,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],Tb(o));const a=c(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],l),e}function gb(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],Gu(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],nb(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function yb(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function IA(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function _b(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],ob(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],sb(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function vb(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>rb(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function Tb(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=c(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);const o=c(t,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["promptTokensDetails"],_)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["cacheTokensDetails"],_)}const h=c(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["responseTokensDetails"],_)}const p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["toolUsePromptTokensDetails"],_)}const m=c(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ib(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],wb(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=c(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}return e}function wb(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function Sb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let s=rn(i);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["contents"],s)}return n}function Cb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["tokensInfo"],i)}return e}function Ab(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&f(e,["statistics"],Rb(r)),e}function Rb(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function Cd(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>MO(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function Pb(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function Nb(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kb(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],vt(r));const i=c(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>RA(a))),f(e,["tools"],o)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],vO(s)),n}function xb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=rn(i);Array.isArray(o)&&(o=o.map(a=>Cd(a))),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&Nb(s),n}function Mb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=rn(i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&kb(s,n),n}function Db(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=c(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function Vb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function Lb(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function Ub(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function Fb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function bb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Ob(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const R=c(t,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const w=c(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const T=c(t,["editMode"]);e!==void 0&&T!=null&&f(e,["parameters","editMode"],T);const C=c(t,["baseSteps"]);return e!==void 0&&C!=null&&f(e,["parameters","editConfig","baseSteps"],C),n}function qb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>bO(l))),f(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&Ob(o,n),n}function Bb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ad(s))),f(e,["generatedImages"],i)}return e}function Gb(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Hb(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function $b(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let a=Ng(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const s=c(e,["config"]);s!=null&&Gb(s,n);const o=c(e,["model"]);return o!==void 0&&f(n,["requests[]","model"],ge(t,o)),n}function zb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=Ng(t,i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["instances[]","content"],o)}const s=c(e,["config"]);return s!=null&&Hb(s,n),n}function Wb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function Kb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Ab(o))),f(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function Jb(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function Qb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Yb(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function Xb(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],Cd(vt(i)));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],kg(w));const T=c(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(N=>OO(N))),f(n,["safetySettings"],M)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let M=Mo(V);Array.isArray(M)&&(M=M.map(N=>zO(xo(N)))),f(n,["tools"],M)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],ur(t,b));const S=c(e,["responseModalities"]);S!=null&&f(r,["responseModalities"],S);const v=c(e,["mediaResolution"]);v!=null&&f(r,["mediaResolution"],v);const I=c(e,["speechConfig"]);if(I!=null&&f(r,["speechConfig"],xg(I)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=c(e,["thinkingConfig"]);A!=null&&f(r,["thinkingConfig"],A);const k=c(e,["imageConfig"]);return k!=null&&f(r,["imageConfig"],k),r}function Zb(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],vt(i));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],kg(w));const T=c(e,["responseJsonSchema"]);T!=null&&f(r,["responseJsonSchema"],T);const C=c(e,["routingConfig"]);C!=null&&f(r,["routingConfig"],C);const V=c(e,["modelSelectionConfig"]);V!=null&&f(r,["modelConfig"],V);const L=c(e,["safetySettings"]);if(n!==void 0&&L!=null){let Ze=L;Array.isArray(Ze)&&(Ze=Ze.map(ae=>ae)),f(n,["safetySettings"],Ze)}const b=c(e,["tools"]);if(n!==void 0&&b!=null){let Ze=Mo(b);Array.isArray(Ze)&&(Ze=Ze.map(ae=>RA(xo(ae)))),f(n,["tools"],Ze)}const S=c(e,["toolConfig"]);n!==void 0&&S!=null&&f(n,["toolConfig"],S);const v=c(e,["labels"]);n!==void 0&&v!=null&&f(n,["labels"],v);const I=c(e,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ur(t,I));const A=c(e,["responseModalities"]);A!=null&&f(r,["responseModalities"],A);const k=c(e,["mediaResolution"]);k!=null&&f(r,["mediaResolution"],k);const M=c(e,["speechConfig"]);M!=null&&f(r,["speechConfig"],AA(xg(M)));const N=c(e,["audioTimestamp"]);N!=null&&f(r,["audioTimestamp"],N);const Pe=c(e,["thinkingConfig"]);Pe!=null&&f(r,["thinkingConfig"],Pe);const It=c(e,["imageConfig"]);return It!=null&&f(r,["imageConfig"],It),r}function BE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=rn(i);Array.isArray(o)&&(o=o.map(a=>Cd(a))),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&f(n,["generationConfig"],Xb(t,s,n)),n}function GE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=rn(i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&f(n,["generationConfig"],Zb(t,s,n)),n}function HE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Ib(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function $E(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["candidates"],u)}const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=c(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function jb(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const h=c(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=c(t,["imageSize"]);if(e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function eO(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const R=c(t,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const w=c(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const T=c(t,["imageSize"]);e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T);const C=c(t,["enhancePrompt"]);return e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C),n}function tO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&jb(s,n),n}function nO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&eO(s,n),n}function rO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>mO(o))),f(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],SA(i)),e}function iO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Ad(o))),f(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],CA(i)),e}function sO(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const o=c(t,["resolution"]);e!==void 0&&o!=null&&f(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=c(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Rd(h));const p=c(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>i4(_))),f(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function oO(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=c(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const _=c(t,["enhancePrompt"]);e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_);const R=c(t,["generateAudio"]);e!==void 0&&R!=null&&f(e,["parameters","generateAudio"],R);const P=c(t,["lastFrame"]);e!==void 0&&P!=null&&f(e,["instances[0]","lastFrame"],En(P));const x=c(t,["referenceImages"]);if(e!==void 0&&x!=null){let C=x;Array.isArray(C)&&(C=C.map(V=>s4(V))),f(e,["instances[0]","referenceImages"],C)}const w=c(t,["mask"]);e!==void 0&&w!=null&&f(e,["instances[0]","mask"],r4(w));const T=c(t,["compressionQuality"]);return e!==void 0&&T!=null&&f(e,["parameters","compressionQuality"],T),n}function aO(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],dO(o)),e}function lO(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response"]);return o!=null&&f(e,["response"],fO(o)),e}function uO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&f(n,["instances[0]","image"],Rd(s));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],PA(o));const a=c(e,["source"]);a!=null&&hO(a,n);const l=c(e,["config"]);return l!=null&&sO(l,n),n}function cO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&f(n,["instances[0]","image"],En(s));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],NA(o));const a=c(e,["source"]);a!=null&&pO(a,n);const l=c(e,["config"]);return l!=null&&oO(l,n),n}function dO(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>yO(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function fO(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_O(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function hO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Rd(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],PA(s)),n}function pO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],En(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],NA(s)),n}function mO(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],SO(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],SA(i)),e}function Ad(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],wA(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);i!=null&&f(e,["safetyAttributes"],CA(i));const s=c(t,["prompt"]);return s!=null&&f(e,["enhancedPrompt"],s),e}function gO(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],wA(n));const r=c(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["labels"],i)}return e}function yO(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],t4(n)),e}function _O(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],n4(n)),e}function vO(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const i=c(t,["candidateCount"]);i!=null&&f(e,["candidateCount"],i);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=c(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const R=c(t,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const w=c(t,["seed"]);w!=null&&f(e,["seed"],w);const T=c(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],AA(T));const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const V=c(t,["temperature"]);V!=null&&f(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const b=c(t,["topK"]);b!=null&&f(e,["topK"],b);const S=c(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function TO(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function EO(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function IO(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function wO(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function SO(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],mi(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wA(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],mi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Rd(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],mi(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function En(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],mi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function CO(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],mA(t,a)),r}function AO(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],mA(t,a)),r}function RO(t,e){const n={},r=c(e,["config"]);return r!=null&&CO(t,r,n),n}function PO(t,e){const n={},r=c(e,["config"]);return r!=null&&AO(t,r,n),n}function NO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=gA(i);Array.isArray(s)&&(s=s.map(o=>Ap(o))),f(e,["models"],s)}return e}function kO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=gA(i);Array.isArray(s)&&(s=s.map(o=>Rp(o))),f(e,["models"],s)}return e}function xO(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=c(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function Ap(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const s=c(t,["version"]);s!=null&&f(e,["version"],s);const o=c(t,["_self"]);o!=null&&f(e,["tunedModelInfo"],WO(o));const a=c(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);return u!=null&&f(e,["supportedActions"],u),e}function Rp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const s=c(t,["versionId"]);s!=null&&f(e,["version"],s);const o=c(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>Jb(m))),f(e,["endpoints"],p)}const a=c(t,["labels"]);a!=null&&f(e,["labels"],a);const l=c(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],KO(l));const u=c(t,["defaultCheckpointId"]);u!=null&&f(e,["defaultCheckpointId"],u);const h=c(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["checkpoints"],p)}return e}function MO(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],Eb(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],Qb(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function DO(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],En(n)),e}function VO(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","editConfig","baseSteps"],i);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const o=c(t,["seed"]);e!==void 0&&o!=null&&f(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);const h=c(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);const _=c(t,["labels"]);return e!==void 0&&_!=null&&f(e,["labels"],_),n}function LO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["source"]);i!=null&&FO(i,n);const s=c(e,["config"]);return s!=null&&VO(s,n),n}function UO(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ad(i))),f(e,["generatedImages"],r)}return e}function FO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],En(i));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>DO(a))),f(e,["instances[0]","productImages"],o)}return n}function bO(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],En(n));const r=c(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=c(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const s=c(t,["maskImageConfig"]);s!=null&&f(e,["maskImageConfig"],xO(s));const o=c(t,["controlImageConfig"]);o!=null&&f(e,["controlImageConfig"],Pb(o));const a=c(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function SA(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function CA(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function OO(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function qO(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],En(n)),e}function BO(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&f(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function GO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["source"]);i!=null&&$O(i,n);const s=c(e,["config"]);return s!=null&&BO(s,n),n}function HO(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gO(i))),f(e,["generatedMasks"],r)}return e}function $O(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],En(i));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],qO(s)),n}function AA(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function zO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],wO(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],IO(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function RA(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Yb(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function WO(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function KO(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function JO(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function QO(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function YO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","name"],ge(t,r));const i=c(e,["config"]);return i!=null&&JO(i,n),n}function XO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&QO(i,n),n}function ZO(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const s=c(t,["outputMimeType"]);e!==void 0&&s!=null&&f(e,["parameters","outputOptions","mimeType"],s);const o=c(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&f(e,["parameters","outputOptions","compressionQuality"],o);const a=c(t,["enhanceInputImage"]);e!==void 0&&a!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],a);const l=c(t,["imagePreservationFactor"]);e!==void 0&&l!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],l);const u=c(t,["labels"]);e!==void 0&&u!=null&&f(e,["labels"],u);const h=c(t,["numberOfImages"]);e!==void 0&&h!=null&&f(e,["parameters","sampleCount"],h);const p=c(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function jO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["image"]);i!=null&&f(n,["instances[0]","image"],En(i));const s=c(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=c(e,["config"]);return o!=null&&ZO(o,n),n}function e4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ad(s))),f(e,["generatedImages"],i)}return e}function t4(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],mi(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function n4(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],mi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function r4(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],En(n));const r=c(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function i4(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Rd(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function s4(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],En(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function PA(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],mi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function NA(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],mi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o4="Content-Type",a4="X-Server-Timeout",l4="User-Agent",Pp="x-goog-api-client",u4="1.25.0",c4=`google-genai-sdk/${u4}`,d4="v1beta1",f4="v1beta",zE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class h4{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:d4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:f4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>i.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&p4(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await WE(i),new wp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await WE(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return qs(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Ce(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,R=m.code,P=`got status: ${_}. ${JSON.stringify(p)}`;if(R>=400&&R<600)throw new Sd({message:P,status:R})}}catch(p){if(p.name==="ApiError")throw p}o+=u;let h=o.match(zE);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new wp(m)),o=o.slice(h[0].length),h=o.match(zE)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=c4+" "+this.clientOptions.userAgentExtra;return e[l4]=n,e[Pp]=n,e[o4]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(a4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l=await this.fetchUploadUrl(i,n);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:Y("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function WE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Sd({message:i,status:n}):new Error(i)}}function p4(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],h=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m4="mcp_used/unknown";let g4=!1;function kA(t){for(const e of t)if(y4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return g4}function xA(t){var e;const n=(e=t[Pp])!==null&&e!==void 0?e:"";t[Pp]=(n+` ${m4}`).trimStart()}function y4(t){return t!==null&&typeof t=="object"&&t instanceof Dg}function _4(t,e=100){return qs(this,arguments,function*(){let r,i=0;for(;i<e;){const s=yield Ce(t.listTools({cursor:r}));for(const o of s.tools)yield yield Ce(o),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class Dg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Dg(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,xa(_4(h))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const p=i;o.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),wU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function v4(t,e,n){const r=new mU;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class T4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=w4(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(C=>{u=C}),p=e.callbacks,m=function(){u({})},_=this.apiClient,R={onopen:m,onmessage:C=>{v4(_,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(C){}},P=this.webSocketFactory.create(l,I4(o),R);P.connect(),await h;const T={setup:{model:ge(this.apiClient,e.model)}};return P.send(JSON.stringify(T)),new E4(P,this.apiClient)}}class E4{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fb(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=db(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ps.PLAY)}pause(){this.sendPlaybackControl(Ps.PAUSE)}stop(){this.sendPlaybackControl(Ps.STOP)}resetContext(){this.sendPlaybackControl(Ps.RESET_CONTEXT)}close(){this.conn.close()}}function I4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function w4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function C4(t,e,n){const r=new pU;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=mb(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class A4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new T4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&kA(e.config.tools)&&xA(p);const m=k4(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const I=this.apiClient.getApiKey();let A="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",k="access_token"),h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${A}?${k}=${I}`}let _=()=>{};const R=new Promise(I=>{_=I}),P=e.callbacks,x=function(){var I;(I=P==null?void 0:P.onopen)===null||I===void 0||I.call(P),_({})},w=this.apiClient,T={onopen:x,onmessage:I=>{C4(w,P.onmessage,I)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(I){}},C=this.webSocketFactory.create(h,N4(m),T);C.connect(),await R;let V=ge(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const I=this.apiClient.getProject(),A=this.apiClient.getLocation();V=`projects/${I}/locations/${A}/`+V}let L={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lc.AUDIO]}:e.config.responseModalities=[Lc.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const I of b)if(this.isCallableTool(I)){const A=I;S.push(await A.tool())}else S.push(I);S.length>0&&(e.config.tools=S);const v={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=cb(this.apiClient,v):L=ub(this.apiClient,v),delete L.config,C.send(JSON.stringify(L)),new P4(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const R4={turnComplete:!0};class P4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=rn(n.turns),e.isVertexAI()||(r=r.map(i=>Cd(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(S4)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},R4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:pb(e)}:n={realtimeInput:hb(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function N4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function k4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KE=10;function JE(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Bs(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Bs(t){return"callTool"in t&&typeof t.callTool=="function"}function x4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Bs(i)))!==null&&r!==void 0?r:!1}function M4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Bs(i)))!==null&&r!==void 0?r:!1}function QE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D4 extends os{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!x4(n)||JE(n.config))return await this.generateContentInternal(l);if(M4(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const p=rn(l.contents),m=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:KE;let _=0;for(;_<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const R=u.candidates[0].content,P=[];for(const x of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Bs(x)){const T=await x.callTool(u.functionCalls);P.push(...T)}_++,h={role:"user",parts:P},l.contents=rn(l.contents),l.contents.push(R),l.contents.push(h),QE(l.config)&&(p.push(R),p.push(h))}return QE(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),JE(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Dl(ts.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Bs(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&kA(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),xA(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Bs(o)){const a=o,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:KE;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,h,p){var m,_;return qs(this,arguments,function*(){for(var R,P,x,w;a<s;){o&&(a++,o=!1);const L=yield Ce(u.processParamsMaybeAddMcpUsage(p)),b=yield Ce(u.generateContentStreamInternal(L)),S=[],v=[];try{for(var T=!0,C=(P=void 0,xa(b)),V;V=yield Ce(C.next()),R=V.done,!R;T=!0){w=V.value,T=!1;const I=w;if(yield yield Ce(I),I.candidates&&(!((m=I.candidates[0])===null||m===void 0)&&m.content)){v.push(I.candidates[0].content);for(const A of(_=I.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<s&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(A.functionCall.name)){const k=yield Ce(h.get(A.functionCall.name).callTool([A.functionCall]));S.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(I){P={error:I}}finally{try{!T&&!R&&(x=C.return)&&(yield Ce(x.call(C)))}finally{if(P)throw P.error}}if(S.length>0){o=!0;const I=new sa;I.candidates=[{content:{role:"user",parts:S}}],yield yield Ce(I);const A=[];A.push(...v),A.push({role:"user",parts:S});const k=rn(p.contents).concat(A);p.contents=k}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=GE(this.apiClient,e);return a=Y("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=$E(h),m=new sa;return Object.assign(m,p),m})}else{const u=BE(this.apiClient,e);return a=Y("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=HE(h),m=new sa;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=GE(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return qs(this,arguments,function*(){var m,_,R,P;try{for(var x=!0,w=xa(p),T;T=yield Ce(w.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const C=P,V=$E(yield Ce(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new sa;Object.assign(L,V),yield yield Ce(L)}}catch(C){_={error:C}}finally{try{!x&&!m&&(R=w.return)&&(yield Ce(R.call(w)))}finally{if(_)throw _.error}}})})}else{const u=BE(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return qs(this,arguments,function*(){var m,_,R,P;try{for(var x=!0,w=xa(p),T;T=yield Ce(w.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const C=P,V=HE(yield Ce(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new sa;Object.assign(L,V),yield yield Ce(L)}}catch(C){_={error:C}}finally{try{!x&&!m&&(R=w.return)&&(yield Ce(R.call(w)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=zb(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Kb(h),m=new CE;return Object.assign(m,p),m})}else{const u=$b(this.apiClient,e);return a=Y("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Wb(h),m=new CE;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=nO(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=iO(h),m=new AE;return Object.assign(m,p),m})}else{const u=tO(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=rO(h),m=new AE;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=qb(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=Bb(l),h=new oU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=jO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=e4(l),h=new aU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=LO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=UO(l),h=new lU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=GO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=HO(l),h=new uU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=EO(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Rp(h))}else{const u=TO(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Ap(h))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=PO(this.apiClient,e);return a=Y("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=kO(h),m=new RE;return Object.assign(m,p),m})}else{const u=RO(this.apiClient,e);return a=Y("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=NO(h),m=new RE;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=XO(this.apiClient,e);return a=Y("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Rp(h))}else{const u=YO(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Ap(h))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Ub(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=bb(h),m=new PE;return Object.assign(m,p),m})}else{const u=Lb(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Fb(h),m=new PE;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Mb(this.apiClient,e);return a=Y("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Vb(h),m=new NE;return Object.assign(m,p),m})}else{const u=xb(this.apiClient,e);return a=Y("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Db(h),m=new NE;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Sb(this.apiClient,e);return s=Y("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=Cb(l),h=new cU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=cO(this.apiClient,e);return a=Y("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const p=lO(h),m=new Uc;return Object.assign(m,p),m})}else{const u=uO(this.apiClient,e);return a=Y("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=aO(h),m=new Uc;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V4 extends os{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=rU(e);return a=Y("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const u=nU(e);return a=Y("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Q2(e);return s=Y("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function U4(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>$4(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function F4(t,e,n){const r={},i=c(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const o=c(e,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],H4(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function b4(t,e){const n={},r=c(e,["config"]);return r!=null&&f(n,["config"],F4(t,r,n)),n}function O4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function q4(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function B4(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function G4(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Mg(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],U4(vt(R)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=Mo(P);Array.isArray(b)&&(b=b.map(S=>W4(xo(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],z4(x));const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function H4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],G4(i,n)),n}function $4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],L4(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],O4(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function z4(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function W4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],B4(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],q4(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K4(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function J4(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=K4(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Q4 extends os{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=b4(this.apiClient,e);s=Y("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=J4(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function X4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Z4(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=c(t,["epochCount"]);e!==void 0&&i!=null&&f(e,["tuningTask","hyperparameters","epochCount"],i);const s=c(t,["learningRateMultiplier"]);if(s!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=c(t,["batchSize"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","batchSize"],o);const a=c(t,["learningRate"]);if(e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","learningRate"],a),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function j4(t,e){const n={},r=c(t,["validationDataset"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec"],p3(r,n));const i=c(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&f(e,["tunedModelDisplayName"],i);const s=c(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=c(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=c(t,["adapterSize"]);if(e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=c(t,["labels"]);return e!==void 0&&h!=null&&f(e,["labels"],h),n}function e3(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&f(e,["preTunedModel"],r);const i=c(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],d3(i));const s=c(t,["config"]);return s!=null&&Z4(s,e),e}function t3(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&f(e,["preTunedModel"],r);const i=c(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],f3(i,e));const s=c(t,["config"]);return s!=null&&j4(s,e),e}function n3(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function r3(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function i3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function s3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function o3(t){const e={},n=c(t,["config"]);return n!=null&&i3(n,e),e}function a3(t){const e={},n=c(t,["config"]);return n!=null&&s3(n,e),e}function l3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>MA(o))),f(e,["tuningJobs"],s)}return e}function u3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Np(o))),f(e,["tuningJobs"],s)}return e}function c3(t){const e={},n=c(t,["name"]);n!=null&&f(e,["model"],n);const r=c(t,["name"]);return r!=null&&f(e,["endpoint"],r),e}function d3(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["examples","examples"],r)}return e}function f3(t,e){const n={},r=c(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function MA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],hA(i));const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["tuningTask","startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["tuningTask","completeTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["description"]);u!=null&&f(e,["description"],u);const h=c(t,["baseModel"]);h!=null&&f(e,["baseModel"],h);const p=c(t,["_self"]);p!=null&&f(e,["tunedModel"],c3(p));const m=c(t,["customBaseModel"]);m!=null&&f(e,["customBaseModel"],m);const _=c(t,["experiment"]);_!=null&&f(e,["experiment"],_);const R=c(t,["labels"]);R!=null&&f(e,["labels"],R);const P=c(t,["outputUri"]);P!=null&&f(e,["outputUri"],P);const x=c(t,["pipelineJob"]);x!=null&&f(e,["pipelineJob"],x);const w=c(t,["serviceAccount"]);w!=null&&f(e,["serviceAccount"],w);const T=c(t,["tunedModelDisplayName"]);T!=null&&f(e,["tunedModelDisplayName"],T);const C=c(t,["veoTuningSpec"]);return C!=null&&f(e,["veoTuningSpec"],C),e}function Np(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],hA(i));const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["endTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["error"]);u!=null&&f(e,["error"],u);const h=c(t,["description"]);h!=null&&f(e,["description"],h);const p=c(t,["baseModel"]);p!=null&&f(e,["baseModel"],p);const m=c(t,["tunedModel"]);m!=null&&f(e,["tunedModel"],m);const _=c(t,["preTunedModel"]);_!=null&&f(e,["preTunedModel"],_);const R=c(t,["supervisedTuningSpec"]);R!=null&&f(e,["supervisedTuningSpec"],R);const P=c(t,["tuningDataStats"]);P!=null&&f(e,["tuningDataStats"],P);const x=c(t,["encryptionSpec"]);x!=null&&f(e,["encryptionSpec"],x);const w=c(t,["partnerModelTuningSpec"]);w!=null&&f(e,["partnerModelTuningSpec"],w);const T=c(t,["customBaseModel"]);T!=null&&f(e,["customBaseModel"],T);const C=c(t,["experiment"]);C!=null&&f(e,["experiment"],C);const V=c(t,["labels"]);V!=null&&f(e,["labels"],V);const L=c(t,["outputUri"]);L!=null&&f(e,["outputUri"],L);const b=c(t,["pipelineJob"]);b!=null&&f(e,["pipelineJob"],b);const S=c(t,["serviceAccount"]);S!=null&&f(e,["serviceAccount"],S);const v=c(t,["tunedModelDisplayName"]);v!=null&&f(e,["tunedModelDisplayName"],v);const I=c(t,["veoTuningSpec"]);return I!=null&&f(e,["veoTuningSpec"],I),e}function h3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function p3(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m3 extends os{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Dl(ts.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Ip.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=r3(e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>Np(h))}else{const u=n3(e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>MA(h))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=a3(e);return a=Y("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=u3(h),m=new kE;return Object.assign(m,p),m})}else{const u=o3(e);return a=Y("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=l3(h),m=new kE;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=X4(e);o=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Y4(e);o=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=t3(e);return s=Y("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>Np(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=e3(e);return s=Y("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>h3(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y3=1024*1024*8,_3=3,v3=1e3,T3=2,bf="x-goog-upload-status";async function E3(t,e,n){var r,i,s;let o=0,a=0,l=new wp(new Response),u="upload";for(o=t.size;a<o;){const p=Math.min(y3,o-a),m=t.slice(a,a+p);a+p>=o&&(u+=", finalize");let _=0,R=v3;for(;_<_3&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[bf]));)_++,await w3(R),R=R*T3;if(a+=p,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[bf])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[bf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function I3(t){return{size:t.size,type:t.type}}function w3(t){return new Promise(e=>setTimeout(e,t))}class S3{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E3(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await I3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C3{create(e,n,r){return new A3(e,n,r)}}class A3{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YE="x-goog-api-key";class R3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(YE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(YE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3="gl-node/";class N3{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=K2(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new R3(this.apiKey);this.apiClient=new h4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:P3+"web",uploader:new S3,downloader:new g3}),this.models=new D4(this.apiClient),this.live=new A4(this.apiClient,i,new C3),this.batches=new fF(this.apiClient),this.chats=new $F(this.models,this.apiClient),this.caches=new BF(this.apiClient),this.files=new eb(this.apiClient),this.operations=new V4(this.apiClient),this.authTokens=new Q4(this.apiClient),this.tunings=new m3(this.apiClient)}}const DA="gemini-2.5-flash",k3="imagen-4.0-generate-001",XE=["World","Technology","Sports","Business","Local","Politics"],x3=()=>"AIzaSyANXsoaIDehflROf1KeZ1jbhk2Nm_31RqA";let Of=null;const Vg=()=>(Of||(Of=new N3({apiKey:x3()})),Of),M3=async(t,e,n)=>{const r=Vg(),i=n==="all"||!n?"Ensure a diverse mix of headlines from all categories.":`Generate headlines for the '${n}' category ONLY.`,s=`You are a world-class news editor for a bilingual newspaper (English and Arabic).
    Your task is to generate 7 compelling, diverse, and factual news headlines.
    IMPORTANT: You must avoid creating multiple headlines for the same underlying news event to ensure variety.
    For each headline, provide a suitable category from this list: ${XE.join(", ")}.
    Also, provide a concise, visually descriptive prompt for an AI image generator to create a compelling, photorealistic cover image for the article.`,o=`Generate the news headlines for ${t.toDateString()} in ${e}.
    ${i}`,a=await r.models.generateContent({model:DA,contents:o,config:{systemInstruction:s,responseMimeType:"application/json",responseSchema:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{headline:{type:qe.STRING},category:{type:qe.STRING,enum:XE},imagePrompt:{type:qe.STRING}},required:["headline","category","imagePrompt"]}}}});return JSON.parse(a.text)},D3=async(t,e)=>{const n=Vg(),r=`You are an expert journalist writing for a bilingual newspaper. Your task is to write a concise, neutral, and informative news article (2-3 paragraphs) based on a given headline.

    IMPORTANT INSTRUCTIONS FOR SOURCES:
    - Provide 2-3 REAL and CREDIBLE news sources
    - Use ACTUAL major news organizations like: Reuters, AP, BBC, CNN, Al Jazeera, etc.
    - The URLs must be REAL, accessible links to actual articles or the main domain
    - Do NOT make up fake URLs or sources
    - Format URLs properly: https://www.example.com/article-path
    - If you're not sure about a specific article URL, use the main domain of the news organization

    IMPORTANT INSTRUCTIONS FOR BYLINE:
    - Create realistic journalist names (not celebrities or well-known people)
    - Use professional-sounding names appropriate for the language
    - Format: "By [First Name] [Last Name]" or equivalent in Arabic`,i=`For the headline "${t}" in ${e}, generate the article content.
    The virality description must be one of: 'Fast Spreading', 'Medium Spreading', or 'Low Spreading' (or the equivalent in ${e}).

    Make sure sources are REAL news organizations with VALID, accessible URLs.`,s=await n.models.generateContent({model:DA,contents:i,config:{systemInstruction:r,responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{body:{type:qe.STRING},byline:{type:qe.STRING},viralityDescription:{type:qe.STRING},sources:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{title:{type:qe.STRING},uri:{type:qe.STRING}},required:["title","uri"]}}},required:["body","byline","viralityDescription","sources"]}}});return JSON.parse(s.text)},V3=async t=>{try{const n=await Vg().models.generateImages({model:k3,prompt:t,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(!n.generatedImages||n.generatedImages.length===0)throw new Error("Image generation returned no images.");return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`}catch(e){return console.error("Image generation failed for prompt:",t,e),`https://picsum.photos/seed/${encodeURIComponent(t)}/1280/720`}},L3=t=>{let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return Math.abs(e).toString(16)},U3=(t,e)=>{const n=t.split("T")[0],r=L3(e);return`${n}-${r}`},ZE=4,jE=2,eI=async(t,e,n)=>{const r=t.toISOString().split("T")[0],i=await ol.getArticlesForDay(r,e);if(i&&i.length>0)if(n!=="all"){const a=i.filter(l=>l.category.toLowerCase()===n.toLowerCase());if(a.length>0)return a}else return i;const o=(await M3(t,e,n)).map(a=>({id:U3(t.toISOString(),a.headline),headline:a.headline,category:a.category,imagePrompt:a.imagePrompt,date:t.toISOString(),imageUrl:"",comments:[]}));return o.length>0&&ol.syncArticlesBatch(o),o},F3=()=>{const{language:t,appStatus:e,articles:n,setArticles:r,updateArticle:i,updateMultipleArticles:s,setInitialTodayHeadlines:o,setIsNewEditionAvailable:a,initialTodayHeadlines:l,activeTopic:u}=br(),h=ed(),[p,m]=oe.useState(0),[_,R]=oe.useState(0),P=oe.useRef(new Set),x=oe.useRef(new Set),w=oe.useMemo(()=>{const G=new Date;return G.setHours(0,0,0,0),G},[]),{data:T,isLoading:C,isError:V,error:L}=_k({queryKey:["articles",w.toISOString().split("T")[0],t,u],queryFn:()=>eI(w,t,u),enabled:e==="ready",staleTime:5*60*1e3,gcTime:30*60*1e3,refetchInterval:5*60*1e3}),b=T||[];oe.useEffect(()=>{if(b.length>0&&l.length>0&&u==="all"){const G=new Set(b.map(X=>X.headline)),W=new Set(l);G.size>0&&(G.size!==W.size||![...G].every(X=>W.has(X)))&&a(!0)}},[b,l,a,u]);const{data:S,fetchNextPage:v,hasNextPage:I,isFetchingNextPage:A,isLoading:k,isError:M,error:N}=vk({queryKey:["articles","older",t,u],queryFn:({pageParam:G})=>{const W=new Date(w);return W.setDate(w.getDate()-G),eI(W,t,u)},initialPageParam:1,getNextPageParam:(G,W)=>{const X=W.length+1;return X<30?X:void 0},enabled:e==="ready"});oe.useEffect(()=>{const G=(S==null?void 0:S.pages.flat())||[],W=[...b,...G].filter(Boolean);W.length>0&&(s(W),br.getState().initialTodayHeadlines.length===0&&b.length>0&&u==="all"&&o(b.map(X=>X.headline)))},[b,S,s,u,o]),oe.useEffect(()=>{const G=n.filter(j=>!j.body&&!P.current.has(j.id));if(G.length===0||p>=ZE)return;const W=ZE-p,X=G.slice(0,W);m(j=>j+X.length),X.forEach(j=>{P.current.add(j.id),(async()=>{try{const Ge=await D3(j.headline,t);if(br.getState().activeTopic===u){const je={...j,...Ge};i(je),ol.syncArticle(je)}}catch(Ge){console.error(`Failed to fetch details for article ${j.id}`,Ge),P.current.delete(j.id)}finally{m(Ge=>Math.max(0,Ge-1))}})()})},[n,t,i,p,u]),oe.useEffect(()=>{const G=n.filter(j=>j.body&&j.imagePrompt&&j.imageUrl===""&&!x.current.has(j.id));if(G.length===0||_>=jE)return;const W=jE-_,X=G.slice(0,W);R(j=>j+X.length),X.forEach(j=>{x.current.add(j.id),(async()=>{try{const Ge=await V3(j.imagePrompt);if(br.getState().activeTopic===u){const je={...j,imageUrl:Ge};i(je),ol.syncArticle(je)}}catch(Ge){console.error(`Failed to generate image for article ${j.id}`,Ge),x.current.delete(j.id)}finally{R(Ge=>Ge-Math.max(0,Ge-1))}})()})},[n,t,i,_,u]);const Pe=()=>{r([]),a(!1),P.current.clear(),x.current.clear(),m(0),R(0),o([]),h.invalidateQueries({queryKey:["articles"]})};return{isLoading:(C||k)&&n.length===0,isError:V||M,error:L||N,isFetchingNextPage:A,fetchNextPage:v,hasNextPage:I,refresh:Pe}},b3=()=>{const{language:t,setAppStatus:e,setLoadingMessage:n,setLanguage:r}=br(),i=Nm[t],s=ed();return oe.useEffect(()=>{(()=>{e("initializing"),n(i.generating_title,i.generating_subtitle),e("ready")})()},[t,e,n,i]),{toggleLanguage:()=>{s.clear(),r(t==="en"?"ar":"en")}}},oa=({isFeatured:t=!1})=>t?F.jsxs("div",{className:"bg-white flex flex-col md:flex-row shadow-lg rounded-lg overflow-hidden w-full h-full","aria-hidden":"true",children:[F.jsx("div",{className:"relative md:w-1/2 h-64 md:h-auto w-full bg-stone-200 animate-pulse flex-shrink-0"}),F.jsxs("div",{className:"p-6 flex flex-col flex-grow w-full md:w-1/2",children:[F.jsx("div",{className:"h-4 w-20 bg-stone-200 rounded animate-pulse mb-2"}),F.jsx("div",{className:"h-8 bg-stone-200 rounded animate-pulse w-4/5 mb-2"}),F.jsx("div",{className:"h-8 bg-stone-200 rounded animate-pulse w-3/5 mb-3"}),F.jsx("div",{className:"h-4 w-1/2 bg-stone-200 rounded animate-pulse mb-4"}),F.jsxs("div",{className:"space-y-2 flex-grow",children:[F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-5/6"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"})]}),F.jsx("div",{className:"h-5 w-24 bg-stone-200 rounded animate-pulse mt-4 self-start"})]})]}):F.jsxs("div",{className:"bg-white flex flex-col shadow-md rounded-lg overflow-hidden w-full h-full","aria-hidden":"true",children:[F.jsx("div",{className:"relative h-48 w-full bg-stone-200 animate-pulse",children:F.jsx("div",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2 bg-stone-300 h-5 w-20 rounded z-10"})}),F.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[F.jsx("div",{className:"h-6 bg-stone-200 rounded animate-pulse w-4/5 mb-2"}),F.jsx("div",{className:"h-4 w-1/2 bg-stone-200 rounded animate-pulse mb-3"}),F.jsxs("div",{className:"space-y-2 flex-grow",children:[F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-5/6"})]}),F.jsx("div",{className:"h-5 w-24 bg-stone-200 rounded animate-pulse mt-4 self-start"})]})]}),O3=oe.lazy(()=>Ik(()=>import("./ArticleModal-Dz__Or_t.js"),[])),q3=({title:t,body:e,onClose:n,confirmText:r="OK",language:i})=>{const s=i==="ar";return F.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center bg-black bg-opacity-60",onClick:n,role:"alertdialog","aria-modal":"true","aria-labelledby":"alert-title","aria-describedby":"alert-body",children:F.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-sm w-11/12 p-6 text-center",onClick:o=>o.stopPropagation(),children:[F.jsx("h2",{id:"alert-title",className:`text-2xl font-bold text-stone-900 mb-4 ${s?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{id:"alert-body",className:"text-stone-700 mb-6",children:e}),F.jsx("button",{onClick:n,className:"bg-stone-800 text-white px-6 py-2 rounded-md font-bold hover:bg-stone-900 transition-colors focus:outline-none focus:ring-2 focus:ring-stone-400",children:r})]})})},B3=()=>F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60","aria-label":"Loading article...",children:F.jsx(km,{className:"w-16 h-16 text-white"})}),G3=(t,e)=>{const n=t instanceof Error?t.message:"An unknown error occurred.";return console.error("Content Generation Error:",t),n.includes("API_KEY environment variable not set")?{title:e.config_error_title,body:e.config_error_gemini}:n.includes("Server error: Not Found")||n.includes("Failed to fetch")?{title:e.error_title,body:"Development server not running. Please start the API server with: npm run dev:server"}:n.includes("is not valid JSON")&&n.includes("<!DOCTYPE")?{title:e.error_cache_title,body:e.error_cache_body}:n.includes("Invalid JSON response")?{title:e.error_title,body:e.error_gemini_json}:n.includes("quota")?{title:e.error_title,body:e.error_gemini_quota}:n.includes("API key not valid")?{title:e.config_error_title,body:e.error_gemini_invalid_key}:{title:e.error_title,body:e.error_subtitle}},H3=()=>{oe.useEffect(()=>{br.getState().hydrateFromLocalStorage()},[]);const{language:t,appStatus:e,errorMessage:n,articles:r,user:i,isNewEditionAvailable:s,updateArticle:o,activeTopic:a,setActiveTopic:l}=br(),u=ed(),{toggleLanguage:h}=b3();H2();const{isLoading:p,isError:m,error:_,isFetchingNextPage:R,fetchNextPage:P,hasNextPage:x,refresh:w}=F3(),[T,C]=oe.useState(null),[V,L]=oe.useState(""),[b,S]=oe.useState(null),v=oe.useMemo(()=>Nm[t],[t]),I=oe.useMemo(()=>n?{title:v.config_error_title,body:n}:m?G3(_,v):null,[n,m,_,v]);oe.useEffect(()=>{document.documentElement.lang=t,document.documentElement.dir=t==="ar"?"rtl":"ltr",document.title=v.title,L(""),C(null)},[t,v]);const A=oe.useRef(),k=oe.useCallback(ae=>{R||(A.current&&A.current.disconnect(),A.current=new IntersectionObserver(G=>{G[0].isIntersecting&&x&&P()}),ae&&A.current.observe(ae))},[R,P,x]),M=ae=>{a!==ae&&(l(ae),u.invalidateQueries({queryKey:["articles"]}))},N=oe.useMemo(()=>V?r.filter(ae=>ae.headline.toLowerCase().includes(V.toLowerCase())||ae.body&&ae.body.toLowerCase().includes(V.toLowerCase())):r,[r,V]),Pe=(ae,G)=>{if(!i)return;const W={author:i.displayName||i.email||"Anonymous",text:G};ol.addCommentToArticle(ae,W);const X=r.find(j=>j.id===ae);if(X){const j={...X,comments:[...X.comments,W]};o(j),(T==null?void 0:T.id)===ae&&C(j)}},It=async()=>{try{await Tp.login()}catch(ae){console.error("Login process failed:",ae),S({title:v.login_failed_title,body:v.login_failed_body})}},Ze=()=>{if(p&&r.length===0)return F.jsxs("div",{className:"container mx-auto p-4 lg:p-6",children:[F.jsx(nv,{language:t,activeTopic:a,onSelect:()=>{}}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[F.jsx("div",{className:"md:col-span-2 lg:col-span-2",children:F.jsx(oa,{isFeatured:!0})}),F.jsx(oa,{}),F.jsx(oa,{}),F.jsx(oa,{}),F.jsx(oa,{})]})]});if(e==="error"||m&&r.length===0){const ae=(I==null?void 0:I.body.includes("quota"))||(I==null?void 0:I.body.includes("حصتك"));return F.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[F.jsx(kk,{className:"w-20 h-20 text-red-400"}),F.jsx("h2",{className:"mt-6 text-3xl font-bold text-stone-800",children:I==null?void 0:I.title}),F.jsx("p",{className:"mt-2 max-w-lg text-lg text-stone-600",children:I==null?void 0:I.body}),ae&&F.jsx("a",{href:"https://console.cloud.google.com/billing",target:"_blank",rel:"noopener noreferrer",className:"mt-6 px-5 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors",children:v.manage_billing_link})]})}return F.jsxs("div",{className:"container mx-auto p-4 lg:p-6",children:[F.jsx(nv,{language:t,activeTopic:a,onSelect:M}),N.length===0&&!p?F.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-center",children:[F.jsx("h3",{className:"text-2xl text-stone-500",children:t==="ar"?"لم يتم العثور على مقالات":"No Articles Found"}),F.jsx("p",{className:"mt-2 text-stone-400",children:t==="ar"?"حاول تحديد فئة مختلفة.":"Try selecting a different topic."})]}):F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map((ae,G)=>{const W=G===0&&a==="all"&&V==="";return N.length===G+1?F.jsx("div",{ref:k,className:W?"md:col-span-2 lg:col-span-2":"",children:F.jsx(tv,{article:ae,onReadMore:C,categoryText:Z_[t][ae.category]||ae.category,uiText:v,isFeatured:W})},ae.id):F.jsx("div",{className:W?"md:col-span-2 lg:col-span-2":"",children:F.jsx(tv,{article:ae,onReadMore:C,categoryText:Z_[t][ae.category]||ae.category,uiText:v,isFeatured:W})},ae.id)})}),R&&F.jsx("div",{className:"flex justify-center my-8",children:F.jsxs("div",{className:"flex items-center justify-center gap-2 text-stone-600",children:[F.jsx(km,{className:"w-6 h-6"}),F.jsx("span",{children:v.loading_older_articles})]})}),!x&&r.length>0&&F.jsxs("div",{className:"text-center my-10 p-6 bg-stone-200/70 rounded-lg max-w-4xl mx-auto",children:[F.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:v.end_of_feed_title}),F.jsx("p",{className:"mt-2 text-stone-600",children:v.end_of_feed_body})]})]})};return F.jsxs("div",{className:`min-h-screen ${t==="ar"?"font-serif-ar":"font-serif-en"}`,children:[e==="initializing"&&F.jsx(Nk,{title:v.generating_title,subtitle:v.generating_subtitle}),s&&F.jsxs("div",{className:"sticky top-0 z-[60] bg-red-700 text-white p-2 text-center flex items-center justify-center gap-4 shadow-lg font-bold text-sm",children:[F.jsx("span",{children:v.new_edition_available}),F.jsx("button",{onClick:w,className:"bg-white text-red-700 font-semibold px-3 py-1 rounded-md hover:bg-red-100 transition-colors",children:v.click_to_refresh})]}),F.jsx(Rk,{title:v.title,subtitle:v.subtitle,language:t,toggleLanguage:h,languageToggleText:v.language_toggle,onRefresh:w,searchQuery:V,setSearchQuery:L,user:i,onLogin:It,onLogout:Tp.logout,uiText:v}),F.jsx("main",{children:Ze()}),F.jsx(oe.Suspense,{fallback:F.jsx(B3,{}),children:F.jsx(O3,{article:T,onClose:()=>C(null),language:t,isLoggedIn:!!i,onAddComment:Pe})}),b&&F.jsx(q3,{title:b.title,body:b.body,onClose:()=>S(null),confirmText:v.ok_button,language:t})]})};class $3 extends ms.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error in React component tree:",e,n)}render(){if(this.state.hasError){const e=document.documentElement.dir==="rtl";return F.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-stone-100 text-stone-800 p-6",children:F.jsxs("div",{className:"text-center p-8 bg-red-100 text-red-800 rounded-lg shadow-lg",children:[F.jsx("h1",{className:"text-3xl font-bold",children:e?"حدث خطأ ما":"Something went wrong."}),F.jsx("p",{className:"mt-4 text-lg",children:e?"لقد واجهنا خطأ غير متوقع. الرجاء محاولة تحديث الصفحة.":"An unexpected error occurred. Please try refreshing the page."}),F.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-red-700 text-white font-bold rounded-lg hover:bg-red-800 transition-colors",children:e?"تحديث الصفحة":"Refresh Page"})]})})}return this.props.children}}const z3=document.getElementById("root"),W3=wS(z3),K3=new ok({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!0}}});W3.render(F.jsx(ms.StrictMode,{children:F.jsx($3,{children:F.jsx(ak,{client:K3,children:F.jsx(H3,{})})})}));export{j_ as T,Nm as U,Ik as _,r6 as a,Z3 as b,h2 as c,vd as d,j3 as e,n6 as f,A2 as g,t6 as h,aA as i,F as j,e6 as o,w2 as q,oe as r,i6 as s,P2 as u,NT as w};
