var Iy=t=>{throw TypeError(t)};var Gd=(t,e,n)=>e.has(t)||Iy("Cannot "+n);var D=(t,e,n)=>(Gd(t,e,"read from private field"),n?n.call(t):e.get(t)),ee=(t,e,n)=>e.has(t)?Iy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),K=(t,e,n,r)=>(Gd(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fe=(t,e,n)=>(Gd(t,e,"access private method"),n);var bl=(t,e,n,r)=>({set _(i){K(t,e,i,n)},get _(){return D(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function QA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jT={exports:{}},Mc={},eI={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),YA=Symbol.for("react.portal"),XA=Symbol.for("react.fragment"),ZA=Symbol.for("react.strict_mode"),jA=Symbol.for("react.profiler"),eR=Symbol.for("react.provider"),tR=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),rR=Symbol.for("react.suspense"),iR=Symbol.for("react.memo"),sR=Symbol.for("react.lazy"),wy=Symbol.iterator;function oR(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var tI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nI=Object.assign,rI={};function go(t,e,n){this.props=t,this.context=e,this.refs=rI,this.updater=n||tI}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iI(){}iI.prototype=go.prototype;function Sp(t,e,n){this.props=t,this.context=e,this.refs=rI,this.updater=n||tI}var Cp=Sp.prototype=new iI;Cp.constructor=Sp;nI(Cp,go.prototype);Cp.isPureReactComponent=!0;var Sy=Array.isArray,sI=Object.prototype.hasOwnProperty,Ap={current:null},oI={key:!0,ref:!0,__self:!0,__source:!0};function aI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sI.call(e,r)&&!oI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ol,type:t,key:s,ref:o,props:i,_owner:Ap.current}}function aR(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function lR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cy=/\/+/g;function Hd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lR(""+t.key):e.toString(36)}function du(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case YA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Hd(o,0):r,Sy(i)?(n="",t!=null&&(n=t.replace(Cy,"$&/")+"/"),du(i,e,n,"",function(u){return u})):i!=null&&(Rp(i)&&(i=aR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Hd(s,a);o+=du(s,e,n,l,i)}else if(l=oR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Hd(s,a++),o+=du(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ol(t,e,n){if(t==null)return t;var r=[],i=0;return du(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},fu={transition:null},cR={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:fu,ReactCurrentOwner:Ap};function lI(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ol,forEach:function(t,e,n){Ol(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ol(t,function(){e++}),e},toArray:function(t){return Ol(t,function(e){return e})||[]},only:function(t){if(!Rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=go;le.Fragment=XA;le.Profiler=jA;le.PureComponent=Sp;le.StrictMode=ZA;le.Suspense=rR;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;le.act=lI;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ap.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sI.call(e,l)&&!oI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ol,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:tR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eR,_context:t},t.Consumer=t};le.createElement=aI;le.createFactory=function(t){var e=aI.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:nR,render:t}};le.isValidElement=Rp;le.lazy=function(t){return{$$typeof:sR,_payload:{_status:-1,_result:t},_init:uR}};le.memo=function(t,e){return{$$typeof:iR,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};le.unstable_act=lI;le.useCallback=function(t,e){return Nt.current.useCallback(t,e)};le.useContext=function(t){return Nt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Nt.current.useEffect(t,e)};le.useId=function(){return Nt.current.useId()};le.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Nt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};le.useRef=function(t){return Nt.current.useRef(t)};le.useState=function(t){return Nt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Nt.current.useTransition()};le.version="18.3.1";eI.exports=le;var oe=eI.exports;const ds=QA(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR=oe,fR=Symbol.for("react.element"),hR=Symbol.for("react.fragment"),pR=Object.prototype.hasOwnProperty,mR=dR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gR={key:!0,ref:!0,__self:!0,__source:!0};function uI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pR.call(e,r)&&!gR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fR,type:t,key:s,ref:o,props:i,_owner:mR.current}}Mc.Fragment=hR;Mc.jsx=uI;Mc.jsxs=uI;jT.exports=Mc;var F=jT.exports,cI={exports:{}},Kt={},dI={exports:{}},fI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,W){var X=G.length;G.push(W);e:for(;0<X;){var j=X-1>>>1,ke=G[j];if(0<i(ke,W))G[j]=W,G[X]=ke,X=j;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var W=G[0],X=G.pop();if(X!==W){G[0]=X;e:for(var j=0,ke=G.length,Be=ke>>>1;j<Be;){var je=2*(j+1)-1,pi=G[je],on=je+1,ar=G[on];if(0>i(pi,X))on<ke&&0>i(ar,pi)?(G[j]=ar,G[on]=X,j=on):(G[j]=pi,G[je]=X,j=je);else if(on<ke&&0>i(ar,X))G[j]=ar,G[on]=X,j=on;else break e}}return W}function i(G,W){var X=G.sortIndex-W.sortIndex;return X!==0?X:G.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,m=3,_=!1,R=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=G)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function V(G){if(P=!1,C(G),!R)if(n(l)!==null)R=!0,Ze(L);else{var W=n(u);W!==null&&ae(V,W.startTime-G)}}function L(G,W){R=!1,P&&(P=!1,w(v),v=-1),_=!0;var X=m;try{for(C(W),p=n(l);p!==null&&(!(p.expirationTime>W)||G&&!k());){var j=p.callback;if(typeof j=="function"){p.callback=null,m=p.priorityLevel;var ke=j(p.expirationTime<=W);W=t.unstable_now(),typeof ke=="function"?p.callback=ke:p===n(l)&&r(l),C(W)}else r(l);p=n(l)}if(p!==null)var Be=!0;else{var je=n(u);je!==null&&ae(V,je.startTime-W),Be=!1}return Be}finally{p=null,m=X,_=!1}}var b=!1,S=null,v=-1,I=5,A=-1;function k(){return!(t.unstable_now()-A<I)}function M(){if(S!==null){var G=t.unstable_now();A=G;var W=!0;try{W=S(!0,G)}finally{W?N():(b=!1,S=null)}}else b=!1}var N;if(typeof E=="function")N=function(){E(M)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,It=Pe.port2;Pe.port1.onmessage=M,N=function(){It.postMessage(null)}}else N=function(){x(M,0)};function Ze(G){S=G,b||(b=!0,N())}function ae(G,W){v=x(function(){G(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,Ze(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var X=m;m=W;try{return G()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,W){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=m;m=G;try{return W()}finally{m=X}},t.unstable_scheduleCallback=function(G,W,X){var j=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?j+X:j):X=j,G){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=X+ke,G={id:h++,callback:W,priorityLevel:G,startTime:X,expirationTime:ke,sortIndex:-1},X>j?(G.sortIndex=X,e(u,G),n(l)===null&&G===n(u)&&(P?(w(v),v=-1):P=!0,ae(V,X-j))):(G.sortIndex=ke,e(l,G),R||_||(R=!0,Ze(L))),G},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(G){var W=m;return function(){var X=m;m=W;try{return G.apply(this,arguments)}finally{m=X}}}})(fI);dI.exports=fI;var yR=dI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R=oe,Wt=yR;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hI=new Set,Pa={};function Zi(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Pa[t]=e,t=0;t<e.length;t++)hI.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,vR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ay={},Ry={};function ER(t){return Df.call(Ry,t)?!0:Df.call(Ay,t)?!1:vR.test(t)?Ry[t]=!0:(Ay[t]=!0,!1)}function TR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IR(t,e,n,r){if(e===null||typeof e>"u"||TR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pp=/[\-:]([a-z])/g;function Np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pp,Np);ct[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pp,Np);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pp,Np);ct[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kp(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IR(e,n,i,r)&&(n=null),r||i===null?ER(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ir=_R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),fs=Symbol.for("react.portal"),hs=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),pI=Symbol.for("react.provider"),mI=Symbol.for("react.context"),Mp=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Dp=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),gI=Symbol.for("react.offscreen"),Py=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,$d;function ia(t){if($d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$d=e&&e[1]||""}return`
`+$d+t}var zd=!1;function Wd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ia(t):""}function wR(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=Wd(t.type,!1),t;case 11:return t=Wd(t.type.render,!1),t;case 1:return t=Wd(t.type,!0),t;default:return""}}function Ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hs:return"Fragment";case fs:return"Portal";case Vf:return"Profiler";case xp:return"StrictMode";case Lf:return"Suspense";case Uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mI:return(t.displayName||"Context")+".Consumer";case pI:return(t._context.displayName||"Context")+".Provider";case Mp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dp:return e=t.displayName||null,e!==null?e:Ff(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return Ff(t(e))}catch{}}return null}function SR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ff(e);case 8:return e===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CR(t){var e=yI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bl(t){t._valueTracker||(t._valueTracker=CR(t))}function _I(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bf(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vI(t,e){e=e.checked,e!=null&&kp(t,"checked",e,!1)}function Of(t,e){vI(t,e);var n=Xr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&qf(t,e.type,Xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ky(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qf(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Cs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(sa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xr(n)}}function EI(t,e){var n=Xr(e.value),r=Xr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function My(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,II=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AR=["Webkit","ms","Moz","O"];Object.keys(fa).forEach(function(t){AR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fa[e]=fa[t]})});function wI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fa.hasOwnProperty(t)&&fa[t]?(""+e).trim():e+"px"}function SI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var RR=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hf(t,e){if(e){if(RR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function $f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zf=null;function Vp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wf=null,As=null,Rs=null;function Dy(t){if(t=ul(t)){if(typeof Wf!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Fc(e),Wf(t.stateNode,t.type,e))}}function CI(t){As?Rs?Rs.push(t):Rs=[t]:As=t}function AI(){if(As){var t=As,e=Rs;if(Rs=As=null,Dy(t),e)for(t=0;t<e.length;t++)Dy(e[t])}}function RI(t,e){return t(e)}function PI(){}var Kd=!1;function NI(t,e,n){if(Kd)return t(e,n);Kd=!0;try{return RI(t,e,n)}finally{Kd=!1,(As!==null||Rs!==null)&&(PI(),AI())}}function ka(t,e){var n=t.stateNode;if(n===null)return null;var r=Fc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Kf=!1;if(Yn)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Kf=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Kf=!1}function PR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ha=!1,Fu=null,bu=!1,Jf=null,NR={onError:function(t){ha=!0,Fu=t}};function kR(t,e,n,r,i,s,o,a,l){ha=!1,Fu=null,PR.apply(NR,arguments)}function xR(t,e,n,r,i,s,o,a,l){if(kR.apply(this,arguments),ha){if(ha){var u=Fu;ha=!1,Fu=null}else throw Error(H(198));bu||(bu=!0,Jf=u)}}function ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vy(t){if(ji(t)!==t)throw Error(H(188))}function MR(t){var e=t.alternate;if(!e){if(e=ji(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vy(i),t;if(s===r)return Vy(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function xI(t){return t=MR(t),t!==null?MI(t):null}function MI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MI(t);if(e!==null)return e;t=t.sibling}return null}var DI=Wt.unstable_scheduleCallback,Ly=Wt.unstable_cancelCallback,DR=Wt.unstable_shouldYield,VR=Wt.unstable_requestPaint,qe=Wt.unstable_now,LR=Wt.unstable_getCurrentPriorityLevel,Lp=Wt.unstable_ImmediatePriority,VI=Wt.unstable_UserBlockingPriority,Ou=Wt.unstable_NormalPriority,UR=Wt.unstable_LowPriority,LI=Wt.unstable_IdlePriority,Dc=null,kn=null;function FR(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Dc,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:qR,bR=Math.log,OR=Math.LN2;function qR(t){return t>>>=0,t===0?32:31-(bR(t)/OR|0)|0}var Hl=64,$l=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=oa(a):(s&=o,s!==0&&(r=oa(s)))}else o=n&~i,o!==0?r=oa(o):s!==0&&(r=oa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),i=1<<n,r|=t[n],e&=~i;return r}function BR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=BR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UI(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function HR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Up(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function FI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bI,Fp,OI,qI,BI,Yf=!1,zl=[],Ur=null,Fr=null,br=null,xa=new Map,Ma=new Map,vr=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uy(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Qo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ul(e),e!==null&&Fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zR(t,e,n,r,i){switch(e){case"focusin":return Ur=Qo(Ur,t,e,n,r,i),!0;case"dragenter":return Fr=Qo(Fr,t,e,n,r,i),!0;case"mouseover":return br=Qo(br,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xa.set(s,Qo(xa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ma.set(s,Qo(Ma.get(s)||null,t,e,n,r,i)),!0}return!1}function GI(t){var e=wi(t.target);if(e!==null){var n=ji(e);if(n!==null){if(e=n.tag,e===13){if(e=kI(n),e!==null){t.blockedOn=e,BI(t.priority,function(){OI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zf=r,n.target.dispatchEvent(r),zf=null}else return e=ul(n),e!==null&&Fp(e),t.blockedOn=n,!1;e.shift()}return!0}function Fy(t,e,n){hu(t)&&n.delete(e)}function WR(){Yf=!1,Ur!==null&&hu(Ur)&&(Ur=null),Fr!==null&&hu(Fr)&&(Fr=null),br!==null&&hu(br)&&(br=null),xa.forEach(Fy),Ma.forEach(Fy)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,WR)))}function Da(t){function e(i){return Yo(i,t)}if(0<zl.length){Yo(zl[0],t);for(var n=1;n<zl.length;n++){var r=zl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ur!==null&&Yo(Ur,t),Fr!==null&&Yo(Fr,t),br!==null&&Yo(br,t),xa.forEach(e),Ma.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)GI(n),n.blockedOn===null&&vr.shift()}var Ps=ir.ReactCurrentBatchConfig,Bu=!0;function KR(t,e,n,r){var i=ve,s=Ps.transition;Ps.transition=null;try{ve=1,bp(t,e,n,r)}finally{ve=i,Ps.transition=s}}function JR(t,e,n,r){var i=ve,s=Ps.transition;Ps.transition=null;try{ve=4,bp(t,e,n,r)}finally{ve=i,Ps.transition=s}}function bp(t,e,n,r){if(Bu){var i=Xf(t,e,n,r);if(i===null)sf(t,e,r,Gu,n),Uy(t,r);else if(zR(i,t,e,n,r))r.stopPropagation();else if(Uy(t,r),e&4&&-1<$R.indexOf(t)){for(;i!==null;){var s=ul(i);if(s!==null&&bI(s),s=Xf(t,e,n,r),s===null&&sf(t,e,r,Gu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sf(t,e,r,null,n)}}var Gu=null;function Xf(t,e,n,r){if(Gu=null,t=Vp(r),t=wi(t),t!==null)if(e=ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gu=t,null}function HI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LR()){case Lp:return 1;case VI:return 4;case Ou:case UR:return 16;case LI:return 536870912;default:return 16}default:return 16}}var Mr=null,Op=null,pu=null;function $I(){if(pu)return pu;var t,e=Op,n=e.length,r,i="value"in Mr?Mr.value:Mr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pu=i.slice(t,1<r?1-r:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wl(){return!0}function by(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wl:by,this.isPropagationStopped=by,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qp=Jt(yo),ll=De({},yo,{view:0,detail:0}),QR=Jt(ll),Qd,Yd,Xo,Vc=De({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xo&&(Xo&&t.type==="mousemove"?(Qd=t.screenX-Xo.screenX,Yd=t.screenY-Xo.screenY):Yd=Qd=0,Xo=t),Qd)},movementY:function(t){return"movementY"in t?t.movementY:Yd}}),Oy=Jt(Vc),YR=De({},Vc,{dataTransfer:0}),XR=Jt(YR),ZR=De({},ll,{relatedTarget:0}),Xd=Jt(ZR),jR=De({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),eP=Jt(jR),tP=De({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nP=Jt(tP),rP=De({},yo,{data:0}),qy=Jt(rP),iP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oP[t])?!!e[t]:!1}function Bp(){return aP}var lP=De({},ll,{key:function(t){if(t.key){var e=iP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uP=Jt(lP),cP=De({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=Jt(cP),dP=De({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),fP=Jt(dP),hP=De({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),pP=Jt(hP),mP=De({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gP=Jt(mP),yP=[9,13,27,32],Gp=Yn&&"CompositionEvent"in window,pa=null;Yn&&"documentMode"in document&&(pa=document.documentMode);var _P=Yn&&"TextEvent"in window&&!pa,zI=Yn&&(!Gp||pa&&8<pa&&11>=pa),Gy=" ",Hy=!1;function WI(t,e){switch(t){case"keyup":return yP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function vP(t,e){switch(t){case"compositionend":return KI(e);case"keypress":return e.which!==32?null:(Hy=!0,Gy);case"textInput":return t=e.data,t===Gy&&Hy?null:t;default:return null}}function EP(t,e){if(ps)return t==="compositionend"||!Gp&&WI(t,e)?(t=$I(),pu=Op=Mr=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zI&&e.locale!=="ko"?null:e.data;default:return null}}var TP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TP[t.type]:e==="textarea"}function JI(t,e,n,r){CI(r),e=Hu(e,"onChange"),0<e.length&&(n=new qp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ma=null,Va=null;function IP(t){sw(t,0)}function Lc(t){var e=ys(t);if(_I(e))return t}function wP(t,e){if(t==="change")return e}var QI=!1;if(Yn){var Zd;if(Yn){var jd="oninput"in document;if(!jd){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),jd=typeof zy.oninput=="function"}Zd=jd}else Zd=!1;QI=Zd&&(!document.documentMode||9<document.documentMode)}function Wy(){ma&&(ma.detachEvent("onpropertychange",YI),Va=ma=null)}function YI(t){if(t.propertyName==="value"&&Lc(Va)){var e=[];JI(e,Va,t,Vp(t)),NI(IP,e)}}function SP(t,e,n){t==="focusin"?(Wy(),ma=e,Va=n,ma.attachEvent("onpropertychange",YI)):t==="focusout"&&Wy()}function CP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(Va)}function AP(t,e){if(t==="click")return Lc(e)}function RP(t,e){if(t==="input"||t==="change")return Lc(e)}function PP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:PP;function La(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Df.call(e,i)||!_n(t[i],e[i]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function XI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZI(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NP(t){var e=ZI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XI(n.ownerDocument.documentElement,n)){if(r!==null&&Hp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Jy(n,s);var o=Jy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kP=Yn&&"documentMode"in document&&11>=document.documentMode,ms=null,Zf=null,ga=null,jf=!1;function Qy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jf||ms==null||ms!==Uu(r)||(r=ms,"selectionStart"in r&&Hp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ga&&La(ga,r)||(ga=r,r=Hu(Zf,"onSelect"),0<r.length&&(e=new qp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ms)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},ef={},jI={};Yn&&(jI=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Uc(t){if(ef[t])return ef[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jI)return ef[t]=e[n];return t}var ew=Uc("animationend"),tw=Uc("animationiteration"),nw=Uc("animationstart"),rw=Uc("transitionend"),iw=new Map,Yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){iw.set(t,e),Zi(e,[t])}for(var tf=0;tf<Yy.length;tf++){var nf=Yy[tf],xP=nf.toLowerCase(),MP=nf[0].toUpperCase()+nf.slice(1);li(xP,"on"+MP)}li(ew,"onAnimationEnd");li(tw,"onAnimationIteration");li(nw,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(rw,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DP=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Xy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xR(r,e,void 0,t),t.currentTarget=null}function sw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Xy(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Xy(i,a,u),s=l}}}if(bu)throw t=Jf,bu=!1,Jf=null,t}function Se(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(ow(e,t,2,!1),n.add(r))}function rf(t,e,n){var r=0;e&&(r|=4),ow(n,t,r,e)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[Jl]){t[Jl]=!0,hI.forEach(function(n){n!=="selectionchange"&&(DP.has(n)||rf(n,!1,t),rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jl]||(e[Jl]=!0,rf("selectionchange",!1,e))}}function ow(t,e,n,r){switch(HI(e)){case 1:var i=KR;break;case 4:i=JR;break;default:i=bp}n=i.bind(null,e,n,t),i=void 0,!Kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}NI(function(){var u=s,h=Vp(n),p=[];e:{var m=iw.get(t);if(m!==void 0){var _=qp,R=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":_=uP;break;case"focusin":R="focus",_=Xd;break;case"focusout":R="blur",_=Xd;break;case"beforeblur":case"afterblur":_=Xd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=XR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=fP;break;case ew:case tw:case nw:_=eP;break;case rw:_=pP;break;case"scroll":_=QR;break;case"wheel":_=gP;break;case"copy":case"cut":case"paste":_=nP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=By}var P=(e&4)!==0,x=!P&&t==="scroll",w=P?m!==null?m+"Capture":null:m;P=[];for(var E=u,C;E!==null;){C=E;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,w!==null&&(V=ka(E,w),V!=null&&P.push(Fa(E,V,C)))),x)break;E=E.return}0<P.length&&(m=new _(m,R,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==zf&&(R=n.relatedTarget||n.fromElement)&&(wi(R)||R[Xn]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=u,R=R?wi(R):null,R!==null&&(x=ji(R),R!==x||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=u),_!==R)){if(P=Oy,V="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(P=By,V="onPointerLeave",w="onPointerEnter",E="pointer"),x=_==null?m:ys(_),C=R==null?m:ys(R),m=new P(V,E+"leave",_,n,h),m.target=x,m.relatedTarget=C,V=null,wi(h)===u&&(P=new P(w,E+"enter",R,n,h),P.target=C,P.relatedTarget=x,V=P),x=V,_&&R)t:{for(P=_,w=R,E=0,C=P;C;C=os(C))E++;for(C=0,V=w;V;V=os(V))C++;for(;0<E-C;)P=os(P),E--;for(;0<C-E;)w=os(w),C--;for(;E--;){if(P===w||w!==null&&P===w.alternate)break t;P=os(P),w=os(w)}P=null}else P=null;_!==null&&Zy(p,m,_,P,!1),R!==null&&x!==null&&Zy(p,x,R,P,!0)}}e:{if(m=u?ys(u):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=wP;else if($y(m))if(QI)L=RP;else{L=CP;var b=SP}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=AP);if(L&&(L=L(t,u))){JI(p,L,n,h);break e}b&&b(t,m,u),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&qf(m,"number",m.value)}switch(b=u?ys(u):window,t){case"focusin":($y(b)||b.contentEditable==="true")&&(ms=b,Zf=u,ga=null);break;case"focusout":ga=Zf=ms=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,Qy(p,n,h);break;case"selectionchange":if(kP)break;case"keydown":case"keyup":Qy(p,n,h)}var S;if(Gp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ps?WI(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(zI&&n.locale!=="ko"&&(ps||v!=="onCompositionStart"?v==="onCompositionEnd"&&ps&&(S=$I()):(Mr=h,Op="value"in Mr?Mr.value:Mr.textContent,ps=!0)),b=Hu(u,v),0<b.length&&(v=new qy(v,t,null,n,h),p.push({event:v,listeners:b}),S?v.data=S:(S=KI(n),S!==null&&(v.data=S)))),(S=_P?vP(t,n):EP(t,n))&&(u=Hu(u,"onBeforeInput"),0<u.length&&(h=new qy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=S))}sw(p,e)})}function Fa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ka(t,n),s!=null&&r.unshift(Fa(t,s,i)),s=ka(t,e),s!=null&&r.push(Fa(t,s,i))),t=t.return}return r}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ka(n,s),l!=null&&o.unshift(Fa(n,l,a))):i||(l=ka(n,s),l!=null&&o.push(Fa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VP=/\r\n?/g,LP=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(VP,`
`).replace(LP,"")}function Ql(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(H(425))}function $u(){}var eh=null,th=null;function nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,UP=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,FP=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(t){return e_.resolve(null).then(t).catch(bP)}:rh;function bP(t){setTimeout(function(){throw t})}function of(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Da(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Nn="__reactFiber$"+_o,ba="__reactProps$"+_o,Xn="__reactContainer$"+_o,ih="__reactEvents$"+_o,OP="__reactListeners$"+_o,qP="__reactHandles$"+_o;function wi(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t_(t);t!==null;){if(n=t[Nn])return n;t=t_(t)}return e}t=n,n=t.parentNode}return null}function ul(t){return t=t[Nn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Fc(t){return t[ba]||null}var sh=[],_s=-1;function ui(t){return{current:t}}function Re(t){0>_s||(t.current=sh[_s],sh[_s]=null,_s--)}function Ie(t,e){_s++,sh[_s]=t.current,t.current=e}var Zr={},Et=ui(Zr),Ft=ui(!1),Bi=Zr;function js(t,e){var n=t.type.contextTypes;if(!n)return Zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function zu(){Re(Ft),Re(Et)}function n_(t,e,n){if(Et.current!==Zr)throw Error(H(168));Ie(Et,e),Ie(Ft,n)}function aw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,SR(t)||"Unknown",i));return De({},n,r)}function Wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,Bi=Et.current,Ie(Et,t),Ie(Ft,Ft.current),!0}function r_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=aw(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,Re(Ft),Re(Et),Ie(Et,t)):Re(Ft),Ie(Ft,n)}var Bn=null,bc=!1,af=!1;function lw(t){Bn===null?Bn=[t]:Bn.push(t)}function BP(t){bc=!0,lw(t)}function ci(){if(!af&&Bn!==null){af=!0;var t=0,e=ve;try{var n=Bn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,bc=!1}catch(i){throw Bn!==null&&(Bn=Bn.slice(t+1)),DI(Lp,ci),i}finally{ve=e,af=!1}}return null}var vs=[],Es=0,Ku=null,Ju=0,Xt=[],Zt=0,Gi=null,zn=1,Wn="";function Ei(t,e){vs[Es++]=Ju,vs[Es++]=Ku,Ku=t,Ju=e}function uw(t,e,n){Xt[Zt++]=zn,Xt[Zt++]=Wn,Xt[Zt++]=Gi,Gi=t;var r=zn;t=Wn;var i=32-mn(r)-1;r&=~(1<<i),n+=1;var s=32-mn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zn=1<<32-mn(e)+i|n<<i|r,Wn=s+t}else zn=1<<s|n<<i|r,Wn=t}function $p(t){t.return!==null&&(Ei(t,1),uw(t,1,0))}function zp(t){for(;t===Ku;)Ku=vs[--Es],vs[Es]=null,Ju=vs[--Es],vs[Es]=null;for(;t===Gi;)Gi=Xt[--Zt],Xt[Zt]=null,Wn=Xt[--Zt],Xt[Zt]=null,zn=Xt[--Zt],Xt[Zt]=null}var $t=null,Gt=null,Ne=!1,fn=null;function cw(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Gt=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:zn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Gt=null,!0):!1;default:return!1}}function oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ah(t){if(Ne){var e=Gt;if(e){var n=e;if(!i_(t,e)){if(oh(t))throw Error(H(418));e=Or(n.nextSibling);var r=$t;e&&i_(t,e)?cw(r,n):(t.flags=t.flags&-4097|2,Ne=!1,$t=t)}}else{if(oh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ne=!1,$t=t}}}function s_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Yl(t){if(t!==$t)return!1;if(!Ne)return s_(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nh(t.type,t.memoizedProps)),e&&(e=Gt)){if(oh(t))throw dw(),Error(H(418));for(;e;)cw(t,e),e=Or(e.nextSibling)}if(s_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=$t?Or(t.stateNode.nextSibling):null;return!0}function dw(){for(var t=Gt;t;)t=Or(t.nextSibling)}function eo(){Gt=$t=null,Ne=!1}function Wp(t){fn===null?fn=[t]:fn.push(t)}var GP=ir.ReactCurrentBatchConfig;function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Xl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o_(t){var e=t._init;return e(t._payload)}function fw(t){function e(w,E){if(t){var C=w.deletions;C===null?(w.deletions=[E],w.flags|=16):C.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function i(w,E){return w=Hr(w,E),w.index=0,w.sibling=null,w}function s(w,E,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<E?(w.flags|=2,E):C):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,E,C,V){return E===null||E.tag!==6?(E=pf(C,w.mode,V),E.return=w,E):(E=i(E,C),E.return=w,E)}function l(w,E,C,V){var L=C.type;return L===hs?h(w,E,C.props.children,V,C.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&o_(L)===E.type)?(V=i(E,C.props),V.ref=Zo(w,E,C),V.return=w,V):(V=Iu(C.type,C.key,C.props,null,w.mode,V),V.ref=Zo(w,E,C),V.return=w,V)}function u(w,E,C,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=mf(C,w.mode,V),E.return=w,E):(E=i(E,C.children||[]),E.return=w,E)}function h(w,E,C,V,L){return E===null||E.tag!==7?(E=Oi(C,w.mode,V,L),E.return=w,E):(E=i(E,C),E.return=w,E)}function p(w,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=pf(""+E,w.mode,C),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ql:return C=Iu(E.type,E.key,E.props,null,w.mode,C),C.ref=Zo(w,null,E),C.return=w,C;case fs:return E=mf(E,w.mode,C),E.return=w,E;case yr:var V=E._init;return p(w,V(E._payload),C)}if(sa(E)||Ko(E))return E=Oi(E,w.mode,C,null),E.return=w,E;Xl(w,E)}return null}function m(w,E,C,V){var L=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:a(w,E,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ql:return C.key===L?l(w,E,C,V):null;case fs:return C.key===L?u(w,E,C,V):null;case yr:return L=C._init,m(w,E,L(C._payload),V)}if(sa(C)||Ko(C))return L!==null?null:h(w,E,C,V,null);Xl(w,C)}return null}function _(w,E,C,V,L){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(C)||null,a(E,w,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ql:return w=w.get(V.key===null?C:V.key)||null,l(E,w,V,L);case fs:return w=w.get(V.key===null?C:V.key)||null,u(E,w,V,L);case yr:var b=V._init;return _(w,E,C,b(V._payload),L)}if(sa(V)||Ko(V))return w=w.get(C)||null,h(E,w,V,L,null);Xl(E,V)}return null}function R(w,E,C,V){for(var L=null,b=null,S=E,v=E=0,I=null;S!==null&&v<C.length;v++){S.index>v?(I=S,S=null):I=S.sibling;var A=m(w,S,C[v],V);if(A===null){S===null&&(S=I);break}t&&S&&A.alternate===null&&e(w,S),E=s(A,E,v),b===null?L=A:b.sibling=A,b=A,S=I}if(v===C.length)return n(w,S),Ne&&Ei(w,v),L;if(S===null){for(;v<C.length;v++)S=p(w,C[v],V),S!==null&&(E=s(S,E,v),b===null?L=S:b.sibling=S,b=S);return Ne&&Ei(w,v),L}for(S=r(w,S);v<C.length;v++)I=_(S,w,v,C[v],V),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?v:I.key),E=s(I,E,v),b===null?L=I:b.sibling=I,b=I);return t&&S.forEach(function(k){return e(w,k)}),Ne&&Ei(w,v),L}function P(w,E,C,V){var L=Ko(C);if(typeof L!="function")throw Error(H(150));if(C=L.call(C),C==null)throw Error(H(151));for(var b=L=null,S=E,v=E=0,I=null,A=C.next();S!==null&&!A.done;v++,A=C.next()){S.index>v?(I=S,S=null):I=S.sibling;var k=m(w,S,A.value,V);if(k===null){S===null&&(S=I);break}t&&S&&k.alternate===null&&e(w,S),E=s(k,E,v),b===null?L=k:b.sibling=k,b=k,S=I}if(A.done)return n(w,S),Ne&&Ei(w,v),L;if(S===null){for(;!A.done;v++,A=C.next())A=p(w,A.value,V),A!==null&&(E=s(A,E,v),b===null?L=A:b.sibling=A,b=A);return Ne&&Ei(w,v),L}for(S=r(w,S);!A.done;v++,A=C.next())A=_(S,w,v,A.value,V),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?v:A.key),E=s(A,E,v),b===null?L=A:b.sibling=A,b=A);return t&&S.forEach(function(M){return e(w,M)}),Ne&&Ei(w,v),L}function x(w,E,C,V){if(typeof C=="object"&&C!==null&&C.type===hs&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ql:e:{for(var L=C.key,b=E;b!==null;){if(b.key===L){if(L=C.type,L===hs){if(b.tag===7){n(w,b.sibling),E=i(b,C.props.children),E.return=w,w=E;break e}}else if(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&o_(L)===b.type){n(w,b.sibling),E=i(b,C.props),E.ref=Zo(w,b,C),E.return=w,w=E;break e}n(w,b);break}else e(w,b);b=b.sibling}C.type===hs?(E=Oi(C.props.children,w.mode,V,C.key),E.return=w,w=E):(V=Iu(C.type,C.key,C.props,null,w.mode,V),V.ref=Zo(w,E,C),V.return=w,w=V)}return o(w);case fs:e:{for(b=C.key;E!==null;){if(E.key===b)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(w,E.sibling),E=i(E,C.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=mf(C,w.mode,V),E.return=w,w=E}return o(w);case yr:return b=C._init,x(w,E,b(C._payload),V)}if(sa(C))return R(w,E,C,V);if(Ko(C))return P(w,E,C,V);Xl(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(w,E.sibling),E=i(E,C),E.return=w,w=E):(n(w,E),E=pf(C,w.mode,V),E.return=w,w=E),o(w)):n(w,E)}return x}var to=fw(!0),hw=fw(!1),Qu=ui(null),Yu=null,Ts=null,Kp=null;function Jp(){Kp=Ts=Yu=null}function Qp(t){var e=Qu.current;Re(Qu),t._currentValue=e}function lh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){Yu=t,Kp=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Kp!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(Yu===null)throw Error(H(308));Ts=t,Yu.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var Si=null;function Yp(t){Si===null?Si=[t]:Si.push(t)}function pw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function Xp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zn(t,n)}return i=r.interleaved,i===null?(e.next=e,Yp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zn(t,n)}function gu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Up(t,n)}}function a_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xu(t,e,n,r){var i=t.updateQueue;_r=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,_=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var R=t,P=a;switch(m=e,_=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){p=R.call(_,p,m);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,m=typeof R=="function"?R.call(_,p,m):R,m==null)break e;p=De({},p,m);break e;case 2:_r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=p):h=h.next=_,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$i|=o,t.lanes=o,t.memoizedState=p}}function l_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var cl={},xn=ui(cl),Oa=ui(cl),qa=ui(cl);function Ci(t){if(t===cl)throw Error(H(174));return t}function Zp(t,e){switch(Ie(qa,e),Ie(Oa,t),Ie(xn,cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gf(e,t)}Re(xn),Ie(xn,e)}function no(){Re(xn),Re(Oa),Re(qa)}function gw(t){Ci(qa.current);var e=Ci(xn.current),n=Gf(e,t.type);e!==n&&(Ie(Oa,t),Ie(xn,n))}function jp(t){Oa.current===t&&(Re(xn),Re(Oa))}var xe=ui(0);function Zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lf=[];function em(){for(var t=0;t<lf.length;t++)lf[t]._workInProgressVersionPrimary=null;lf.length=0}var yu=ir.ReactCurrentDispatcher,uf=ir.ReactCurrentBatchConfig,Hi=0,Me=null,Je=null,rt=null,ju=!1,ya=!1,Ba=0,HP=0;function ht(){throw Error(H(321))}function tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function nm(t,e,n,r,i,s){if(Hi=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yu.current=t===null||t.memoizedState===null?KP:JP,t=n(r,i),ya){s=0;do{if(ya=!1,Ba=0,25<=s)throw Error(H(301));s+=1,rt=Je=null,e.updateQueue=null,yu.current=QP,t=n(r,i)}while(ya)}if(yu.current=ec,e=Je!==null&&Je.next!==null,Hi=0,rt=Je=Me=null,ju=!1,e)throw Error(H(300));return t}function rm(){var t=Ba!==0;return Ba=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function sn(){if(Je===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Je=t;else{if(t===null)throw Error(H(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function Ga(t,e){return typeof e=="function"?e(t):e}function cf(t){var e=sn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Hi&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Me.lanes|=h,$i|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,_n(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,$i|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function df(t){var e=sn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_n(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yw(){}function _w(t,e){var n=Me,r=sn(),i=e(),s=!_n(r.memoizedState,i);if(s&&(r.memoizedState=i,Ut=!0),r=r.queue,im(Tw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Ha(9,Ew.bind(null,n,r,i,e),void 0,null),it===null)throw Error(H(349));Hi&30||vw(n,e,i)}return i}function vw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ew(t,e,n,r){e.value=n,e.getSnapshot=r,Iw(e)&&ww(t)}function Tw(t,e,n){return n(function(){Iw(e)&&ww(t)})}function Iw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function ww(t){var e=Zn(t,1);e!==null&&gn(e,t,1,-1)}function u_(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=WP.bind(null,Me,t),[e.memoizedState,t]}function Ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sw(){return sn().memoizedState}function _u(t,e,n,r){var i=Sn();Me.flags|=t,i.memoizedState=Ha(1|e,n,void 0,r===void 0?null:r)}function Oc(t,e,n,r){var i=sn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&tm(r,o.deps)){i.memoizedState=Ha(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Ha(1|e,n,s,r)}function c_(t,e){return _u(8390656,8,t,e)}function im(t,e){return Oc(2048,8,t,e)}function Cw(t,e){return Oc(4,2,t,e)}function Aw(t,e){return Oc(4,4,t,e)}function Rw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pw(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4,4,Rw.bind(null,e,t),n)}function sm(){}function Nw(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kw(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xw(t,e,n){return Hi&21?(_n(n,e)||(n=UI(),Me.lanes|=n,$i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function $P(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=uf.transition;uf.transition={};try{t(!1),e()}finally{ve=n,uf.transition=r}}function Mw(){return sn().memoizedState}function zP(t,e,n){var r=Gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dw(t))Vw(e,n);else if(n=pw(t,e,n,r),n!==null){var i=Pt();gn(n,t,r,i),Lw(n,e,r)}}function WP(t,e,n){var r=Gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dw(t))Vw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,_n(a,o)){var l=e.interleaved;l===null?(i.next=i,Yp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pw(t,e,i,r),n!==null&&(i=Pt(),gn(n,t,r,i),Lw(n,e,r))}}function Dw(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Vw(t,e){ya=ju=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Up(t,n)}}var ec={readContext:rn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},KP={readContext:rn,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:c_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,Rw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zP.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:u_,useDebugValue:sm,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=u_(!1),e=t[0];return t=$P.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=Sn();if(Ne){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),it===null)throw Error(H(349));Hi&30||vw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,c_(Tw.bind(null,r,s,t),[t]),r.flags|=2048,Ha(9,Ew.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Sn(),e=it.identifierPrefix;if(Ne){var n=Wn,r=zn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ba++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JP={readContext:rn,useCallback:Nw,useContext:rn,useEffect:im,useImperativeHandle:Pw,useInsertionEffect:Cw,useLayoutEffect:Aw,useMemo:kw,useReducer:cf,useRef:Sw,useState:function(){return cf(Ga)},useDebugValue:sm,useDeferredValue:function(t){var e=sn();return xw(e,Je.memoizedState,t)},useTransition:function(){var t=cf(Ga)[0],e=sn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:_w,useId:Mw,unstable_isNewReconciler:!1},QP={readContext:rn,useCallback:Nw,useContext:rn,useEffect:im,useImperativeHandle:Pw,useInsertionEffect:Cw,useLayoutEffect:Aw,useMemo:kw,useReducer:df,useRef:Sw,useState:function(){return df(Ga)},useDebugValue:sm,useDeferredValue:function(t){var e=sn();return Je===null?e.memoizedState=t:xw(e,Je.memoizedState,t)},useTransition:function(){var t=df(Ga)[0],e=sn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:_w,useId:Mw,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qc={isMounted:function(t){return(t=t._reactInternals)?ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Gr(t),s=Qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=qr(t,s,i),e!==null&&(gn(e,t,i,r),gu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Gr(t),s=Qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qr(t,s,i),e!==null&&(gn(e,t,i,r),gu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Gr(t),i=Qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=qr(t,i,r),e!==null&&(gn(e,t,r,n),gu(e,t,r))}};function d_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!La(n,r)||!La(i,s):!0}function Uw(t,e,n){var r=!1,i=Zr,s=e.contextType;return typeof s=="object"&&s!==null?s=rn(s):(i=bt(e)?Bi:Et.current,r=e.contextTypes,s=(r=r!=null)?js(t,i):Zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function f_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qc.enqueueReplaceState(e,e.state,null)}function ch(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=rn(s):(s=bt(e)?Bi:Et.current,i.context=js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qc.enqueueReplaceState(i,i.state,null),Xu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=wR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ff(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YP=typeof WeakMap=="function"?WeakMap:Map;function Fw(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nc||(nc=!0,Th=r),dh(t,e)},n}function bw(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){dh(t,e),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function h_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cN.bind(null,t,e,n),e.then(t,t))}function p_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var XP=ir.ReactCurrentOwner,Ut=!1;function Rt(t,e,n,r){e.child=t===null?hw(e,null,n,r):to(e,t.child,n,r)}function g_(t,e,n,r,i){n=n.render;var s=e.ref;return Ns(e,i),r=nm(t,e,n,r,s,i),n=rm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jn(t,e,i)):(Ne&&n&&$p(e),e.flags|=1,Rt(t,e,r,i),e.child)}function y_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ow(t,e,s,r,i)):(t=Iu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:La,n(o,r)&&t.ref===e.ref)return jn(t,e,i)}return e.flags|=1,t=Hr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ow(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(La(s,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,jn(t,e,i)}return fh(t,e,n,r,i)}function qw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ws,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ws,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(ws,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ie(ws,Bt),Bt|=r;return Rt(t,e,i,n),e.child}function Bw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fh(t,e,n,r,i){var s=bt(n)?Bi:Et.current;return s=js(e,s),Ns(e,i),n=nm(t,e,n,r,s,i),r=rm(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jn(t,e,i)):(Ne&&r&&$p(e),e.flags|=1,Rt(t,e,n,i),e.child)}function __(t,e,n,r,i){if(bt(n)){var s=!0;Wu(e)}else s=!1;if(Ns(e,i),e.stateNode===null)vu(t,e),Uw(e,n,r),ch(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=rn(u):(u=bt(n)?Bi:Et.current,u=js(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&f_(e,o,r,u),_r=!1;var m=e.memoizedState;o.state=m,Xu(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Ft.current||_r?(typeof h=="function"&&(uh(e,n,h,r),l=e.memoizedState),(a=_r||d_(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ln(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=rn(l):(l=bt(n)?Bi:Et.current,l=js(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&f_(e,o,r,l),_r=!1,m=e.memoizedState,o.state=m,Xu(e,r,o,i);var R=e.memoizedState;a!==p||m!==R||Ft.current||_r?(typeof _=="function"&&(uh(e,n,_,r),R=e.memoizedState),(u=_r||d_(e,n,u,r,m,R,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return hh(t,e,n,r,s,i)}function hh(t,e,n,r,i,s){Bw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&r_(e,n,!1),jn(t,e,s);r=e.stateNode,XP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,s),e.child=to(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&r_(e,n,!0),e.child}function Gw(t){var e=t.stateNode;e.pendingContext?n_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(t,e.context,!1),Zp(t,e.containerInfo)}function v_(t,e,n,r,i){return eo(),Wp(i),e.flags|=256,Rt(t,e,n,r),e.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hw(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(xe,i&1),t===null)return ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hc(o,r,0,null),t=Oi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mh(n),e.memoizedState=ph,t):om(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ZP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hr(a,s):(s=Oi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?mh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ph,r}return s=t.child,t=s.sibling,r=Hr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function om(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zl(t,e,n,r){return r!==null&&Wp(r),to(e,t.child,null,n),t=om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ff(Error(H(422))),Zl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hc({mode:"visible",children:r.children},i,0,null),s=Oi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=mh(o),e.memoizedState=ph,s);if(!(e.mode&1))return Zl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=ff(s,r,void 0),Zl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ut||a){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(t,i),gn(r,t,i,-1))}return fm(),r=ff(Error(H(421))),Zl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=Or(i.nextSibling),$t=e,Ne=!0,fn=null,t!==null&&(Xt[Zt++]=zn,Xt[Zt++]=Wn,Xt[Zt++]=Gi,zn=t.id,Wn=t.overflow,Gi=e),e=om(e,r.children),e.flags|=4096,e)}function E_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lh(t.return,e,n)}function hf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $w(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E_(t,n,e);else if(t.tag===19)E_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hf(e,!0,n,null,s);break;case"together":hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jP(t,e,n){switch(e.tag){case 3:Gw(e),eo();break;case 5:gw(e);break;case 1:bt(e.type)&&Wu(e);break;case 4:Zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ie(Qu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?Hw(t,e,n):(Ie(xe,xe.current&1),t=jn(t,e,n),t!==null?t.sibling:null);Ie(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $w(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,qw(t,e,n)}return jn(t,e,n)}var zw,gh,Ww,Kw;zw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gh=function(){};Ww=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ci(xn.current);var s=null;switch(n){case"input":i=bf(t,i),r=bf(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Bf(t,i),r=Bf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}Hf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Kw=function(t,e,n,r){n!==r&&(e.flags|=4)};function jo(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eN(t,e,n){var r=e.pendingProps;switch(zp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return bt(e.type)&&zu(),pt(e),null;case 3:return r=e.stateNode,no(),Re(Ft),Re(Et),em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(Sh(fn),fn=null))),gh(t,e),pt(e),null;case 5:jp(e);var i=Ci(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return pt(e),null}if(t=Ci(xn.current),Yl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nn]=e,r[ba]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<aa.length;i++)Se(aa[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Ny(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":xy(r,s),Se("invalid",r)}Hf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ql(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ql(r.textContent,a,t),i=["children",""+a]):Pa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Bl(r),ky(r,s,!0);break;case"textarea":Bl(r),My(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$u)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[ba]=r,zw(t,e,!1,!1),e.stateNode=t;e:{switch(o=$f(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<aa.length;i++)Se(aa[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Ny(t,r),i=bf(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":xy(t,r),i=Bf(t,r),Se("invalid",t);break;default:i=r}Hf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?SI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&II(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Na(t,l):typeof l=="number"&&Na(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",t):l!=null&&kp(t,s,l,o))}switch(n){case"input":Bl(t),ky(t,r,!1);break;case"textarea":Bl(t),My(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)Kw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ci(qa.current),Ci(xn.current),Yl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(s=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Ql(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return pt(e),null;case 13:if(Re(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Gt!==null&&e.mode&1&&!(e.flags&128))dw(),eo(),e.flags|=98560,s=!1;else if(s=Yl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Nn]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else fn!==null&&(Sh(fn),fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Qe===0&&(Qe=3):fm())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return no(),gh(t,e),t===null&&Ua(e.stateNode.containerInfo),pt(e),null;case 10:return Qp(e.type._context),pt(e),null;case 17:return bt(e.type)&&zu(),pt(e),null;case 19:if(Re(xe),s=e.memoizedState,s===null)return pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)jo(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zu(t),o!==null){for(e.flags|=128,jo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>io&&(e.flags|=128,r=!0,jo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Zu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return pt(e),null}else 2*qe()-s.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,jo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=xe.current,Ie(xe,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return dm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function tN(t,e){switch(zp(e),e.tag){case 1:return bt(e.type)&&zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),Re(Ft),Re(Et),em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jp(e),null;case 13:if(Re(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(xe),null;case 4:return no(),null;case 10:return Qp(e.type._context),null;case 22:case 23:return dm(),null;case 24:return null;default:return null}}var jl=!1,yt=!1,nN=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function yh(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var T_=!1;function rN(t,e){if(eh=Bu,t=ZI(),Hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(th={focusedElem:t,selectionRange:n},Bu=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,x=R.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:ln(e.type,P),x);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(V){Fe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return R=T_,T_=!1,R}function _a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yh(e,n,s)}i=i.next}while(i!==r)}}function Bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jw(t){var e=t.alternate;e!==null&&(t.alternate=null,Jw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[ba],delete e[ih],delete e[OP],delete e[qP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qw(t){return t.tag===5||t.tag===3||t.tag===4}function I_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}function Eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Eh(t,e,n),t=t.sibling;t!==null;)Eh(t,e,n),t=t.sibling}var st=null,dn=!1;function pr(t,e,n){for(n=n.child;n!==null;)Yw(t,e,n),n=n.sibling}function Yw(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Dc,n)}catch{}switch(n.tag){case 5:yt||Is(n,e);case 6:var r=st,i=dn;st=null,pr(t,e,n),st=r,dn=i,st!==null&&(dn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(dn?(t=st,n=n.stateNode,t.nodeType===8?of(t.parentNode,n):t.nodeType===1&&of(t,n),Da(t)):of(st,n.stateNode));break;case 4:r=st,i=dn,st=n.stateNode.containerInfo,dn=!0,pr(t,e,n),st=r,dn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yh(n,e,o),i=i.next}while(i!==r)}pr(t,e,n);break;case 1:if(!yt&&(Is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,pr(t,e,n),yt=r):pr(t,e,n);break;default:pr(t,e,n)}}function w_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nN),e.forEach(function(r){var i=fN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,dn=!1;break e;case 3:st=a.stateNode.containerInfo,dn=!0;break e;case 4:st=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(st===null)throw Error(H(160));Yw(s,o,i),st=null,dn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xw(e,t),e=e.sibling}function Xw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),wn(t),r&4){try{_a(3,t,t.return),Bc(3,t)}catch(P){Fe(t,t.return,P)}try{_a(5,t,t.return)}catch(P){Fe(t,t.return,P)}}break;case 1:an(e,t),wn(t),r&512&&n!==null&&Is(n,n.return);break;case 5:if(an(e,t),wn(t),r&512&&n!==null&&Is(n,n.return),t.flags&32){var i=t.stateNode;try{Na(i,"")}catch(P){Fe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&vI(i,s),$f(a,o);var u=$f(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?SI(i,p):h==="dangerouslySetInnerHTML"?II(i,p):h==="children"?Na(i,p):kp(i,h,p,u)}switch(a){case"input":Of(i,s);break;case"textarea":EI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Cs(i,!!s.multiple,_,!1):m!==!!s.multiple&&(s.defaultValue!=null?Cs(i,!!s.multiple,s.defaultValue,!0):Cs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ba]=s}catch(P){Fe(t,t.return,P)}}break;case 6:if(an(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Fe(t,t.return,P)}}break;case 3:if(an(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Da(e.containerInfo)}catch(P){Fe(t,t.return,P)}break;case 4:an(e,t),wn(t);break;case 13:an(e,t),wn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(um=qe())),r&4&&w_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(u=yt)||h,an(e,t),yt=u):an(e,t),wn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(p=Q=h;Q!==null;){switch(m=Q,_=m.child,m.tag){case 0:case 11:case 14:case 15:_a(4,m,m.return);break;case 1:Is(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Fe(r,n,P)}}break;case 5:Is(m,m.return);break;case 22:if(m.memoizedState!==null){C_(p);continue}}_!==null?(_.return=m,Q=_):C_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wI("display",o))}catch(P){Fe(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(P){Fe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:an(e,t),wn(t),r&4&&w_(t);break;case 21:break;default:an(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Na(i,""),r.flags&=-33);var s=I_(t);Eh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I_(t);vh(t,a,o);break;default:throw Error(H(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iN(t,e,n){Q=t,Zw(t)}function Zw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yt;a=jl;var u=yt;if(jl=o,(yt=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?A_(i):l!==null?(l.return=o,Q=l):A_(i);for(;s!==null;)Q=s,Zw(s),s=s.sibling;Q=i,jl=a,yt=u}S_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):S_(t)}}function S_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&l_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Da(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}yt||e.flags&512&&_h(e)}catch(m){Fe(e,e.return,m)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function C_(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function A_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bc(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var s=e.return;try{_h(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{_h(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var sN=Math.ceil,tc=ir.ReactCurrentDispatcher,am=ir.ReactCurrentOwner,tn=ir.ReactCurrentBatchConfig,me=0,it=null,He=null,ut=0,Bt=0,ws=ui(0),Qe=0,$a=null,$i=0,Gc=0,lm=0,va=null,Vt=null,um=0,io=1/0,qn=null,nc=!1,Th=null,Br=null,eu=!1,Dr=null,rc=0,Ea=0,Ih=null,Eu=-1,Tu=0;function Pt(){return me&6?qe():Eu!==-1?Eu:Eu=qe()}function Gr(t){return t.mode&1?me&2&&ut!==0?ut&-ut:GP.transition!==null?(Tu===0&&(Tu=UI()),Tu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:HI(t.type)),t):1}function gn(t,e,n,r){if(50<Ea)throw Ea=0,Ih=null,Error(H(185));al(t,n,r),(!(me&2)||t!==it)&&(t===it&&(!(me&2)&&(Gc|=n),Qe===4&&Er(t,ut)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(io=qe()+500,bc&&ci()))}function Ot(t,e){var n=t.callbackNode;GR(t,e);var r=qu(t,t===it?ut:0);if(r===0)n!==null&&Ly(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ly(n),e===1)t.tag===0?BP(R_.bind(null,t)):lw(R_.bind(null,t)),FP(function(){!(me&6)&&ci()}),n=null;else{switch(FI(r)){case 1:n=Lp;break;case 4:n=VI;break;case 16:n=Ou;break;case 536870912:n=LI;break;default:n=Ou}n=oS(n,jw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jw(t,e){if(Eu=-1,Tu=0,me&6)throw Error(H(327));var n=t.callbackNode;if(ks()&&t.callbackNode!==n)return null;var r=qu(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ic(t,r);else{e=r;var i=me;me|=2;var s=tS();(it!==t||ut!==e)&&(qn=null,io=qe()+500,bi(t,e));do try{lN();break}catch(a){eS(t,a)}while(!0);Jp(),tc.current=s,me=i,He!==null?e=0:(it=null,ut=0,e=Qe)}if(e!==0){if(e===2&&(i=Qf(t),i!==0&&(r=i,e=wh(t,i))),e===1)throw n=$a,bi(t,0),Er(t,r),Ot(t,qe()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!oN(i)&&(e=ic(t,r),e===2&&(s=Qf(t),s!==0&&(r=s,e=wh(t,s))),e===1))throw n=$a,bi(t,0),Er(t,r),Ot(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Ti(t,Vt,qn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=um+500-qe(),10<e)){if(qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rh(Ti.bind(null,t,Vt,qn),e);break}Ti(t,Vt,qn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sN(r/1960))-r,10<r){t.timeoutHandle=rh(Ti.bind(null,t,Vt,qn),r);break}Ti(t,Vt,qn);break;case 5:Ti(t,Vt,qn);break;default:throw Error(H(329))}}}return Ot(t,qe()),t.callbackNode===n?jw.bind(null,t):null}function wh(t,e){var n=va;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=ic(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Sh(e)),t}function Sh(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function oN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_n(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~lm,e&=~Gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function R_(t){if(me&6)throw Error(H(327));ks();var e=qu(t,0);if(!(e&1))return Ot(t,qe()),null;var n=ic(t,e);if(t.tag!==0&&n===2){var r=Qf(t);r!==0&&(e=r,n=wh(t,r))}if(n===1)throw n=$a,bi(t,0),Er(t,e),Ot(t,qe()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,Vt,qn),Ot(t,qe()),null}function cm(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(io=qe()+500,bc&&ci())}}function zi(t){Dr!==null&&Dr.tag===0&&!(me&6)&&ks();var e=me;me|=1;var n=tn.transition,r=ve;try{if(tn.transition=null,ve=1,t)return t()}finally{ve=r,tn.transition=n,me=e,!(me&6)&&ci()}}function dm(){Bt=ws.current,Re(ws)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UP(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(zp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:no(),Re(Ft),Re(Et),em();break;case 5:jp(r);break;case 4:no();break;case 13:Re(xe);break;case 19:Re(xe);break;case 10:Qp(r.type._context);break;case 22:case 23:dm()}n=n.return}if(it=t,He=t=Hr(t.current,null),ut=Bt=e,Qe=0,$a=null,lm=Gc=$i=0,Vt=va=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Si=null}return t}function eS(t,e){do{var n=He;try{if(Jp(),yu.current=ec,ju){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ju=!1}if(Hi=0,rt=Je=Me=null,ya=!1,Ba=0,am.current=null,n===null||n.return===null){Qe=1,$a=e,He=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=p_(o);if(_!==null){_.flags&=-257,m_(_,o,a,s,e),_.mode&1&&h_(s,u,e),e=_,l=u;var R=e.updateQueue;if(R===null){var P=new Set;P.add(l),e.updateQueue=P}else R.add(l);break e}else{if(!(e&1)){h_(s,u,e),fm();break e}l=Error(H(426))}}else if(Ne&&a.mode&1){var x=p_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),m_(x,o,a,s,e),Wp(ro(l,a));break e}}s=l=ro(l,a),Qe!==4&&(Qe=2),va===null?va=[s]:va.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Fw(s,l,e);a_(s,w);break e;case 1:a=l;var E=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Br===null||!Br.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=bw(s,a,e);a_(s,V);break e}}s=s.return}while(s!==null)}rS(n)}catch(L){e=L,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function tS(){var t=tc.current;return tc.current=ec,t===null?ec:t}function fm(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),it===null||!($i&268435455)&&!(Gc&268435455)||Er(it,ut)}function ic(t,e){var n=me;me|=2;var r=tS();(it!==t||ut!==e)&&(qn=null,bi(t,e));do try{aN();break}catch(i){eS(t,i)}while(!0);if(Jp(),me=n,tc.current=r,He!==null)throw Error(H(261));return it=null,ut=0,Qe}function aN(){for(;He!==null;)nS(He)}function lN(){for(;He!==null&&!DR();)nS(He)}function nS(t){var e=sS(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?rS(t):He=e,am.current=null}function rS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tN(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=eN(n,e,Bt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function Ti(t,e,n){var r=ve,i=tn.transition;try{tn.transition=null,ve=1,uN(t,e,n,r)}finally{tn.transition=i,ve=r}return null}function uN(t,e,n,r){do ks();while(Dr!==null);if(me&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HR(t,s),t===it&&(He=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eu||(eu=!0,oS(Ou,function(){return ks(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=ve;ve=1;var a=me;me|=4,am.current=null,rN(t,n),Xw(n,t),NP(th),Bu=!!eh,th=eh=null,t.current=n,iN(n),VR(),me=a,ve=o,tn.transition=s}else t.current=n;if(eu&&(eu=!1,Dr=t,rc=i),s=t.pendingLanes,s===0&&(Br=null),FR(n.stateNode),Ot(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nc)throw nc=!1,t=Th,Th=null,t;return rc&1&&t.tag!==0&&ks(),s=t.pendingLanes,s&1?t===Ih?Ea++:(Ea=0,Ih=t):Ea=0,ci(),null}function ks(){if(Dr!==null){var t=FI(rc),e=tn.transition,n=ve;try{if(tn.transition=null,ve=16>t?16:t,Dr===null)var r=!1;else{if(t=Dr,Dr=null,rc=0,me&6)throw Error(H(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:_a(8,h,s)}var p=h.child;if(p!==null)p.return=h,Q=p;else for(;Q!==null;){h=Q;var m=h.sibling,_=h.return;if(Jw(h),h===u){Q=null;break}if(m!==null){m.return=_,Q=m;break}Q=_}}}var R=s.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_a(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Q=w;break e}Q=s.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Q=C;else e:for(o=E;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bc(9,a)}}catch(L){Fe(a,a.return,L)}if(a===o){Q=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,Q=V;break e}Q=a.return}}if(me=i,ci(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Dc,t)}catch{}r=!0}return r}finally{ve=n,tn.transition=e}}return!1}function P_(t,e,n){e=ro(n,e),e=Fw(t,e,1),t=qr(t,e,1),e=Pt(),t!==null&&(al(t,1,e),Ot(t,e))}function Fe(t,e,n){if(t.tag===3)P_(t,t,n);else for(;e!==null;){if(e.tag===3){P_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){t=ro(n,t),t=bw(e,t,1),e=qr(e,t,1),t=Pt(),e!==null&&(al(e,1,t),Ot(e,t));break}}e=e.return}}function cN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Qe===4||Qe===3&&(ut&130023424)===ut&&500>qe()-um?bi(t,0):lm|=n),Ot(t,e)}function iS(t,e){e===0&&(t.mode&1?(e=$l,$l<<=1,!($l&130023424)&&($l=4194304)):e=1);var n=Pt();t=Zn(t,e),t!==null&&(al(t,e,n),Ot(t,n))}function dN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iS(t,n)}function fN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),iS(t,n)}var sS;sS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,jP(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Ne&&e.flags&1048576&&uw(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vu(t,e),t=e.pendingProps;var i=js(e,Et.current);Ns(e,n),i=nm(null,e,r,t,i,n);var s=rm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,Wu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xp(e),i.updater=qc,e.stateNode=i,i._reactInternals=e,ch(e,r,t,n),e=hh(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&$p(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=pN(r),t=ln(r,t),i){case 0:e=fh(null,e,r,t,n);break e;case 1:e=__(null,e,r,t,n);break e;case 11:e=g_(null,e,r,t,n);break e;case 14:e=y_(null,e,r,ln(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),fh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),__(t,e,r,i,n);case 3:e:{if(Gw(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mw(t,e),Xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ro(Error(H(423)),e),e=v_(t,e,r,n,i);break e}else if(r!==i){i=ro(Error(H(424)),e),e=v_(t,e,r,n,i);break e}else for(Gt=Or(e.stateNode.containerInfo.firstChild),$t=e,Ne=!0,fn=null,n=hw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===i){e=jn(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return gw(e),t===null&&ah(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,nh(r,i)?o=null:s!==null&&nh(r,s)&&(e.flags|=32),Bw(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&ah(e),null;case 13:return Hw(t,e,n);case 4:return Zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),g_(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ie(Qu,r._currentValue),r._currentValue=o,s!==null)if(_n(s.value,o)){if(s.children===i.children&&!Ft.current){e=jn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lh(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ns(e,n),i=rn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),y_(t,e,r,i,n);case 15:return Ow(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),vu(t,e),e.tag=1,bt(r)?(t=!0,Wu(e)):t=!1,Ns(e,n),Uw(e,r,i),ch(e,r,i,n),hh(null,e,r,!0,t,n);case 19:return $w(t,e,n);case 22:return qw(t,e,n)}throw Error(H(156,e.tag))};function oS(t,e){return DI(t,e)}function hN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new hN(t,e,n,r)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pN(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mp)return 11;if(t===Dp)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hs:return Oi(n.children,i,s,e);case xp:o=8,i|=8;break;case Vf:return t=en(12,n,e,i|2),t.elementType=Vf,t.lanes=s,t;case Lf:return t=en(13,n,e,i),t.elementType=Lf,t.lanes=s,t;case Uf:return t=en(19,n,e,i),t.elementType=Uf,t.lanes=s,t;case gI:return Hc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pI:o=10;break e;case mI:o=9;break e;case Mp:o=11;break e;case Dp:o=14;break e;case yr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=en(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oi(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Hc(t,e,n,r){return t=en(22,t,r,e),t.elementType=gI,t.lanes=n,t.stateNode={isHidden:!1},t}function pf(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function mf(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pm(t,e,n,r,i,s,o,a,l){return t=new mN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=en(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xp(s),t}function gN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aS(t){if(!t)return Zr;t=t._reactInternals;e:{if(ji(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(bt(n))return aw(t,n,e)}return e}function lS(t,e,n,r,i,s,o,a,l){return t=pm(n,r,!0,t,i,s,o,a,l),t.context=aS(null),n=t.current,r=Pt(),i=Gr(n),s=Qn(r,i),s.callback=e??null,qr(n,s,i),t.current.lanes=i,al(t,i,r),Ot(t,r),t}function $c(t,e,n,r){var i=e.current,s=Pt(),o=Gr(i);return n=aS(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qr(i,e,o),t!==null&&(gn(t,i,o,s),gu(t,i,o)),o}function sc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mm(t,e){N_(t,e),(t=t.alternate)&&N_(t,e)}function yN(){return null}var uS=typeof reportError=="function"?reportError:function(t){console.error(t)};function gm(t){this._internalRoot=t}zc.prototype.render=gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));$c(t,e,null,null)};zc.prototype.unmount=gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){$c(null,t,null,null)}),e[Xn]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=qI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&GI(t)}};function ym(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k_(){}function _N(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=sc(o);s.call(u)}}var o=lS(e,r,t,0,null,!1,!1,"",k_);return t._reactRootContainer=o,t[Xn]=o.current,Ua(t.nodeType===8?t.parentNode:t),zi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=sc(l);a.call(u)}}var l=pm(t,0,!1,null,null,!1,!1,"",k_);return t._reactRootContainer=l,t[Xn]=l.current,Ua(t.nodeType===8?t.parentNode:t),zi(function(){$c(e,l,n,r)}),l}function Kc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sc(o);a.call(l)}}$c(e,o,t,i)}else o=_N(n,e,t,i,r);return sc(o)}bI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(Up(e,n|1),Ot(e,qe()),!(me&6)&&(io=qe()+500,ci()))}break;case 13:zi(function(){var r=Zn(t,1);if(r!==null){var i=Pt();gn(r,t,1,i)}}),mm(t,1)}};Fp=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=Pt();gn(e,t,134217728,n)}mm(t,134217728)}};OI=function(t){if(t.tag===13){var e=Gr(t),n=Zn(t,e);if(n!==null){var r=Pt();gn(n,t,e,r)}mm(t,e)}};qI=function(){return ve};BI=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Wf=function(t,e,n){switch(e){case"input":if(Of(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fc(r);if(!i)throw Error(H(90));_I(r),Of(r,i)}}}break;case"textarea":EI(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};RI=cm;PI=zi;var vN={usingClientEntryPoint:!1,Events:[ul,ys,Fc,CI,AI,cm]},ea={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EN={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xI(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||yN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Dc=tu.inject(EN),kn=tu}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vN;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ym(e))throw Error(H(200));return gN(t,e,null,n)};Kt.createRoot=function(t,e){if(!ym(t))throw Error(H(299));var n=!1,r="",i=uS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pm(t,1,!1,null,null,n,!1,r,i),t[Xn]=e.current,Ua(t.nodeType===8?t.parentNode:t),new gm(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=xI(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return zi(t)};Kt.hydrate=function(t,e,n){if(!Wc(e))throw Error(H(200));return Kc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!ym(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lS(e,null,t,1,n??null,i,!1,s,o),t[Xn]=e.current,Ua(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zc(e)};Kt.render=function(t,e,n){if(!Wc(e))throw Error(H(200));return Kc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Wc(t))throw Error(H(40));return t._reactRootContainer?(zi(function(){Kc(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Kt.unstable_batchedUpdates=cm;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Kc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function cS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cS)}catch(t){console.error(t)}}cS(),cI.exports=Kt;var TN=cI.exports,dS,x_=TN;dS=x_.createRoot,x_.hydrateRoot;var dl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},IN={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Sr,wp,HT,wN=(HT=class{constructor(){ee(this,Sr,IN);ee(this,wp,!1)}setTimeoutProvider(t){K(this,Sr,t)}setTimeout(t,e){return D(this,Sr).setTimeout(t,e)}clearTimeout(t){D(this,Sr).clearTimeout(t)}setInterval(t,e){return D(this,Sr).setInterval(t,e)}clearInterval(t){D(this,Sr).clearInterval(t)}},Sr=new WeakMap,wp=new WeakMap,HT),Ai=new wN;function SN(t){setTimeout(t,0)}var Wi=typeof window>"u"||"Deno"in globalThis;function Mt(){}function CN(t,e){return typeof t=="function"?t(e):t}function Ch(t){return typeof t=="number"&&t>=0&&t!==1/0}function fS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $r(t,e){return typeof t=="function"?t(e):t}function Yt(t,e){return typeof t=="function"?t(e):t}function M_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==_m(o,e.options))return!1}else if(!Wa(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function D_(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(za(e.options.mutationKey)!==za(s))return!1}else if(!Wa(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function _m(t,e){return((e==null?void 0:e.queryKeyHashFn)||za)(t)}function za(t){return JSON.stringify(t,(e,n)=>Rh(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Wa(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Wa(t[n],e[n])):!1}var AN=Object.prototype.hasOwnProperty;function hS(t,e){if(t===e)return t;const n=V_(t)&&V_(e);if(!n&&!(Rh(t)&&Rh(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const h=n?u:s[u],p=t[h],m=e[h];if(p===m){a[h]=p,(n?u<i:AN.call(t,h))&&l++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){a[h]=m;continue}const _=hS(p,m);a[h]=_,_===p&&l++}return i===o&&l===i?t:a}function Ah(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function V_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Rh(t){if(!L_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!L_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function L_(t){return Object.prototype.toString.call(t)==="[object Object]"}function RN(t){return new Promise(e=>{Ai.setTimeout(e,t)})}function Ph(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?hS(t,e):e}function PN(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function NN(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var vm=Symbol();function pS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function kN(t,e){return typeof t=="function"?t(...e):!!t}var Ni,Cr,qs,$T,xN=($T=class extends dl{constructor(){super();ee(this,Ni);ee(this,Cr);ee(this,qs);K(this,qs,e=>{if(!Wi&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Cr)||this.setEventListener(D(this,qs))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Cr))==null||e.call(this),K(this,Cr,void 0))}setEventListener(e){var n;K(this,qs,e),(n=D(this,Cr))==null||n.call(this),K(this,Cr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){D(this,Ni)!==e&&(K(this,Ni,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof D(this,Ni)=="boolean"?D(this,Ni):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ni=new WeakMap,Cr=new WeakMap,qs=new WeakMap,$T),Em=new xN;function Nh(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var MN=SN;function DN(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=MN;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var at=DN(),Bs,Ar,Gs,zT,VN=(zT=class extends dl{constructor(){super();ee(this,Bs,!0);ee(this,Ar);ee(this,Gs);K(this,Gs,e=>{if(!Wi&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,Ar)||this.setEventListener(D(this,Gs))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Ar))==null||e.call(this),K(this,Ar,void 0))}setEventListener(e){var n;K(this,Gs,e),(n=D(this,Ar))==null||n.call(this),K(this,Ar,e(this.setOnline.bind(this)))}setOnline(e){D(this,Bs)!==e&&(K(this,Bs,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return D(this,Bs)}},Bs=new WeakMap,Ar=new WeakMap,Gs=new WeakMap,zT),oc=new VN;function LN(t){return Math.min(1e3*2**t,3e4)}function mS(t){return(t??"online")==="online"?oc.isOnline():!0}var kh=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function gS(t){let e=!1,n=0,r;const i=Nh(),s=()=>i.status!=="pending",o=P=>{var x;if(!s()){const w=new kh(P);m(w),(x=t.onCancel)==null||x.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>Em.isFocused()&&(t.networkMode==="always"||oc.isOnline())&&t.canRun(),h=()=>mS(t.networkMode)&&t.canRun(),p=P=>{s()||(r==null||r(),i.resolve(P))},m=P=>{s()||(r==null||r(),i.reject(P))},_=()=>new Promise(P=>{var x;r=w=>{(s()||u())&&P(w)},(x=t.onPause)==null||x.call(t)}).then(()=>{var P;r=void 0,s()||(P=t.onContinue)==null||P.call(t)}),R=()=>{if(s())return;let P;const x=n===0?t.initialPromise:void 0;try{P=x??t.fn()}catch(w){P=Promise.reject(w)}Promise.resolve(P).then(p).catch(w=>{var b;if(s())return;const E=t.retry??(Wi?0:3),C=t.retryDelay??LN,V=typeof C=="function"?C(n,w):C,L=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,w);if(e||!L){m(w);return}n++,(b=t.onFail)==null||b.call(t,n,w),RN(V).then(()=>u()?void 0:_()).then(()=>{e?m(w):R()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?R():_().then(R),i)}}var ki,WT,yS=(WT=class{constructor(){ee(this,ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ch(this.gcTime)&&K(this,ki,Ai.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wi?1/0:5*60*1e3))}clearGcTimeout(){D(this,ki)&&(Ai.clearTimeout(D(this,ki)),K(this,ki,void 0))}},ki=new WeakMap,WT),xi,Hs,Qt,Mi,tt,tl,Di,un,On,KT,UN=(KT=class extends yS{constructor(n){super();ee(this,un);ee(this,xi);ee(this,Hs);ee(this,Qt);ee(this,Mi);ee(this,tt);ee(this,tl);ee(this,Di);K(this,Di,!1),K(this,tl,n.defaultOptions),this.setOptions(n.options),this.observers=[],K(this,Mi,n.client),K(this,Qt,D(this,Mi).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,K(this,xi,U_(this.options)),this.state=n.state??D(this,xi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=D(this,tt))==null?void 0:n.promise}setOptions(n){if(this.options={...D(this,tl),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=U_(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),K(this,xi,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Qt).remove(this)}setData(n,r){const i=Ph(this.state.data,n,this.options);return fe(this,un,On).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){fe(this,un,On).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=D(this,tt))==null?void 0:i.promise;return(s=D(this,tt))==null||s.cancel(n),r?r.then(Mt).catch(Mt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,xi))}isActive(){return this.observers.some(n=>Yt(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>$r(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!fS(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,tt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=D(this,tt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),D(this,Qt).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(D(this,tt)&&(D(this,Di)?D(this,tt).cancel({revert:!0}):D(this,tt).cancelRetry()),this.scheduleGc()),D(this,Qt).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,un,On).call(this,{type:"invalidate"})}async fetch(n,r){var u,h,p,m,_,R,P,x,w,E,C,V;if(this.state.fetchStatus!=="idle"&&((u=D(this,tt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(D(this,tt))return D(this,tt).continueRetry(),D(this,tt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const L=this.observers.find(b=>b.options.queryFn);L&&this.setOptions(L.options)}const i=new AbortController,s=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>(K(this,Di,!0),i.signal)})},o=()=>{const L=pS(this.options,r),S=(()=>{const v={client:D(this,Mi),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return K(this,Di,!1),this.options.persister?this.options.persister(L,S,this):L(S)},l=(()=>{const L={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:D(this,Mi),state:this.state,fetchFn:o};return s(L),L})();(h=this.options.behavior)==null||h.onFetch(l,this),K(this,Hs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&fe(this,un,On).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),K(this,tt,gS({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:L=>{L instanceof kh&&L.revert&&this.setState({...D(this,Hs),fetchStatus:"idle"}),i.abort()},onFail:(L,b)=>{fe(this,un,On).call(this,{type:"failed",failureCount:L,error:b})},onPause:()=>{fe(this,un,On).call(this,{type:"pause"})},onContinue:()=>{fe(this,un,On).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const L=await D(this,tt).start();if(L===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(L),(R=(_=D(this,Qt).config).onSuccess)==null||R.call(_,L,this),(x=(P=D(this,Qt).config).onSettled)==null||x.call(P,L,this.state.error,this),L}catch(L){if(L instanceof kh){if(L.silent)return D(this,tt).promise;if(L.revert){if(this.state.data===void 0)throw L;return this.state.data}}throw fe(this,un,On).call(this,{type:"error",error:L}),(E=(w=D(this,Qt).config).onError)==null||E.call(w,L,this),(V=(C=D(this,Qt).config).onSettled)==null||V.call(C,this.state.data,L,this),L}finally{this.scheduleGc()}}},xi=new WeakMap,Hs=new WeakMap,Qt=new WeakMap,Mi=new WeakMap,tt=new WeakMap,tl=new WeakMap,Di=new WeakMap,un=new WeakSet,On=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,..._S(i.data,this.options),fetchMeta:n.meta??null};case"success":const s={...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Hs,n.manual?s:void 0),s;case"error":const o=n.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),at.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),D(this,Qt).notify({query:this,type:"updated",action:n})})},KT);function _S(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function U_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var xt,he,nl,Ct,Vi,$s,Gn,Rr,rl,zs,Ws,Li,Ui,Pr,Ks,ye,la,xh,Mh,Dh,Vh,Lh,Uh,Fh,ES,JT,vS=(JT=class extends dl{constructor(e,n){super();ee(this,ye);ee(this,xt);ee(this,he);ee(this,nl);ee(this,Ct);ee(this,Vi);ee(this,$s);ee(this,Gn);ee(this,Rr);ee(this,rl);ee(this,zs);ee(this,Ws);ee(this,Li);ee(this,Ui);ee(this,Pr);ee(this,Ks,new Set);this.options=n,K(this,xt,e),K(this,Rr,null),K(this,Gn,Nh()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,he).addObserver(this),F_(D(this,he),this.options)?fe(this,ye,la).call(this):this.updateResult(),fe(this,ye,Vh).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bh(D(this,he),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bh(D(this,he),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,ye,Lh).call(this),fe(this,ye,Uh).call(this),D(this,he).removeObserver(this)}setOptions(e){const n=this.options,r=D(this,he);if(this.options=D(this,xt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yt(this.options.enabled,D(this,he))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,ye,Fh).call(this),D(this,he).setOptions(this.options),n._defaulted&&!Ah(this.options,n)&&D(this,xt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,he),observer:this});const i=this.hasListeners();i&&b_(D(this,he),r,this.options,n)&&fe(this,ye,la).call(this),this.updateResult(),i&&(D(this,he)!==r||Yt(this.options.enabled,D(this,he))!==Yt(n.enabled,D(this,he))||$r(this.options.staleTime,D(this,he))!==$r(n.staleTime,D(this,he)))&&fe(this,ye,xh).call(this);const s=fe(this,ye,Mh).call(this);i&&(D(this,he)!==r||Yt(this.options.enabled,D(this,he))!==Yt(n.enabled,D(this,he))||s!==D(this,Pr))&&fe(this,ye,Dh).call(this,s)}getOptimisticResult(e){const n=D(this,xt).getQueryCache().build(D(this,xt),e),r=this.createResult(n,e);return bN(this,r)&&(K(this,Ct,r),K(this,$s,this.options),K(this,Vi,D(this,he).state)),r}getCurrentResult(){return D(this,Ct)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&D(this,Gn).status==="pending"&&D(this,Gn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){D(this,Ks).add(e)}getCurrentQuery(){return D(this,he)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=D(this,xt).defaultQueryOptions(e),r=D(this,xt).getQueryCache().build(D(this,xt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return fe(this,ye,la).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Ct)))}createResult(e,n){var I;const r=D(this,he),i=this.options,s=D(this,Ct),o=D(this,Vi),a=D(this,$s),u=e!==r?e.state:D(this,nl),{state:h}=e;let p={...h},m=!1,_;if(n._optimisticResults){const A=this.hasListeners(),k=!A&&F_(e,n),M=A&&b_(e,r,n,i);(k||M)&&(p={...p,..._S(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:R,errorUpdatedAt:P,status:x}=p;_=p.data;let w=!1;if(n.placeholderData!==void 0&&_===void 0&&x==="pending"){let A;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(A=s.data,w=!0):A=typeof n.placeholderData=="function"?n.placeholderData((I=D(this,Ws))==null?void 0:I.state.data,D(this,Ws)):n.placeholderData,A!==void 0&&(x="success",_=Ph(s==null?void 0:s.data,A,n),m=!0)}if(n.select&&_!==void 0&&!w)if(s&&_===(o==null?void 0:o.data)&&n.select===D(this,rl))_=D(this,zs);else try{K(this,rl,n.select),_=n.select(_),_=Ph(s==null?void 0:s.data,_,n),K(this,zs,_),K(this,Rr,null)}catch(A){K(this,Rr,A)}D(this,Rr)&&(R=D(this,Rr),_=D(this,zs),P=Date.now(),x="error");const E=p.fetchStatus==="fetching",C=x==="pending",V=x==="error",L=C&&E,b=_!==void 0,v={status:x,fetchStatus:p.fetchStatus,isPending:C,isSuccess:x==="success",isError:V,isInitialLoading:L,isLoading:L,data:_,dataUpdatedAt:p.dataUpdatedAt,error:R,errorUpdatedAt:P,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:V&&!b,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:V&&b,isStale:Tm(e,n),refetch:this.refetch,promise:D(this,Gn),isEnabled:Yt(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=N=>{v.status==="error"?N.reject(v.error):v.data!==void 0&&N.resolve(v.data)},k=()=>{const N=K(this,Gn,v.promise=Nh());A(N)},M=D(this,Gn);switch(M.status){case"pending":e.queryHash===r.queryHash&&A(M);break;case"fulfilled":(v.status==="error"||v.data!==M.value)&&k();break;case"rejected":(v.status!=="error"||v.error!==M.reason)&&k();break}}return v}updateResult(){const e=D(this,Ct),n=this.createResult(D(this,he),this.options);if(K(this,Vi,D(this,he).state),K(this,$s,this.options),D(this,Vi).data!==void 0&&K(this,Ws,D(this,he)),Ah(n,e))return;K(this,Ct,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!D(this,Ks).size)return!0;const o=new Set(s??D(this,Ks));return this.options.throwOnError&&o.add("error"),Object.keys(D(this,Ct)).some(a=>{const l=a;return D(this,Ct)[l]!==e[l]&&o.has(l)})};fe(this,ye,ES).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,ye,Vh).call(this)}},xt=new WeakMap,he=new WeakMap,nl=new WeakMap,Ct=new WeakMap,Vi=new WeakMap,$s=new WeakMap,Gn=new WeakMap,Rr=new WeakMap,rl=new WeakMap,zs=new WeakMap,Ws=new WeakMap,Li=new WeakMap,Ui=new WeakMap,Pr=new WeakMap,Ks=new WeakMap,ye=new WeakSet,la=function(e){fe(this,ye,Fh).call(this);let n=D(this,he).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Mt)),n},xh=function(){fe(this,ye,Lh).call(this);const e=$r(this.options.staleTime,D(this,he));if(Wi||D(this,Ct).isStale||!Ch(e))return;const r=fS(D(this,Ct).dataUpdatedAt,e)+1;K(this,Li,Ai.setTimeout(()=>{D(this,Ct).isStale||this.updateResult()},r))},Mh=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,he)):this.options.refetchInterval)??!1},Dh=function(e){fe(this,ye,Uh).call(this),K(this,Pr,e),!(Wi||Yt(this.options.enabled,D(this,he))===!1||!Ch(D(this,Pr))||D(this,Pr)===0)&&K(this,Ui,Ai.setInterval(()=>{(this.options.refetchIntervalInBackground||Em.isFocused())&&fe(this,ye,la).call(this)},D(this,Pr)))},Vh=function(){fe(this,ye,xh).call(this),fe(this,ye,Dh).call(this,fe(this,ye,Mh).call(this))},Lh=function(){D(this,Li)&&(Ai.clearTimeout(D(this,Li)),K(this,Li,void 0))},Uh=function(){D(this,Ui)&&(Ai.clearInterval(D(this,Ui)),K(this,Ui,void 0))},Fh=function(){const e=D(this,xt).getQueryCache().build(D(this,xt),this.options);if(e===D(this,he))return;const n=D(this,he);K(this,he,e),K(this,nl,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},ES=function(e){at.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(D(this,Ct))}),D(this,xt).getQueryCache().notify({query:D(this,he),type:"observerResultsUpdated"})})},JT);function FN(t,e){return Yt(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function F_(t,e){return FN(t,e)||t.state.data!==void 0&&bh(t,e,e.refetchOnMount)}function bh(t,e,n){if(Yt(e.enabled,t)!==!1&&$r(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Tm(t,e)}return!1}function b_(t,e,n,r){return(t!==e||Yt(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Tm(t,n)}function Tm(t,e){return Yt(e.enabled,t)!==!1&&t.isStaleByTime($r(e.staleTime,t))}function bN(t,e){return!Ah(t.getCurrentResult(),e)}function ac(t){return{onFetch:(e,n)=>{var h,p,m,_,R;const r=e.options,i=(m=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,s=((_=e.state.data)==null?void 0:_.pages)||[],o=((R=e.state.data)==null?void 0:R.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let P=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?P=!0:e.signal.addEventListener("abort",()=>{P=!0}),e.signal)})},w=pS(e.options,e.fetchOptions),E=async(C,V,L)=>{if(P)return Promise.reject();if(V==null&&C.pages.length)return Promise.resolve(C);const S=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:V,direction:L?"backward":"forward",meta:e.options.meta};return x(k),k})(),v=await w(S),{maxPages:I}=e.options,A=L?NN:PN;return{pages:A(C.pages,v,I),pageParams:A(C.pageParams,V,I)}};if(i&&s.length){const C=i==="backward",V=C?TS:Oh,L={pages:s,pageParams:o},b=V(r,L);a=await E(L,b,C)}else{const C=t??s.length;do{const V=l===0?o[0]??r.initialPageParam:Oh(r,a);if(l>0&&V==null)break;a=await E(a,V),l++}while(l<C)}return a};e.options.persister?e.fetchFn=()=>{var P,x;return(x=(P=e.options).persister)==null?void 0:x.call(P,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Oh(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function TS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function ON(t,e){return e?Oh(t,e)!=null:!1}function qN(t,e){return!e||!t.getPreviousPageParam?!1:TS(t,e)!=null}var BN=class extends vS{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:ac()})}getOptimisticResult(t){return t.behavior=ac(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var R,P;const{state:n}=t,r=super.createResult(t,e),{isFetching:i,isRefetching:s,isError:o,isRefetchError:a}=r,l=(P=(R=n.fetchMeta)==null?void 0:R.fetchMore)==null?void 0:P.direction,u=o&&l==="forward",h=i&&l==="forward",p=o&&l==="backward",m=i&&l==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ON(e,n.data),hasPreviousPage:qN(e,n.data),isFetchNextPageError:u,isFetchingNextPage:h,isFetchPreviousPageError:p,isFetchingPreviousPage:m,isRefetchError:a&&!u&&!p,isRefetching:s&&!h&&!m}}},il,An,At,Fi,Rn,gr,QT,GN=(QT=class extends yS{constructor(n){super();ee(this,Rn);ee(this,il);ee(this,An);ee(this,At);ee(this,Fi);K(this,il,n.client),this.mutationId=n.mutationId,K(this,At,n.mutationCache),K(this,An,[]),this.state=n.state||HN(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){D(this,An).includes(n)||(D(this,An).push(n),this.clearGcTimeout(),D(this,At).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){K(this,An,D(this,An).filter(r=>r!==n)),this.scheduleGc(),D(this,At).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){D(this,An).length||(this.state.status==="pending"?this.scheduleGc():D(this,At).remove(this))}continue(){var n;return((n=D(this,Fi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,u,h,p,m,_,R,P,x,w,E,C,V,L,b,S,v,I,A;const r=()=>{fe(this,Rn,gr).call(this,{type:"continue"})},i={client:D(this,il),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Fi,gS({fn:()=>this.options.mutationFn?this.options.mutationFn(n,i):Promise.reject(new Error("No mutationFn found")),onFail:(k,M)=>{fe(this,Rn,gr).call(this,{type:"failed",failureCount:k,error:M})},onPause:()=>{fe(this,Rn,gr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,At).canRun(this)}));const s=this.state.status==="pending",o=!D(this,Fi).canStart();try{if(s)r();else{fe(this,Rn,gr).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=D(this,At).config).onMutate)==null?void 0:l.call(a,n,this,i));const M=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,n,i));M!==this.state.context&&fe(this,Rn,gr).call(this,{type:"pending",context:M,variables:n,isPaused:o})}const k=await D(this,Fi).start();return await((m=(p=D(this,At).config).onSuccess)==null?void 0:m.call(p,k,n,this.state.context,this,i)),await((R=(_=this.options).onSuccess)==null?void 0:R.call(_,k,n,this.state.context,i)),await((x=(P=D(this,At).config).onSettled)==null?void 0:x.call(P,k,null,this.state.variables,this.state.context,this,i)),await((E=(w=this.options).onSettled)==null?void 0:E.call(w,k,null,n,this.state.context,i)),fe(this,Rn,gr).call(this,{type:"success",data:k}),k}catch(k){try{throw await((V=(C=D(this,At).config).onError)==null?void 0:V.call(C,k,n,this.state.context,this,i)),await((b=(L=this.options).onError)==null?void 0:b.call(L,k,n,this.state.context,i)),await((v=(S=D(this,At).config).onSettled)==null?void 0:v.call(S,void 0,k,this.state.variables,this.state.context,this,i)),await((A=(I=this.options).onSettled)==null?void 0:A.call(I,void 0,k,n,this.state.context,i)),k}finally{fe(this,Rn,gr).call(this,{type:"error",error:k})}}finally{D(this,At).runNext(this)}}},il=new WeakMap,An=new WeakMap,At=new WeakMap,Fi=new WeakMap,Rn=new WeakSet,gr=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),at.batch(()=>{D(this,An).forEach(i=>{i.onMutationUpdate(n)}),D(this,At).notify({mutation:this,type:"updated",action:n})})},QT);function HN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hn,cn,sl,YT,$N=(YT=class extends dl{constructor(e={}){super();ee(this,Hn);ee(this,cn);ee(this,sl);this.config=e,K(this,Hn,new Set),K(this,cn,new Map),K(this,sl,0)}build(e,n,r){const i=new GN({client:e,mutationCache:this,mutationId:++bl(this,sl)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){D(this,Hn).add(e);const n=nu(e);if(typeof n=="string"){const r=D(this,cn).get(n);r?r.push(e):D(this,cn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Hn).delete(e)){const n=nu(e);if(typeof n=="string"){const r=D(this,cn).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&D(this,cn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=nu(e);if(typeof n=="string"){const r=D(this,cn).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=nu(e);if(typeof n=="string"){const i=(r=D(this,cn).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){at.batch(()=>{D(this,Hn).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Hn).clear(),D(this,cn).clear()})}getAll(){return Array.from(D(this,Hn))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D_(n,r))}findAll(e={}){return this.getAll().filter(n=>D_(e,n))}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return at.batch(()=>Promise.all(e.map(n=>n.continue().catch(Mt))))}},Hn=new WeakMap,cn=new WeakMap,sl=new WeakMap,YT);function nu(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Pn,XT,zN=(XT=class extends dl{constructor(e={}){super();ee(this,Pn);this.config=e,K(this,Pn,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??_m(i,n);let o=this.get(s);return o||(o=new UN({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){D(this,Pn).has(e.queryHash)||(D(this,Pn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=D(this,Pn).get(e.queryHash);n&&(e.destroy(),n===e&&D(this,Pn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){at.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,Pn).get(e)}getAll(){return[...D(this,Pn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>M_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>M_(e,r)):n}notify(e){at.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){at.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){at.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pn=new WeakMap,XT),Ue,Nr,kr,Js,Qs,xr,Ys,Xs,ZT,WN=(ZT=class{constructor(t={}){ee(this,Ue);ee(this,Nr);ee(this,kr);ee(this,Js);ee(this,Qs);ee(this,xr);ee(this,Ys);ee(this,Xs);K(this,Ue,t.queryCache||new zN),K(this,Nr,t.mutationCache||new $N),K(this,kr,t.defaultOptions||{}),K(this,Js,new Map),K(this,Qs,new Map),K(this,xr,0)}mount(){bl(this,xr)._++,D(this,xr)===1&&(K(this,Ys,Em.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ue).onFocus())})),K(this,Xs,oc.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Ue).onOnline())})))}unmount(){var t,e;bl(this,xr)._--,D(this,xr)===0&&((t=D(this,Ys))==null||t.call(this),K(this,Ys,void 0),(e=D(this,Xs))==null||e.call(this),K(this,Xs,void 0))}isFetching(t){return D(this,Ue).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,Nr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ue).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=D(this,Ue).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($r(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return D(this,Ue).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=D(this,Ue).get(r.queryHash),s=i==null?void 0:i.state.data,o=CN(e,s);if(o!==void 0)return D(this,Ue).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return at.batch(()=>D(this,Ue).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Ue).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=D(this,Ue);at.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=D(this,Ue);return at.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=at.batch(()=>D(this,Ue).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Mt).catch(Mt)}invalidateQueries(t,e={}){return at.batch(()=>(D(this,Ue).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=at.batch(()=>D(this,Ue).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mt)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Mt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=D(this,Ue).build(this,e);return n.isStaleByTime($r(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Mt).catch(Mt)}fetchInfiniteQuery(t){return t.behavior=ac(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Mt).catch(Mt)}ensureInfiniteQueryData(t){return t.behavior=ac(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oc.isOnline()?D(this,Nr).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Ue)}getMutationCache(){return D(this,Nr)}getDefaultOptions(){return D(this,kr)}setDefaultOptions(t){K(this,kr,t)}setQueryDefaults(t,e){D(this,Js).set(za(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Js).values()],n={};return e.forEach(r=>{Wa(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){D(this,Qs).set(za(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Qs).values()],n={};return e.forEach(r=>{Wa(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,kr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_m(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,kr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,Ue).clear(),D(this,Nr).clear()}},Ue=new WeakMap,Nr=new WeakMap,kr=new WeakMap,Js=new WeakMap,Qs=new WeakMap,xr=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,ZT),IS=oe.createContext(void 0),Jc=t=>{const e=oe.useContext(IS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},KN=({client:t,children:e})=>(oe.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),F.jsx(IS.Provider,{value:t,children:e})),wS=oe.createContext(!1),JN=()=>oe.useContext(wS);wS.Provider;function QN(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var YN=oe.createContext(QN()),XN=()=>oe.useContext(YN),ZN=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},jN=t=>{oe.useEffect(()=>{t.clearReset()},[t])},ek=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||kN(n,[t.error,r])),tk=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},nk=(t,e)=>t.isLoading&&t.isFetching&&!e,rk=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,O_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function SS(t,e,n){var p,m,_,R,P;const r=JN(),i=XN(),s=Jc(),o=s.defaultQueryOptions(t);(m=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=r?"isRestoring":"optimistic",tk(o),ZN(o,i),jN(i);const a=!s.getQueryCache().get(o.queryHash),[l]=oe.useState(()=>new e(s,o)),u=l.getOptimisticResult(o),h=!r&&t.subscribed!==!1;if(oe.useSyncExternalStore(oe.useCallback(x=>{const w=h?l.subscribe(at.batchCalls(x)):Mt;return l.updateResult(),w},[l,h]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),oe.useEffect(()=>{l.setOptions(o)},[o,l]),rk(o,u))throw O_(o,l,i);if(ek({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((R=(_=s.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||R.call(_,o,u),o.experimental_prefetchInRender&&!Wi&&nk(u,r)){const x=a?O_(o,l,i):(P=s.getQueryCache().get(o.queryHash))==null?void 0:P.promise;x==null||x.catch(Mt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function ik(t,e){return SS(t,vS)}function sk(t,e){return SS(t,BN)}const ok="modulepreload",ak=function(t){return"/"+t},q_={},lk=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=ak(l),l in q_)return;q_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ok,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},uk=({className:t="w-5 h-5"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ck=({className:t="w-6 h-6"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M20 20v-5h-5M4 4a8 8 0 0113.89 4.02M20 20a8 8 0 01-13.89-4.02"})}),dk="1.5.0",fk={en:[{key:"all",label:"All News"},{key:"politics",label:"Politics"},{key:"world",label:"World"},{key:"technology",label:"Technology"},{key:"business",label:"Business"},{key:"sports",label:"Sports"},{key:"local",label:"Local"}],ar:[{key:"all",label:"كل الأخبار"},{key:"politics",label:"سياسة"},{key:"world",label:"العالم"},{key:"technology",label:"تكنولوجيا"},{key:"business",label:"أعمال"},{key:"sports",label:"رياضة"},{key:"local",label:"أخبار محلية"}]},Im={en:{title:"suhf",subtitle:"Freshly AI-Generated News from Around the World",language_toggle:"العربية",generating_title:"Connecting to Live News Feed...",generating_subtitle:"Syncing with our continuously updated global news database.",error_title:"Failed to Generate Articles",error_cache_title:"Application Out of Date",error_cache_body:"Your browser is running an old version of the app from its cache. Please perform a hard refresh (Ctrl+Shift+R or Cmd+Shift+R) to load the latest version.",config_error_title:"Configuration Error",config_error_gemini:'The backend is not configured with a Gemini API key. For local development, create a `.env` file and add `API_KEY="YOUR_KEY"`. For deployment, ensure the `API_KEY` environment variable is set in your platform\'s settings.',config_error_firebase:"Firebase is not configured. Please open the `config.js` file, fill in your Firebase project details, save, and then **re-deploy** the site for login/comments to work.",error_subtitle:"There was an issue connecting to our news desk. Please try again later.",error_gemini_invalid_key:"The provided API key is not valid. Please check for typos or get a new key.",error_gemini_quota:"You have exceeded your free quota or billing limit. Please check your billing status on Google Cloud to increase your quota, or try again later.",error_gemini_json:"The AI returned an unexpected response. Please try refreshing.",manage_billing_link:"Manage Billing on Google Cloud",read_more:"Read More",by:"By",search_placeholder:"Search articles...",refresh_tooltip:"Sync with live feed",account_tooltip:"My Account",share_article:"Share this article:",copy_link_success:"Link copied!",virality_tooltip:"Virality: How widely this story is spreading based on real-world data.",login:"Login",logout:"Logout",comments_title:"Reader Comments",add_comment_placeholder:"Add your comment...",post_comment:"Post Comment",login_to_comment:"Please log in to post a comment.",share_suhuf:"Share with suhf Friends",share_whatsapp:"Share on WhatsApp",share_telegram:"Share on Telegram",fast_spreading:"Fast Spreading",medium_spreading:"Medium Spreading",low_spreading:"Low Spreading",unknown:"Virality Unknown",sources:"Sources",topic_filter_prompt:"What are you interested in today?",loading_older_articles:"Loading older articles...",load_older_articles:"Click to load older articles",new_edition_available:"New edition available!",click_to_refresh:"Click to refresh",login_failed_title:"Login Failed",login_failed_body:"Could not sign you in. Please ensure pop-ups are not blocked by your browser and try again. There might be a configuration issue with the site's authentication provider.",ok_button:"OK",end_of_feed_title:"You've Reached the End of the Feed",end_of_feed_body:"Our live archive currently holds articles from the past 30 days."},ar:{title:"صحف",subtitle:"أخبار عاجلة تم إنشاؤها بواسطة الذكاء الاصطناعي",language_toggle:"English",generating_title:"جاري الاتصال ببث الأخبار المباشر...",generating_subtitle:"تتم المزامنة مع قاعدة بيانات الأخبار العالمية المحدثة باستمرار.",error_title:"فشل في توليد المقالات",error_cache_title:"التطبيق غير محدّث",error_cache_body:"يستخدم متصفحك نسخة قديمة من التطبيق من الذاكرة المؤقتة. الرجاء القيام بإعادة تحميل كاملة للصفحة (Ctrl+Shift+R أو Cmd+Shift+R) لتحميل أحدث إصدار.",config_error_title:"خطأ في الإعدادات",config_error_gemini:'الواجهة الخلفية غير مهيأة بمفتاح Gemini API. للتطوير المحلي، أنشئ ملف `.env` وأضف `API_KEY="YOUR_KEY"`. للنشر، تأكد من تعيين متغير البيئة `API_KEY` في إعدادات منصة النشر.',config_error_firebase:"Firebase غير مهيأ. الرجاء فتح ملف `config.js`، وتعبئة بيانات مشروع Firebase، ثم الحفظ، ثم **إعادة نشر** الموقع لتعمل ميزات تسجيل الدخول والتعليقات.",error_subtitle:"حدثت مشكلة في الاتصال بمكتب الأخبار. يرجى المحاولة مرة أخرى في وقت لاحق.",error_gemini_invalid_key:"مفتاح API المُقدَّم غير صالح. يرجى التحقق من الأخطاء الإملائية أو الحصول على مفتاح جديد.",error_gemini_quota:"لقد تجاوزت حصتك المجانية أو حد الفوترة. يرجى التحقق من حالة الفوترة في Google Cloud لزيادة الحصة، أو المحاولة مرة أخرى لاحقًا.",error_gemini_json:"أعاد الذكاء الاصطناعي استجابة غير متوقعة. يرجى محاولة التحديث.",manage_billing_link:"إدارة الفوترة على Google Cloud",read_more:"اقرأ المزيد",by:"بقلم",search_placeholder:"ابحث في المقالات...",refresh_tooltip:"مزامنة مع البث المباشر",account_tooltip:"حسابي",share_article:"شارك هذا المقال:",copy_link_success:"تم نسخ الرابط!",virality_tooltip:"مؤشر الانتشار: مدى انتشار هذه القصة بناءً على بيانات حقيقية.",login:"تسجيل الدخول",logout:"تسجيل الخروج",comments_title:"تعليقات القراء",add_comment_placeholder:"أضف تعليقك...",post_comment:"نشر التعليق",login_to_comment:"الرجاء تسجيل الدخول لنشر تعليق.",share_suhuf:"شارك مع أصدقاء صحف",share_whatsapp:"شارك عبر واتساب",share_telegram:"شارك عبر تيليجرام",fast_spreading:"سريع الانتشار",medium_spreading:"متوسط الانتشار",low_spreading:"قليل الانتشار",unknown:"انتشار غير معروف",sources:"المصادر",topic_filter_prompt:"ما الذي يثير اهتمامك اليوم؟",loading_older_articles:"جاري تحميل المقالات الأقدم...",load_older_articles:"اضغط لتحميل المقالات الأقدم",new_edition_available:"إصدار جديد متوفر!",click_to_refresh:"اضغط للتحديث",login_failed_title:"فشل تسجيل الدخول",login_failed_body:"تعذر تسجيل دخولك. يرجى التأكد من عدم حظر النوافذ المنبثقة بواسطة متصفحك والمحاولة مرة أخرى. قد تكون هناك مشكلة في إعدادات المصادقة للموقع.",ok_button:"حسناً",end_of_feed_title:"لقد وصلت إلى نهاية البث",end_of_feed_body:"يحتوي أرشيفنا المباشر حاليًا على مقالات من آخر 30 يومًا."}},B_={en:{World:"World News",Technology:"Technology",Sports:"Sports",Business:"Business",Local:"Local News",Politics:"Politics"},ar:{World:"أخبار العالم",Technology:"تكنولوجيا",Sports:"رياضة",Business:"أعمال",Local:"أخبار محلية",Politics:"سياسة"}},hk=({title:t,subtitle:e,language:n,toggleLanguage:r,languageToggleText:i,onRefresh:s,searchQuery:o,setSearchQuery:a,user:l,onLogin:u,onLogout:h,uiText:p})=>{const m=new Date,_={weekday:"long",year:"numeric",month:"long",day:"numeric"},R=new Intl.DateTimeFormat(n==="ar"?"ar-EG-u-nu-latn":"en-US",_).format(m),P=n==="ar";return F.jsxs("header",{className:"bg-stone-100 p-3 lg:p-4 border-b-2 border-stone-200",children:[F.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[F.jsxs("div",{className:"w-full md:w-auto flex-1 flex items-center gap-4",children:[F.jsx("button",{onClick:s,title:p.refresh_tooltip,className:"p-2 hover:bg-stone-200 rounded-full transition-colors",children:F.jsx(ck,{className:"w-5 h-5 text-stone-700"})}),F.jsxs("div",{className:"relative flex-grow max-w-sm",children:[F.jsx("input",{type:"search",placeholder:p.search_placeholder,value:o,onChange:x=>a(x.target.value),className:"bg-stone-100 border border-stone-300 rounded-full py-1.5 px-4 pl-10 w-full focus:outline-none focus:ring-2 focus:ring-stone-400"}),F.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 rtl:right-3 rtl:left-auto",children:F.jsx(uk,{className:"w-4 h-4 text-stone-500"})})]})]}),F.jsxs("div",{className:"flex-1.5 text-center px-4 order-first md:order-none",children:[F.jsx("h1",{className:`text-3xl lg:text-4xl font-black tracking-wider text-stone-900 ${P?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{className:`text-xs mt-1 text-stone-600 ${P?"font-serif-ar":"font-serif-en"}`,children:e})]}),F.jsxs("div",{className:"w-full md:w-auto flex-1 flex items-center justify-center md:justify-end gap-4",children:[F.jsx("button",{onClick:l?h:u,className:"bg-stone-800 text-white px-4 py-1.5 rounded-md text-sm font-bold hover:bg-stone-900 transition-colors",children:l?p.logout:p.login}),F.jsx("button",{onClick:r,className:"border-2 border-stone-800 text-stone-800 px-3 py-1 rounded-md text-sm font-bold hover:bg-stone-800 hover:text-white transition-colors",children:i})]})]}),F.jsxs("div",{className:"flex justify-between items-center mt-4 border-t-4 border-b-2 border-stone-900 border-double py-2",children:[F.jsx("span",{className:"text-xs font-bold text-stone-900",children:R}),F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsxs("span",{className:"text-xs font-bold text-stone-500",children:["v",dk]}),F.jsx("span",{className:"text-xs font-bold text-stone-900",children:"VOL. 1, NO. 1"})]})]})]})},G_=({className:t="w-5 h-5",color:e})=>F.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:e||"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),pk=t=>t==="Fast Spreading"||t==="سريع الانتشار"?{color:"text-red-600",key:"fast_spreading"}:t==="Medium Spreading"||t==="متوسط الانتشار"?{color:"text-orange-500",key:"medium_spreading"}:{color:"text-stone-500",key:"low_spreading"},H_=({article:t,isFeatured:e})=>F.jsx("div",{className:`relative w-full overflow-hidden ${e?"md:w-1/2 h-64 md:h-auto":"h-48"}`,children:t.imageUrl?F.jsxs(F.Fragment,{children:[F.jsxs("picture",{children:[F.jsx("source",{srcSet:t.imageUrl.replace(/\.png$/i,".webp"),type:"image/webp"}),F.jsx("img",{src:t.imageUrl,alt:t.headline,className:"absolute inset-0 h-full w-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",width:"1280",height:"720"})]}),F.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):F.jsx("div",{className:"absolute inset-0 h-full w-full bg-stone-200 animate-pulse"})}),$_=({article:t,onReadMore:e,categoryText:n,uiText:r,isFeatured:i=!1})=>{const{color:s,key:o}=pk(t.viralityDescription||""),a=r[o]||t.viralityDescription,l=document.documentElement.dir==="rtl",u=document.documentElement.lang,h=oe.useMemo(()=>{const m=new Date(t.date),_={year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat(u==="ar"?"ar-EG-u-nu-latn":"en-US",_).format(m)},[t.date,u]),p=t.body?t.body.split(`
`)[0].substring(0,i?200:100)+"...":"";return i?F.jsxs("div",{className:"bg-white flex flex-col md:flex-row cursor-pointer group transform hover:-translate-y-1 transition-transform duration-300 shadow-lg hover:shadow-2xl rounded-lg overflow-hidden h-full",onClick:()=>e(t),role:"article","aria-labelledby":`headline-${t.id}`,children:[F.jsx(H_,{article:t,isFeatured:!0}),F.jsxs("div",{className:"p-6 flex flex-col flex-grow md:w-1/2",children:[F.jsx("span",{className:"text-[10px] font-bold uppercase text-red-700 mb-1",children:n}),F.jsx("h2",{id:`headline-${t.id}`,className:`font-bold text-stone-900 text-2xl lg:text-3xl ${l?"font-serif-ar":"font-header-en"}`,children:t.headline}),F.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500 mt-1 mb-3",children:[F.jsxs("span",{children:[t.byline," - ",h]}),F.jsxs("div",{title:r.virality_tooltip,className:`flex items-center gap-1 font-bold ${s}`,children:[F.jsx(G_,{className:"w-4 h-4",color:"currentColor"}),F.jsx("span",{children:a})]})]}),F.jsx("p",{className:"text-sm text-stone-600 flex-grow",children:p}),F.jsx("span",{className:"text-red-700 font-bold mt-4 self-start group-hover:underline",children:l?"اقرأ المزيد ←":"Read More →"})]})]}):F.jsxs("div",{className:"bg-white flex flex-col cursor-pointer group transform hover:-translate-y-1 transition-transform duration-300 shadow-md hover:shadow-xl rounded-lg overflow-hidden h-full",onClick:()=>e(t),role:"article","aria-labelledby":`headline-${t.id}`,children:[F.jsxs("div",{className:"relative",children:[F.jsx(H_,{article:t,isFeatured:!1}),F.jsx("span",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2 bg-red-700 text-white text-[10px] font-bold uppercase px-2 py-1 rounded z-10",children:n})]}),F.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[F.jsx("h2",{id:`headline-${t.id}`,className:`font-bold text-stone-900 text-xl ${l?"font-serif-ar":"font-header-en"}`,children:t.headline}),F.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500 mt-1 mb-2",children:[F.jsxs("span",{children:[t.byline," - ",h]}),F.jsxs("div",{title:r.virality_tooltip,className:`flex items-center gap-1 font-bold ${s}`,children:[F.jsx(G_,{className:"w-4 h-4",color:"currentColor"}),F.jsx("span",{children:a})]})]}),F.jsx("p",{className:"text-sm text-stone-600 flex-grow",children:p}),F.jsx("span",{className:"text-red-700 font-bold mt-4 self-start group-hover:underline",children:l?"اقرأ المزيد ←":"Read More →"})]})]})},wm=({className:t="w-12 h-12"})=>F.jsxs("svg",{className:`${t} animate-spin`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[F.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),F.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mk=({title:t,subtitle:e})=>{const n=document.documentElement.dir==="rtl";return F.jsxs("div",{className:"fixed inset-0 bg-stone-900/75 flex flex-col items-center justify-center z-[100] text-white",children:[F.jsx(wm,{className:"w-16 h-16 text-white"}),F.jsx("h2",{className:`mt-6 text-3xl font-bold ${n?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{className:"mt-2 text-lg",children:e})]})},z_=({language:t,activeTopic:e,onSelect:n})=>{const r=fk[t],i=Im[t].topic_filter_prompt;return F.jsx("div",{className:"my-6 p-4 bg-white rounded-lg shadow-sm border border-stone-200",children:F.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[F.jsx("h3",{className:"text-md font-bold text-stone-700 flex-shrink-0",children:i}),F.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.map(s=>F.jsx("button",{onClick:()=>n(s.key),className:`
                px-4 py-1.5 text-sm font-semibold rounded-full transition-colors duration-200
                ${e===s.key?"bg-stone-800 text-white shadow":"bg-stone-200 text-stone-700 hover:bg-stone-300"}
              `,children:s.label},s.key))})]})})},gk=({className:t="w-12 h-12"})=>F.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})});/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_k=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_k(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new vk;const m=s<<2|a>>4;if(r.push(m),u!==64){const _=a<<4&240|u>>2;if(r.push(_),p!==64){const R=u<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ek=function(t){const e=CS(t);return AS.encodeByteArray(e,!0)},lc=function(t){return Ek(t).replace(/\./g,"")},RS=function(t){try{return AS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=()=>Tk().__FIREBASE_DEFAULTS__,wk=()=>{if(typeof process>"u"||typeof W_>"u")return;const t=W_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Sk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RS(t[1]);return e&&JSON.parse(e)},Qc=()=>{try{return yk()||Ik()||wk()||Sk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PS=t=>{var e,n;return(n=(e=Qc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Ck=t=>{const e=PS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NS=()=>{var t;return(t=Qc())==null?void 0:t.config},kS=t=>{var e;return(e=Qc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lc(JSON.stringify(n)),lc(JSON.stringify(o)),""].join(".")}const Ta={};function Pk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ta))Ta[e]?t.emulator.push(e):t.prod.push(e);return t}function Nk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let K_=!1;function MS(t,e){if(typeof window>"u"||typeof document>"u"||!vo(window.location.host)||Ta[t]===e||Ta[t]||K_)return;Ta[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=Pk().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{K_=!0,o()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=Nk(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;a(C),h(x,P);const V=u();l(E,w),C.append(E,R,x,V),document.body.appendChild(C)}s?(R.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function xk(){var e;const t=(e=Qc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lk(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Uk(){return!xk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fk(){try{return typeof indexedDB=="object"}catch{return!1}}function bk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ok,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sr(i,a,r)}}function qk(t,e){return t.replace(Bk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Bk=/\{\$([^}]+)}/g;function Gk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(J_(s)&&J_(o)){if(!jr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function J_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hk(t,e){const n=new $k(t,e);return n.subscribe.bind(n)}class $k{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gf),i.error===void 0&&(i.error=gf),i.complete===void 0&&(i.complete=gf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class Ki{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ak;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jk(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kk(t){return t===Ii?void 0:t}function Jk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Wk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const Yk={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Xk=ue.INFO,Zk={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},jk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Zk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=Xk,this._logHandler=jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const e1=(t,e)=>e.some(n=>t instanceof n);let Q_,Y_;function t1(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n1(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DS=new WeakMap,qh=new WeakMap,VS=new WeakMap,yf=new WeakMap,Cm=new WeakMap;function r1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DS.set(n,t)}).catch(()=>{}),Cm.set(e,t),e}function i1(t){if(qh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qh.set(t,e)}let Bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s1(t){Bh=t(Bh)}function o1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_f(this),e,...n);return VS.set(r,e.sort?e.sort():[e]),zr(r)}:n1().includes(t)?function(...e){return t.apply(_f(this),e),zr(DS.get(this))}:function(...e){return zr(t.apply(_f(this),e))}}function a1(t){return typeof t=="function"?o1(t):(t instanceof IDBTransaction&&i1(t),e1(t,t1())?new Proxy(t,Bh):t)}function zr(t){if(t instanceof IDBRequest)return r1(t);if(yf.has(t))return yf.get(t);const e=a1(t);return e!==t&&(yf.set(t,e),Cm.set(e,t)),e}const _f=t=>Cm.get(t);function l1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zr(o.result),l.oldVersion,l.newVersion,zr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const u1=["get","getKey","getAll","getAllKeys","count"],c1=["put","add","delete","clear"],vf=new Map;function X_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=c1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u1.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return vf.set(e,s),s}s1(t=>({...t,get:(e,n,r)=>X_(e,n)||t.get(e,n,r),has:(e,n)=>!!X_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(f1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function f1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",Z_="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Sm("@firebase/app"),h1="@firebase/app-compat",p1="@firebase/analytics-compat",m1="@firebase/analytics",g1="@firebase/app-check-compat",y1="@firebase/app-check",_1="@firebase/auth",v1="@firebase/auth-compat",E1="@firebase/database",T1="@firebase/data-connect",I1="@firebase/database-compat",w1="@firebase/functions",S1="@firebase/functions-compat",C1="@firebase/installations",A1="@firebase/installations-compat",R1="@firebase/messaging",P1="@firebase/messaging-compat",N1="@firebase/performance",k1="@firebase/performance-compat",x1="@firebase/remote-config",M1="@firebase/remote-config-compat",D1="@firebase/storage",V1="@firebase/storage-compat",L1="@firebase/firestore",U1="@firebase/ai",F1="@firebase/firestore-compat",b1="firebase",O1="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",q1={[Gh]:"fire-core",[h1]:"fire-core-compat",[m1]:"fire-analytics",[p1]:"fire-analytics-compat",[y1]:"fire-app-check",[g1]:"fire-app-check-compat",[_1]:"fire-auth",[v1]:"fire-auth-compat",[E1]:"fire-rtdb",[T1]:"fire-data-connect",[I1]:"fire-rtdb-compat",[w1]:"fire-fn",[S1]:"fire-fn-compat",[C1]:"fire-iid",[A1]:"fire-iid-compat",[R1]:"fire-fcm",[P1]:"fire-fcm-compat",[N1]:"fire-perf",[k1]:"fire-perf-compat",[x1]:"fire-rc",[M1]:"fire-rc-compat",[D1]:"fire-gcs",[V1]:"fire-gcs-compat",[L1]:"fire-fst",[F1]:"fire-fst-compat",[U1]:"fire-vertex","fire-js":"fire-js",[b1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,B1=new Map,$h=new Map;function j_(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function so(t){const e=t.name;if($h.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;$h.set(e,t);for(const n of uc.values())j_(n,t);for(const n of B1.values())j_(n,t);return!0}function Am(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new fl("app","Firebase",G1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=O1;function LS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Hh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(n||(n=NS()),!n)throw Wr.create("no-options");const s=uc.get(i);if(s){if(jr(n,s.options)&&jr(r,s.config))return s;throw Wr.create("duplicate-app",{appName:i})}const o=new Qk(i);for(const l of $h.values())o.addComponent(l);const a=new H1(n,r,o);return uc.set(i,a),a}function US(t=Hh){const e=uc.get(t);if(!e&&t===Hh&&NS())return LS();if(!e)throw Wr.create("no-app",{appName:t});return e}function Kr(t,e,n){let r=q1[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(o.join(" "));return}so(new Ki(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="firebase-heartbeat-database",z1=1,Ka="firebase-heartbeat-store";let Ef=null;function FS(){return Ef||(Ef=l1($1,z1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ka)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),Ef}async function W1(t){try{const n=(await FS()).transaction(Ka),r=await n.objectStore(Ka).get(bS(t));return await n.done,r}catch(e){if(e instanceof sr)er.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function ev(t,e){try{const r=(await FS()).transaction(Ka,"readwrite");await r.objectStore(Ka).put(e,bS(t)),await r.done}catch(n){if(n instanceof sr)er.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function bS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=1024,J1=30;class Q1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>J1){const o=Z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:r,unsentEntries:i}=Y1(this._heartbeatsCache.heartbeats),s=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return er.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function Y1(t,e=K1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class X1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fk()?bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nv(t){return lc(JSON.stringify({version:2,heartbeats:t})).length}function Z1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){so(new Ki("platform-logger",e=>new d1(e),"PRIVATE")),so(new Ki("heartbeat",e=>new Q1(e),"PRIVATE")),Kr(Gh,Z_,t),Kr(Gh,Z_,"esm2020"),Kr("fire-js","")}j1("");function OS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ex=OS,qS=new fl("auth","Firebase",OS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Sm("@firebase/auth");function tx(t,...e){cc.logLevel<=ue.WARN&&cc.warn(`Auth (${Eo}): ${t}`,...e)}function wu(t,...e){cc.logLevel<=ue.ERROR&&cc.error(`Auth (${Eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Pm(t,...e)}function yn(t,...e){return Pm(t,...e)}function Rm(t,e,n){const r={...ex(),[e]:n};return new fl("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return Rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),Rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qS.create(t,...e)}function ne(t,e,...n){if(!t)throw Pm(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function tr(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rx(){return rv()==="http:"||rv()==="https:"}function rv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rx()||Dk()||"connection"in navigator)?navigator.onLine:!0}function sx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=kk()||Vk()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lx=new pl(3e4,6e4);function km(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function To(t,e,n,r,i={}){return GS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return Mk()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&vo(t.emulatorConfig.host)&&(u.credentials="include"),BS.fetch()(await HS(t,t.config.apiHost,n,a),u)})}async function GS(t,e,n){t._canInitEmulator=!1;const r={...ox,...e};try{const i=new cx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ru(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ru(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ru(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rm(t,h,u);Fn(t,h)}}catch(i){if(i instanceof sr)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function ux(t,e,n,r,i={}){const s=await To(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function HS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Nm(t.config,i):`${t.config.apiScheme}://${i}`;return ax.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class cx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),lx.get())})}}function ru(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(t,e){return To(t,"POST","/v1/accounts:delete",e)}async function dc(t,e){return To(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fx(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),i=xm(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ia(Tf(i.auth_time)),issuedAtTime:Ia(Tf(i.iat)),expirationTime:Ia(Tf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Tf(t){return Number(t)*1e3}function xm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const i=RS(n);return i?JSON.parse(i):(wu("Failed to decode base64 JWT payload"),null)}catch(i){return wu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iv(t){const e=xm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&hx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Ja(t,dc(e,{idToken:n}));ne(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?$S(i.providerUserInfo):[],o=gx(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wh(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function mx(t){const e=Xe(t);await fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $S(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(t,e){const n=await GS(t,{},async()=>{const r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await HS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&vo(t.emulatorConfig.host)&&(l.credentials="include"),BS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _x(t,e){return To(t,"POST","/v2/accounts:revokeToken",km(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=iv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xs;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xs,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new px(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fx(this,e)}reload(){return mx(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Ja(this,dx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:R,stsTokenManager:P}=n;ne(p&&P,e,"internal-error");const x=xs.fromJSON(this.name,P);ne(typeof p=="string",e,"internal-error"),mr(r,e.name),mr(i,e.name),ne(typeof m=="boolean",e,"internal-error"),ne(typeof _=="boolean",e,"internal-error"),mr(s,e.name),mr(o,e.name),mr(a,e.name),mr(l,e.name),mr(u,e.name),mr(h,e.name);const w=new pn({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:x,createdAt:u,lastLoginAt:h});return R&&Array.isArray(R)&&(w.providerData=R.map(E=>({...E}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new xs;i.updateFromServerResponse(n);const s=new pn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?$S(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xs;a.updateFromIdToken(r);const l=new pn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;function Jn(t){tr(t instanceof Function,"Expected a class definition");let e=sv.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zS.type="NONE";const ov=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,e,n){return`firebase:${t}:${e}:${n}`}class Ms{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Su(this.userKey,i.apiKey,s),this.fullPersistenceKey=Su("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dc(this.auth,{idToken:e}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ms(Jn(ov),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Jn(ov);const o=Su(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await dc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await pn._fromGetAccountInfoResponse(e,m,h)}else p=pn._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ms(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ms(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XS(e))return"Blackberry";if(ZS(e))return"Webos";if(KS(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if(YS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WS(t=Tt()){return/firefox\//i.test(t)}function KS(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(t=Tt()){return/crios\//i.test(t)}function QS(t=Tt()){return/iemobile/i.test(t)}function YS(t=Tt()){return/android/i.test(t)}function XS(t=Tt()){return/blackberry/i.test(t)}function ZS(t=Tt()){return/webos/i.test(t)}function Mm(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vx(t=Tt()){var e;return Mm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Ex(){return Lk()&&document.documentMode===10}function jS(t=Tt()){return Mm(t)||YS(t)||ZS(t)||XS(t)||/windows phone/i.test(t)||QS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e=[]){let n;switch(t){case"Browser":n=av(Tt());break;case"Worker":n=`${av(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e={}){return To(t,"GET","/v2/passwordPolicy",km(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=6;class Sx{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new Tx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dc(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(qi(this));const n=e?Xe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ix(this),n=new Sx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _x(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yc(t){return Xe(t)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ax(t){Dm=t}function Rx(t){return Dm.loadJS(t)}function Px(){return Dm.gapiScript}function Nx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e){const n=Am(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(jr(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function xx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Mx(t,e,n){const r=Yc(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=tC(e),{host:o,port:a}=Dx(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(jr(u,r.config.emulator)&&jr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,vo(o)?(xS(`${s}//${o}${l}`),MS("Auth",!0)):Vx()}function tC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Dx(t){const e=tC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uv(o)}}}function uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(t,e){return ux(t,"POST","/v1/accounts:signInWithIdp",km(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="http://localhost";class Ji extends nC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ji(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ds(e,n)}buildRequest(){const e={requestUri:Lx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends Vm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends ml{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends ml{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends ml{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends ml{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await pn._fromIdTokenResponse(e,r,i),o=cv(r);return new oo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cv(r);return new oo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends sr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new hc(e,n,r,i)}}function rC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(t,s,e,r):s})}async function Ux(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(t,e,n=!1){const{auth:r}=t;if(hn(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=await Ja(t,rC(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=xm(s.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),oo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(t,e,n=!1){if(hn(t.app))return Promise.reject(qi(t));const r="signIn",i=await rC(t,r,e),s=await oo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Ox(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function qx(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function Bx(t,e,n,r){return Xe(t).onAuthStateChanged(e,n,r)}function Gx(t){return Xe(t).signOut()}const pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=1e3,$x=10;class sC extends iC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ex()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$x):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Hx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sC.type="LOCAL";const zx=sC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends iC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oC.type="SESSION";const aC=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Wx(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Lm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function Jx(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function Qx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Yx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Xx(){return lC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firebaseLocalStorageDb",Zx=1,mc="firebaseLocalStorage",cC="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zc(t,e){return t.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function jx(){const t=indexedDB.deleteDatabase(uC);return new gl(t).toPromise()}function Kh(){const t=indexedDB.open(uC,Zx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mc,{keyPath:cC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mc)?e(r):(r.close(),await jx(),e(await Kh()))})})}async function dv(t,e,n){const r=Zc(t,!0).put({[cC]:e,value:n});return new gl(r).toPromise()}async function eM(t,e){const n=Zc(t,!1).get(e),r=await new gl(n).toPromise();return r===void 0?null:r.value}function fv(t,e){const n=Zc(t,!0).delete(e);return new gl(n).toPromise()}const tM=800,nM=3;class dC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(Xx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Qx(),!this.activeServiceWorker)return;this.sender=new Kx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Yx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kh();return await dv(e,pc,"1"),await fv(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Zc(i,!1).getAll();return new gl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dC.type="LOCAL";const rM=dC;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e){return e?Jn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends nC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iM(t){return bx(t.auth,new Um(t),t.bypassAuthState)}function sM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Fx(n,new Um(t),t.bypassAuthState)}async function oM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Ux(n,new Um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iM;case"linkViaPopup":case"linkViaRedirect":return oM;case"reauthViaPopup":case"reauthViaRedirect":return sM;default:Fn(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new pl(2e3,1e4);async function lM(t,e,n){if(hn(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=Yc(t);nx(t,e,Vm);const i=fC(r,n);return new Ri(r,"signInViaPopup",e,i).executeNotNull()}class Ri extends hC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aM.get())};e()}}Ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="pendingRedirect",Cu=new Map;class cM extends hC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await dM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dM(t,e){const n=pM(e),r=hM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function fM(t,e){Cu.set(t._key(),e)}function hM(t){return Jn(t._redirectPersistence)}function pM(t){return Su(uM,t.config.apiKey,t.name)}async function mM(t,e,n=!1){if(hn(t.app))return Promise.reject(qi(t));const r=Yc(t),i=fC(r,e),o=await new cM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=10*60*1e3;class yM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_M(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hv(e))}saveEventToCache(e){this.cachedEventUids.add(hv(e)),this.lastProcessedEventTime=Date.now()}}function hv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _M(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e={}){return To(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TM=/^https?/;async function IM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vM(t);for(const n of e)try{if(wM(n))return}catch{}Fn(t,"unauthorized-domain")}function wM(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TM.test(n))return!1;if(EM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new pl(3e4,6e4);function pv(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CM(t){return new Promise((e,n)=>{var i,s,o;function r(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(yn(t,"network-request-failed"))},timeout:SM.get()})}if((s=(i=Mn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Mn().gapi)!=null&&o.load)r();else{const a=Nx("iframefcb");return Mn()[a]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},Rx(`${Px()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Au=null,e})}let Au=null;function AM(t){return Au=Au||CM(t),Au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new pl(5e3,15e3),PM="__/auth/iframe",NM="emulator/auth/iframe",kM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MM(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Nm(e,NM):`https://${t.config.authDomain}/${PM}`,r={apiKey:e.apiKey,appName:t.name,v:Eo},i=xM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hl(r).slice(1)}`}async function DM(t){const e=await AM(t),n=Mn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:MM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),a=Mn().setTimeout(()=>{s(o)},RM.get());function l(){Mn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LM=500,UM=600,FM="_blank",bM="http://localhost";class mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OM(t,e,n,r=LM,i=UM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...VM,width:r.toString(),height:i.toString(),top:s,left:o},u=Tt().toLowerCase();n&&(a=JS(u)?FM:n),WS(u)&&(e=e||bM,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[_,R])=>`${m}${_}=${R},`,"");if(vx(u)&&a!=="_self")return qM(e||"",a),new mv(null);const p=window.open(e||"",a,h);ne(p,t,"popup-blocked");try{p.focus()}catch{}return new mv(p)}function qM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="__/auth/handler",GM="emulator/auth/handler",HM=encodeURIComponent("fac");async function gv(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Eo,eventId:i};if(e instanceof Vm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Gk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof ml){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${HM}=${encodeURIComponent(l)}`:"";return`${$M(t)}?${hl(a).slice(1)}${u}`}function $M({config:t}){return t.emulator?Nm(t,GM):`https://${t.authDomain}/${BM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="webStorageSupport";class zM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aC,this._completeRedirectFn=mM,this._overrideRedirectResult=fM}async _openPopup(e,n,r,i){var o;tr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await gv(e,n,r,zh(),i);return OM(e,s,Lm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gv(e,n,r,zh(),i);return Jx(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DM(e),r=new yM(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(If,{type:If},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[If];s!==void 0&&n(!!s),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jS()||KS()||Mm()}}const WM=zM;var yv="@firebase/auth",_v="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QM(t){so(new Ki("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eC(t)},u=new Cx(r,i,s,l);return xx(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),so(new Ki("auth-internal",e=>{const n=Yc(e.getProvider("auth").getImmediate());return(r=>new KM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(yv,_v,JM(t)),Kr(yv,_v,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=5*60,XM=kS("authIdTokenMaxAge")||YM;let vv=null;const ZM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XM)return;const i=n==null?void 0:n.token;vv!==i&&(vv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jM(t=US()){const e=Am(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kx(t,{popupRedirectResolver:WM,persistence:[rM,zx,aC]}),r=kS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ZM(s.toString());qx(n,o,()=>o(n.currentUser)),Ox(n,a=>o(a))}}const i=PS("auth");return i&&Mx(n,`http://${i}`),n}function eD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Ax({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",eD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QM("Browser");var tD="firebase",nD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(tD,nD,"app");var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,mC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function I(){}I.prototype=v.prototype,S.F=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(A,k,M){for(var N=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)N[Pe-2]=arguments[Pe];return v.prototype[k].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,I){I||(I=0);const A=Array(16);if(typeof v=="string")for(var k=0;k<16;++k)A[k]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(k=0;k<16;++k)A[k]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],k=S.g[2];let M=S.g[3],N;N=v+(M^I&(k^M))+A[0]+3614090360&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[1]+3905402710&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[2]+606105819&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[3]+3250441966&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[4]+4118548399&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[5]+1200080426&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[6]+2821735955&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[7]+4249261313&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[8]+1770035416&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[9]+2336552879&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[10]+4294925233&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[11]+2304563134&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(M^I&(k^M))+A[12]+1804603682&4294967295,v=I+(N<<7&4294967295|N>>>25),N=M+(k^v&(I^k))+A[13]+4254626195&4294967295,M=v+(N<<12&4294967295|N>>>20),N=k+(I^M&(v^I))+A[14]+2792965006&4294967295,k=M+(N<<17&4294967295|N>>>15),N=I+(v^k&(M^v))+A[15]+1236535329&4294967295,I=k+(N<<22&4294967295|N>>>10),N=v+(k^M&(I^k))+A[1]+4129170786&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[6]+3225465664&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[11]+643717713&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[0]+3921069994&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[5]+3593408605&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[10]+38016083&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[15]+3634488961&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[4]+3889429448&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[9]+568446438&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[14]+3275163606&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[3]+4107603335&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[8]+1163531501&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(k^M&(I^k))+A[13]+2850285829&4294967295,v=I+(N<<5&4294967295|N>>>27),N=M+(I^k&(v^I))+A[2]+4243563512&4294967295,M=v+(N<<9&4294967295|N>>>23),N=k+(v^I&(M^v))+A[7]+1735328473&4294967295,k=M+(N<<14&4294967295|N>>>18),N=I+(M^v&(k^M))+A[12]+2368359562&4294967295,I=k+(N<<20&4294967295|N>>>12),N=v+(I^k^M)+A[5]+4294588738&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[8]+2272392833&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[11]+1839030562&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[14]+4259657740&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[1]+2763975236&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[4]+1272893353&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[7]+4139469664&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[10]+3200236656&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[13]+681279174&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[0]+3936430074&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[3]+3572445317&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[6]+76029189&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(I^k^M)+A[9]+3654602809&4294967295,v=I+(N<<4&4294967295|N>>>28),N=M+(v^I^k)+A[12]+3873151461&4294967295,M=v+(N<<11&4294967295|N>>>21),N=k+(M^v^I)+A[15]+530742520&4294967295,k=M+(N<<16&4294967295|N>>>16),N=I+(k^M^v)+A[2]+3299628645&4294967295,I=k+(N<<23&4294967295|N>>>9),N=v+(k^(I|~M))+A[0]+4096336452&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[7]+1126891415&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[14]+2878612391&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[5]+4237533241&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[12]+1700485571&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[3]+2399980690&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[10]+4293915773&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[1]+2240044497&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[8]+1873313359&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[15]+4264355552&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[6]+2734768916&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[13]+1309151649&4294967295,I=k+(N<<21&4294967295|N>>>11),N=v+(k^(I|~M))+A[4]+4149444226&4294967295,v=I+(N<<6&4294967295|N>>>26),N=M+(I^(v|~k))+A[11]+3174756917&4294967295,M=v+(N<<10&4294967295|N>>>22),N=k+(v^(M|~I))+A[2]+718787259&4294967295,k=M+(N<<15&4294967295|N>>>17),N=I+(M^(k|~v))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.v=function(S,v){v===void 0&&(v=S.length);const I=v-this.blockSize,A=this.C;let k=this.h,M=0;for(;M<v;){if(k==0)for(;M<=I;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<v;)if(A[k++]=S.charCodeAt(M++),k==this.blockSize){i(this,A),k=0;break}}else for(;M<v;)if(A[k++]=S[M++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)S[v++]=this.g[I]>>>A&255;return S};function s(S,v){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function o(S,v){this.h=v;const I=[];let A=!0;for(let k=S.length-1;k>=0;k--){const M=S[k]|0;A&&M==v||(I[k]=M,A=!1)}this.g=I}var a={};function l(S){return-128<=S&&S<128?s(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return x(u(-S));const v=[];let I=1;for(let A=0;S>=I;A++)v[A]=S/I|0,I*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return x(h(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(v,8));let A=p;for(let M=0;M<S.length;M+=8){var k=Math.min(8,S.length-M);const N=parseInt(S.substring(M,M+k),v);k<8?(k=u(Math.pow(v,k)),A=A.j(k).add(u(N))):(A=A.j(I),A=A.add(u(N)))}return A}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-x(this).m();let S=0,v=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);S+=(A>=0?A:4294967296+A)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R(this))return"0";if(P(this))return"-"+x(this).toString(S);const v=u(Math.pow(S,6));var I=this;let A="";for(;;){const k=V(I,v).g;I=w(I,k.j(v));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=k,R(I))return M+A;for(;M.length<6;)M="0"+M;A=M+A}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function R(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=w(this,S),P(S)?-1:R(S)?0:1};function x(S){const v=S.g.length,I=[];for(let A=0;A<v;A++)I[A]=~S.g[A];return new o(I,~S.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),I=[];let A=0;for(let k=0;k<=v;k++){let M=A+(this.i(k)&65535)+(S.i(k)&65535),N=(M>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=N>>>16,M&=65535,N&=65535,I[k]=N<<16|M}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(S,v){return S.add(x(v))}t.j=function(S){if(R(this)||R(S))return p;if(P(this))return P(S)?x(this).j(x(S)):x(x(this).j(S));if(P(S))return x(this.j(x(S)));if(this.l(_)<0&&S.l(_)<0)return u(this.m()*S.m());const v=this.g.length+S.g.length,I=[];for(var A=0;A<2*v;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let k=0;k<S.g.length;k++){const M=this.i(A)>>>16,N=this.i(A)&65535,Pe=S.i(k)>>>16,It=S.i(k)&65535;I[2*A+2*k]+=N*It,E(I,2*A+2*k),I[2*A+2*k+1]+=M*It,E(I,2*A+2*k+1),I[2*A+2*k+1]+=N*Pe,E(I,2*A+2*k+1),I[2*A+2*k+2]+=M*Pe,E(I,2*A+2*k+2)}for(S=0;S<v;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=v;S<2*v;S++)I[S]=0;return new o(I,0)};function E(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function C(S,v){this.g=S,this.h=v}function V(S,v){if(R(v))throw Error("division by zero");if(R(S))return new C(p,p);if(P(S))return v=V(x(S),v),new C(x(v.g),x(v.h));if(P(v))return v=V(S,x(v)),new C(x(v.g),v.h);if(S.g.length>30){if(P(S)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=v;A.l(S)<=0;)I=L(I),A=L(A);var k=b(I,1),M=b(A,1);for(A=b(A,2),I=b(I,2);!R(A);){var N=M.add(A);N.l(S)<=0&&(k=k.add(I),M=N),A=b(A,1),I=b(I,1)}return v=w(S,k.j(v)),new C(k,v)}for(k=p;S.l(v)>=0;){for(I=Math.max(1,Math.floor(S.m()/v.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),M=u(I),N=M.j(v);P(N)||N.l(S)>0;)I-=A,M=u(I),N=M.j(v);R(M)&&(M=m),k=k.add(M),S=w(S,N)}return new C(k,S)}t.B=function(S){return V(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)&S.i(A);return new o(I,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)|S.i(A);return new o(I,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)^S.i(A);return new o(I,this.h^S.h)};function L(S){const v=S.g.length+1,I=[];for(let A=0;A<v;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(I,S.h)}function b(S,v){const I=v>>5;v%=32;const A=S.g.length-I,k=[];for(let M=0;M<A;M++)k[M]=v>0?S.i(M+I)>>>v|S.i(M+I+1)<<32-v:S.i(M+I);return new o(k,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Jr=o}).apply(typeof Ev<"u"?Ev:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gC,ua,yC,Ru,Jh,_C,vC,EC;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var U=d[T];if(!(U in y))break e;y=y[U]}d=d[d.length-1],T=y[d],g=g(T),g!=T&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var y=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&y.push([T,g[T]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,y){return d.call.apply(d.bind,arguments)}function u(d,g,y){return u=l,u.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function p(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(T,U,O){for(var $=Array(arguments.length-2),se=2;se<arguments.length;se++)$[se-2]=arguments[se];return g.prototype[U].apply(T,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const g=d.length;if(g>0){const y=Array(g);for(let T=0;T<g;T++)y[T]=d[T];return y}return[]}function R(d,g){for(let T=1;T<arguments.length;T++){const U=arguments[T];var y=typeof U;if(y=y!="object"?y:U?Array.isArray(U)?"array":y:"null",y=="array"||y=="object"&&typeof U.length=="number"){y=d.length||0;const O=U.length||0;d.length=y+O;for(let $=0;$<O;$++)d[y+$]=U[$]}else d.push(U)}}class P{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){o.setTimeout(()=>{throw d},0)}function w(){var d=S;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class E{constructor(){this.h=this.g=null}add(g,y){const T=C.get();T.set(g,y),this.h?this.h.next=T:this.g=T,this.h=T}}var C=new P(()=>new V,d=>d.reset());class V{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,b=!1,S=new E,v=()=>{const d=Promise.resolve(void 0);L=()=>{d.then(I)}};function I(){for(var d;d=w();){try{d.h.call(d.g)}catch(y){x(y)}var g=C;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}b=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function Pe(d,g){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(Pe,k),Pe.prototype.init=function(d,g){const y=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function ae(d,g,y,T,U){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!T,this.ha=U,this.key=++Ze,this.da=this.fa=!1}function G(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function W(d,g,y){for(const T in d)g.call(y,d[T],T,d)}function X(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function j(d){const g={};for(const y in d)g[y]=d[y];return g}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(d,g){let y,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(y in T)d[y]=T[y];for(let O=0;O<ke.length;O++)y=ke[O],Object.prototype.hasOwnProperty.call(T,y)&&(d[y]=T[y])}}function je(d){this.src=d,this.g={},this.h=0}je.prototype.add=function(d,g,y,T,U){const O=d.toString();d=this.g[O],d||(d=this.g[O]=[],this.h++);const $=on(d,g,T,U);return $>-1?(g=d[$],y||(g.fa=!1)):(g=new ae(g,this.src,O,!!T,U),g.fa=y,d.push(g)),g};function pi(d,g){const y=g.type;if(y in d.g){var T=d.g[y],U=Array.prototype.indexOf.call(T,g,void 0),O;(O=U>=0)&&Array.prototype.splice.call(T,U,1),O&&(G(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function on(d,g,y,T){for(let U=0;U<d.length;++U){const O=d[U];if(!O.da&&O.listener==g&&O.capture==!!y&&O.ha==T)return U}return-1}var ar="closure_lm_"+(Math.random()*1e6|0),Td={};function Sg(d,g,y,T,U){if(Array.isArray(g)){for(let O=0;O<g.length;O++)Sg(d,g[O],y,T,U);return null}return y=Rg(y),d&&d[It]?d.J(g,y,a(T)?!!T.capture:!1,U):EA(d,g,y,!1,T,U)}function EA(d,g,y,T,U,O){if(!g)throw Error("Invalid event type");const $=a(U)?!!U.capture:!!U;let se=wd(d);if(se||(d[ar]=se=new je(d)),y=se.add(g,y,T,$,O),y.proxy)return y;if(T=TA(),y.proxy=T,T.src=d,T.listener=y,d.addEventListener)M||(U=$),U===void 0&&(U=!1),d.addEventListener(g.toString(),T,U);else if(d.attachEvent)d.attachEvent(Ag(g.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function TA(){function d(y){return g.call(d.src,d.listener,y)}const g=IA;return d}function Cg(d,g,y,T,U){if(Array.isArray(g))for(var O=0;O<g.length;O++)Cg(d,g[O],y,T,U);else T=a(T)?!!T.capture:!!T,y=Rg(y),d&&d[It]?(d=d.i,O=String(g).toString(),O in d.g&&(g=d.g[O],y=on(g,y,T,U),y>-1&&(G(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[O],d.h--)))):d&&(d=wd(d))&&(g=d.g[g.toString()],d=-1,g&&(d=on(g,y,T,U)),(y=d>-1?g[d]:null)&&Id(y))}function Id(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[It])pi(g.i,d);else{var y=d.type,T=d.proxy;g.removeEventListener?g.removeEventListener(y,T,d.capture):g.detachEvent?g.detachEvent(Ag(y),T):g.addListener&&g.removeListener&&g.removeListener(T),(y=wd(g))?(pi(y,d),y.h==0&&(y.src=null,g[ar]=null)):G(d)}}}function Ag(d){return d in Td?Td[d]:Td[d]="on"+d}function IA(d,g){if(d.da)d=!0;else{g=new Pe(g,this);const y=d.listener,T=d.ha||d.src;d.fa&&Id(d),d=y.call(T,g)}return d}function wd(d){return d=d[ar],d instanceof je?d:null}var Sd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rg(d){return typeof d=="function"?d:(d[Sd]||(d[Sd]=function(g){return d.handleEvent(g)}),d[Sd])}function ft(){A.call(this),this.i=new je(this),this.M=this,this.G=null}p(ft,A),ft.prototype[It]=!0,ft.prototype.removeEventListener=function(d,g,y,T){Cg(this,d,g,y,T)};function wt(d,g){var y,T=d.G;if(T)for(y=[];T;T=T.G)y.push(T);if(d=d.M,T=g.type||g,typeof g=="string")g=new k(g,d);else if(g instanceof k)g.target=g.target||d;else{var U=g;g=new k(T,d),Be(g,U)}U=!0;let O,$;if(y)for($=y.length-1;$>=0;$--)O=g.g=y[$],U=Al(O,T,!0,g)&&U;if(O=g.g=d,U=Al(O,T,!0,g)&&U,U=Al(O,T,!1,g)&&U,y)for($=0;$<y.length;$++)O=g.g=y[$],U=Al(O,T,!1,g)&&U}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let T=0;T<y.length;T++)G(y[T]);delete d.g[g],d.h--}}this.G=null},ft.prototype.J=function(d,g,y,T){return this.i.add(String(d),g,!1,y,T)},ft.prototype.K=function(d,g,y,T){return this.i.add(String(d),g,!0,y,T)};function Al(d,g,y,T){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let O=0;O<g.length;++O){const $=g[O];if($&&!$.da&&$.capture==y){const se=$.listener,Ke=$.ha||$.src;$.fa&&pi(d.i,$),U=se.call(Ke,T)!==!1&&U}}return U&&!T.defaultPrevented}function wA(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function Pg(d){d.g=wA(()=>{d.g=null,d.i&&(d.i=!1,Pg(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class SA extends A{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(d){A.call(this),this.h=d,this.g={}}p(xo,A);var Ng=[];function kg(d){W(d.g,function(g,y){this.g.hasOwnProperty(y)&&Id(g)},d),d.g={}}xo.prototype.N=function(){xo.Z.N.call(this),kg(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cd=o.JSON.stringify,CA=o.JSON.parse,AA=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function xg(){}function Mg(){}var Mo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ad(){k.call(this,"d")}p(Ad,k);function Rd(){k.call(this,"c")}p(Rd,k);var mi={},Dg=null;function Rl(){return Dg=Dg||new ft}mi.Ia="serverreachability";function Vg(d){k.call(this,mi.Ia,d)}p(Vg,k);function Do(d){const g=Rl();wt(g,new Vg(g))}mi.STAT_EVENT="statevent";function Lg(d,g){k.call(this,mi.STAT_EVENT,d),this.stat=g}p(Lg,k);function St(d){const g=Rl();wt(g,new Lg(g,d))}mi.Ja="timingevent";function Ug(d,g){k.call(this,mi.Ja,d),this.size=g}p(Ug,k);function Vo(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function Lo(){this.g=!0}Lo.prototype.ua=function(){this.g=!1};function RA(d,g,y,T,U,O){d.info(function(){if(d.g)if(O){var $="",se=O.split("&");for(let Ee=0;Ee<se.length;Ee++){var Ke=se[Ee].split("=");if(Ke.length>1){const et=Ke[0];Ke=Ke[1];const In=et.split("_");$=In.length>=2&&In[1]=="type"?$+(et+"="+Ke+"&"):$+(et+"=redacted&")}}}else $=null;else $=O;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+g+`
`+y+`
`+$})}function PA(d,g,y,T,U,O,$){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+g+`
`+y+`
`+O+" "+$})}function rs(d,g,y,T){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+kA(d,y)+(T?" "+T:"")})}function NA(d,g){d.info(function(){return"TIMEOUT: "+g})}Lo.prototype.info=function(){};function kA(d,g){if(!d.g)return g;if(!g)return null;try{const O=JSON.parse(g);if(O){for(d=0;d<O.length;d++)if(Array.isArray(O[d])){var y=O[d];if(!(y.length<2)){var T=y[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let $=1;$<T.length;$++)T[$]=""}}}}return Cd(O)}catch{return g}}var Pl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bg;function Pd(){}p(Pd,xg),Pd.prototype.g=function(){return new XMLHttpRequest},bg=new Pd;function Uo(d){return encodeURIComponent(String(d))}function xA(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function lr(d,g,y,T){this.j=d,this.i=g,this.l=y,this.S=T||1,this.V=new xo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Og}function Og(){this.i=null,this.g="",this.h=!1}var qg={},Nd={};function kd(d,g,y){d.M=1,d.A=kl(Tn(g)),d.u=y,d.R=!0,Bg(d,null)}function Bg(d,g){d.F=Date.now(),Nl(d),d.B=Tn(d.A);var y=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),ey(y.i,"t",T),d.C=0,y=d.j.L,d.h=new Og,d.g=_y(d.j,y?g:null,!d.u),d.P>0&&(d.O=new SA(u(d.Y,d,d.g),d.P)),g=d.V,y=d.g,T=d.ba;var U="readystatechange";Array.isArray(U)||(U&&(Ng[0]=U.toString()),U=Ng);for(let O=0;O<U.length;O++){const $=Sg(y,U[O],T||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.J?j(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Do(),RA(d.i,d.v,d.B,d.l,d.S,d.u)}lr.prototype.ba=function(d){d=d.target;const g=this.O;g&&dr(d)==3?g.j():this.Y(d)},lr.prototype.Y=function(d){try{if(d==this.g)e:{const se=dr(this.g),Ke=this.g.ya(),Ee=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||ay(this.g)))){this.K||se!=4||Ke==7||(Ke==8||Ee<=0?Do(3):Do(2)),xd(this);var g=this.g.ca();this.X=g;var y=MA(this);if(this.o=g==200,PA(this.i,this.v,this.B,this.l,this.S,se,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(T)){var O=T;break t}}O=null}if(d=O)rs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Md(this,d);else{this.o=!1,this.m=3,St(12),gi(this),Fo(this);break e}}if(this.R){d=!0;let et;for(;!this.K&&this.C<y.length;)if(et=DA(this,y),et==Nd){se==4&&(this.m=4,St(14),d=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(et==qg){this.m=4,St(15),rs(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else rs(this.i,this.l,et,null),Md(this,et);if(Gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||y.length!=0||this.h.h||(this.m=1,St(16),d=!1),this.o=this.o&&d,!d)rs(this.i,this.l,y,"[Invalid Chunked Response]"),gi(this),Fo(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),qd($),$.P=!0,St(11))}}else rs(this.i,this.l,y,null),Md(this,y);se==4&&gi(this),this.o&&!this.K&&(se==4?py(this.j,this):(this.o=!1,Nl(this)))}else KA(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),gi(this),Fo(this)}}}catch{}finally{}};function MA(d){if(!Gg(d))return d.g.la();const g=ay(d.g);if(g==="")return"";let y="";const T=g.length,U=dr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return gi(d),Fo(d),"";d.h.i=new o.TextDecoder}for(let O=0;O<T;O++)d.h.h=!0,y+=d.h.i.decode(g[O],{stream:!(U&&O==T-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function Gg(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function DA(d,g){var y=d.C,T=g.indexOf(`
`,y);return T==-1?Nd:(y=Number(g.substring(y,T)),isNaN(y)?qg:(T+=1,T+y>g.length?Nd:(g=g.slice(T,T+y),d.C=T+y,g)))}lr.prototype.cancel=function(){this.K=!0,gi(this)};function Nl(d){d.T=Date.now()+d.H,Hg(d,d.H)}function Hg(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Vo(u(d.aa,d),g)}function xd(d){d.D&&(o.clearTimeout(d.D),d.D=null)}lr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(NA(this.i,this.B),this.M!=2&&(Do(),St(17)),gi(this),this.m=2,Fo(this)):Hg(this,this.T-d)};function Fo(d){d.j.I==0||d.K||py(d.j,d)}function gi(d){xd(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,kg(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Md(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||Dd(y.h,d))){if(!d.L&&Dd(y.h,d)&&y.I==3){try{var T=y.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)Ll(y),Dl(y);else break e;Od(y),St(18)}}else y.xa=U[1],0<y.xa-y.K&&U[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Vo(u(y.Va,y),6e3));Wg(y.h)<=1&&y.ta&&(y.ta=void 0)}else _i(y,11)}else if((d.L||y.g==d)&&Ll(y),!N(g))for(U=y.Ba.g.parse(g),g=0;g<U.length;g++){let Ee=U[g];const et=Ee[0];if(!(et<=y.K))if(y.K=et,Ee=Ee[1],y.I==2)if(Ee[0]=="c"){y.M=Ee[1],y.ba=Ee[2];const In=Ee[3];In!=null&&(y.ka=In,y.j.info("VER="+y.ka));const vi=Ee[4];vi!=null&&(y.za=vi,y.j.info("SVER="+y.za));const fr=Ee[5];fr!=null&&typeof fr=="number"&&fr>0&&(T=1.5*fr,y.O=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const hr=d.g;if(hr){const Fl=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fl){var O=T.h;O.g||Fl.indexOf("spdy")==-1&&Fl.indexOf("quic")==-1&&Fl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Vd(O,O.h),O.h=null))}if(T.G){const Bd=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Bd&&(T.wa=Bd,we(T.J,T.G,Bd))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),T=y;var $=d;if(T.na=yy(T,T.L?T.ba:null,T.W),$.L){Kg(T.h,$);var se=$,Ke=T.O;Ke&&(se.H=Ke),se.D&&(xd(se),Nl(se)),T.g=$}else fy(T);y.i.length>0&&Vl(y)}else Ee[0]!="stop"&&Ee[0]!="close"||_i(y,7);else y.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?_i(y,7):bd(y):Ee[0]!="noop"&&y.l&&y.l.qa(Ee),y.A=0)}}Do(4)}catch{}}var VA=class{constructor(d,g){this.g=d,this.map=g}};function $g(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Wg(d){return d.h?1:d.g?d.g.size:0}function Dd(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Vd(d,g){d.g?d.g.add(g):d.h=g}function Kg(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}$g.prototype.cancel=function(){if(this.i=Jg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Jg(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return _(d.i)}var Qg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LA(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const T=d[y].indexOf("=");let U,O=null;T>=0?(U=d[y].substring(0,T),O=d[y].substring(T+1)):U=d[y],g(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ur(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof ur?(this.l=d.l,bo(this,d.j),this.o=d.o,this.g=d.g,Oo(this,d.u),this.h=d.h,Ld(this,ty(d.i)),this.m=d.m):d&&(g=String(d).match(Qg))?(this.l=!1,bo(this,g[1]||"",!0),this.o=qo(g[2]||""),this.g=qo(g[3]||"",!0),Oo(this,g[4]),this.h=qo(g[5]||"",!0),Ld(this,g[6]||"",!0),this.m=qo(g[7]||"")):(this.l=!1,this.i=new Go(null,this.l))}ur.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Bo(g,Yg,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Bo(g,Yg,!0),"@"),d.push(Uo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Bo(y,y.charAt(0)=="/"?bA:FA,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Bo(y,qA)),d.join("")},ur.prototype.resolve=function(d){const g=Tn(this);let y=!!d.j;y?bo(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var T=d.h;if(y)Oo(g,d.u);else if(y=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=g.h.lastIndexOf("/");U!=-1&&(T=g.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const O=[];for(let $=0;$<U.length;){const se=U[$++];se=="."?T&&$==U.length&&O.push(""):se==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),T&&$==U.length&&O.push("")):(O.push(se),T=!0)}T=O.join("/")}else T=U}return y?g.h=T:y=d.i.toString()!=="",y?Ld(g,ty(d.i)):y=!!d.m,y&&(g.m=d.m),g};function Tn(d){return new ur(d)}function bo(d,g,y){d.j=y?qo(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Oo(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Ld(d,g,y){g instanceof Go?(d.i=g,BA(d.i,d.l)):(y||(g=Bo(g,OA)),d.i=new Go(g,d.l))}function we(d,g,y){d.i.set(g,y)}function kl(d){return we(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qo(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Bo(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,UA),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function UA(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Yg=/[#\/\?@]/g,FA=/[#\?:]/g,bA=/[#\?]/g,OA=/[#\?@]/g,qA=/#/g;function Go(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function yi(d){d.g||(d.g=new Map,d.h=0,d.i&&LA(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Go.prototype,t.add=function(d,g){yi(this),this.i=null,d=is(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Xg(d,g){yi(d),g=is(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Zg(d,g){return yi(d),g=is(d,g),d.g.has(g)}t.forEach=function(d,g){yi(this),this.g.forEach(function(y,T){y.forEach(function(U){d.call(g,U,T,this)},this)},this)};function jg(d,g){yi(d);let y=[];if(typeof g=="string")Zg(d,g)&&(y=y.concat(d.g.get(is(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return yi(this),this.i=null,d=is(this,d),Zg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=jg(this,d),d.length>0?String(d[0]):g):g};function ey(d,g,y){Xg(d,g),y.length>0&&(d.i=null,d.g.set(is(d,g),_(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var y=g[T];const U=Uo(y);y=jg(this,y);for(let O=0;O<y.length;O++){let $=U;y[O]!==""&&($+="="+Uo(y[O])),d.push($)}}return this.i=d.join("&")};function ty(d){const g=new Go;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function is(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function BA(d,g){g&&!d.j&&(yi(d),d.i=null,d.g.forEach(function(y,T){const U=T.toLowerCase();T!=U&&(Xg(this,T),ey(this,U,y))},d)),d.j=g}function GA(d,g){const y=new Lo;if(o.Image){const T=new Image;T.onload=h(cr,y,"TestLoadImage: loaded",!0,g,T),T.onerror=h(cr,y,"TestLoadImage: error",!1,g,T),T.onabort=h(cr,y,"TestLoadImage: abort",!1,g,T),T.ontimeout=h(cr,y,"TestLoadImage: timeout",!1,g,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else g(!1)}function HA(d,g){const y=new Lo,T=new AbortController,U=setTimeout(()=>{T.abort(),cr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:T.signal}).then(O=>{clearTimeout(U),O.ok?cr(y,"TestPingServer: ok",!0,g):cr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),cr(y,"TestPingServer: error",!1,g)})}function cr(d,g,y,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(y)}catch{}}function $A(){this.g=new AA}function Ud(d){this.i=d.Sb||null,this.h=d.ab||!1}p(Ud,xg),Ud.prototype.g=function(){return new xl(this.i,this.h)};function xl(d,g){ft.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(xl,ft),t=xl.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,$o(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ny(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ny(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Ho(this):$o(this),this.readyState==3&&ny(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Ho(this))},t.Na=function(d){this.g&&(this.response=d,Ho(this))},t.ga=function(){this.g&&Ho(this)};function Ho(d){d.readyState=4,d.l=null,d.j=null,d.B=null,$o(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function $o(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ry(d){let g="";return W(d,function(y,T){g+=T,g+=":",g+=y,g+=`\r
`}),g}function Fd(d,g,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=ry(y),typeof d=="string"?y!=null&&Uo(y):we(d,g,y))}function Le(d){ft.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,ft);var zA=/^https?$/i,WA=["POST","PUT"];t=Le.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bg.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(O){iy(this,O);return}if(d=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)y.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const O of T.keys())y.set(O,T.get(O));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(O=>O.toLowerCase()=="content-type"),U=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(WA,g,void 0)>=0)||T||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of y)this.g.setRequestHeader(O,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(O){iy(this,O)}};function iy(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,sy(d),Ml(d)}function sy(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,wt(this,"complete"),wt(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?oy(this):this.Xa())},t.Xa=function(){oy(this)};function oy(d){if(d.h&&typeof s<"u"){if(d.v&&dr(d)==4)setTimeout(d.Ca.bind(d),0);else if(wt(d,"readystatechange"),dr(d)==4){d.h=!1;try{const O=d.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var T;if(T=O===0){let $=String(d.D).match(Qg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),T=!zA.test($?$.toLowerCase():"")}y=T}if(y)wt(d,"complete"),wt(d,"success");else{d.o=6;try{var U=dr(d)>2?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.ca()+"]",sy(d)}}finally{Ml(d)}}}}function Ml(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||wt(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function dr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),CA(g)}};function ay(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function KA(d){const g={};d=(d.g&&dr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(N(d[T]))continue;var y=xA(d[T]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const O=g[U]||[];g[U]=O,O.push(y)}X(g,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function ly(d){this.za=0,this.i=[],this.j=new Lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zo("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zo("baseRetryDelayMs",5e3,d),this.Za=zo("retryDelaySeedMs",1e4,d),this.Ta=zo("forwardChannelMaxRetries",2,d),this.va=zo("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new $g(d&&d.concurrentRequestLimit),this.Ba=new $A,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ly.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,T){St(0),this.W=d,this.H=g||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.J=yy(this,null,this.W),Vl(this)};function bd(d){if(uy(d),d.I==3){var g=d.V++,y=Tn(d.J);if(we(y,"SID",d.M),we(y,"RID",g),we(y,"TYPE","terminate"),Wo(d,y),g=new lr(d,d.j,g),g.M=2,g.A=kl(Tn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.A,y=!0),y||(g.g=_y(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Nl(g)}gy(d)}function Dl(d){d.g&&(qd(d),d.g.cancel(),d.g=null)}function uy(d){Dl(d),d.v&&(o.clearTimeout(d.v),d.v=null),Ll(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Vl(d){if(!zg(d.h)&&!d.m){d.m=!0;var g=d.Ea;L||v(),b||(L(),b=!0),S.add(g,d),d.D=0}}function JA(d,g){return Wg(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Vo(u(d.Ea,d,g),my(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const U=new lr(this,this.j,d);let O=this.o;if(this.U&&(O?(O=j(O),Be(O,this.U)):O=this.U),this.u!==null||this.R||(U.J=O,O=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=dy(this,U,g),y=Tn(this.J),we(y,"RID",d),we(y,"CVER",22),this.G&&we(y,"X-HTTP-Session-Id",this.G),Wo(this,y),O&&(this.R?g="headers="+Uo(ry(O))+"&"+g:this.u&&Fd(y,this.u,O)),Vd(this.h,U),this.Ra&&we(y,"TYPE","init"),this.S?(we(y,"$req",g),we(y,"SID","null"),U.U=!0,kd(U,y,null)):kd(U,y,g),this.I=2}}else this.I==3&&(d?cy(this,d):this.i.length==0||zg(this.h)||cy(this))};function cy(d,g){var y;g?y=g.l:y=d.V++;const T=Tn(d.J);we(T,"SID",d.M),we(T,"RID",y),we(T,"AID",d.K),Wo(d,T),d.u&&d.o&&Fd(T,d.u,d.o),y=new lr(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=dy(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Vd(d.h,y),kd(y,T,g)}function Wo(d,g){d.H&&W(d.H,function(y,T){we(g,T,y)}),d.l&&W({},function(y,T){we(g,T,y)})}function dy(d,g,y){y=Math.min(d.i.length,y);const T=d.l?u(d.l.Ka,d.l,d):null;e:{var U=d.i;let se=-1;for(;;){const Ke=["count="+y];se==-1?y>0?(se=U[0].g,Ke.push("ofs="+se)):se=0:Ke.push("ofs="+se);let Ee=!0;for(let et=0;et<y;et++){var O=U[et].g;const In=U[et].map;if(O-=se,O<0)se=Math.max(0,U[et].g-100),Ee=!1;else try{O="req"+O+"_"||"";try{var $=In instanceof Map?In:Object.entries(In);for(const[vi,fr]of $){let hr=fr;a(fr)&&(hr=Cd(fr)),Ke.push(O+vi+"="+encodeURIComponent(hr))}}catch(vi){throw Ke.push(O+"type="+encodeURIComponent("_badmap")),vi}}catch{T&&T(In)}}if(Ee){$=Ke.join("&");break e}}$=void 0}return d=d.i.splice(0,y),g.G=d,$}function fy(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;L||v(),b||(L(),b=!0),S.add(g,d),d.A=0}}function Od(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Vo(u(d.Da,d),my(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,hy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Vo(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Dl(this),hy(this))};function qd(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function hy(d){d.g=new lr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Tn(d.na);we(g,"RID","rpc"),we(g,"SID",d.M),we(g,"AID",d.K),we(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&we(g,"TO",d.ia),we(g,"TYPE","xmlhttp"),Wo(d,g),d.u&&d.o&&Fd(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=kl(Tn(g)),y.u=null,y.R=!0,Bg(y,d)}t.Va=function(){this.C!=null&&(this.C=null,Dl(this),Od(this),St(19))};function Ll(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function py(d,g){var y=null;if(d.g==g){Ll(d),qd(d),d.g=null;var T=2}else if(Dd(d.h,g))y=g.G,Kg(d.h,g),T=1;else return;if(d.I!=0){if(g.o)if(T==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var U=d.D;T=Rl(),wt(T,new Ug(T,y)),Vl(d)}else fy(d);else if(U=g.m,U==3||U==0&&g.X>0||!(T==1&&JA(d,g)||T==2&&Od(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),U){case 1:_i(d,5);break;case 4:_i(d,10);break;case 3:_i(d,6);break;default:_i(d,2)}}}function my(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function _i(d,g){if(d.j.info("Error code "+g),g==2){var y=u(d.bb,d),T=d.Ua;const U=!T;T=new ur(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||bo(T,"https"),kl(T),U?GA(T.toString(),y):HA(T.toString(),y)}else St(2);d.I=0,d.l&&d.l.pa(g),gy(d),uy(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function gy(d){if(d.I=0,d.ja=[],d.l){const g=Jg(d.h);(g.length!=0||d.i.length!=0)&&(R(d.ja,g),R(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function yy(d,g,y){var T=y instanceof ur?Tn(y):new ur(y);if(T.g!="")g&&(T.g=g+"."+T.g),Oo(T,T.u);else{var U=o.location;T=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const O=new ur(null);T&&bo(O,T),g&&(O.g=g),U&&Oo(O,U),y&&(O.h=y),T=O}return y=d.G,g=d.wa,y&&g&&we(T,y,g),we(T,"VER",d.ka),Wo(d,T),T}function _y(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new Le(new Ud({ab:y})):new Le(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vy(){}t=vy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ul(){}Ul.prototype.g=function(d,g){return new qt(d,g)};function qt(d,g){ft.call(this),this.g=new ly(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ss(this)}p(qt,ft),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){bd(this.g)},qt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Cd(d),d=y);g.i.push(new VA(g.Ya++,d)),g.I==3&&Vl(g)},qt.prototype.N=function(){this.g.l=null,delete this.j,bd(this.g),delete this.g,qt.Z.N.call(this)};function Ey(d){Ad.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Ey,Ad);function Ty(){Rd.call(this),this.status=1}p(Ty,Rd);function ss(d){this.g=d}p(ss,vy),ss.prototype.ra=function(){wt(this.g,"a")},ss.prototype.qa=function(d){wt(this.g,new Ey(d))},ss.prototype.pa=function(d){wt(this.g,new Ty)},ss.prototype.oa=function(){wt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,EC=function(){return new Ul},vC=function(){return Rl()},_C=mi,Jh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pl.NO_ERROR=0,Pl.TIMEOUT=8,Pl.HTTP_ERROR=6,Ru=Pl,Fg.COMPLETE="complete",yC=Fg,Mg.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",ft.prototype.listen=ft.prototype.J,ua=Mg,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,gC=Le}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});const Tv="@firebase/firestore",Iv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Sm("@firebase/firestore");function as(){return Qi.logLevel}function J(t,...e){if(Qi.logLevel<=ue.DEBUG){const n=e.map(Fm);Qi.debug(`Firestore (${Io}): ${t}`,...n)}}function nr(t,...e){if(Qi.logLevel<=ue.ERROR){const n=e.map(Fm);Qi.error(`Firestore (${Io}): ${t}`,...n)}}function ao(t,...e){if(Qi.logLevel<=ue.WARN){const n=e.map(Fm);Qi.warn(`Firestore (${Io}): ${t}`,...n)}}function Fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TC(t,r,n)}function TC(t,e,n){let r=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw nr(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||TC(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class iD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sD{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new IC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class oD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Qh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return wf(i)===wf(s)?ce(i,s):wf(i)?1:-1}return ce(t.length,e.length)}const cD=55296,dD=57343;function wf(t){const e=t.charCodeAt(0);return e>=cD&&e<=dD}function lo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Cn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),i=Cn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):Qh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Te extends Cn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const fD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Cn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return fD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sv}static keyField(){return new lt([Sv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Te.fromString(e))}static fromName(e){return new Z(Te.fromString(e).popFirst(5))}static empty(){return new Z(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e,n){if(!n)throw new z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hD(t,e,n,r){if(e===!0&&r===!0)throw new z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cv(t){if(!Z.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Av(t){if(Z.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jc(t);throw new z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function yl(t,e){if(!SC(t))throw new z(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new z(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=-62135596800,Pv=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Pv);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Rv)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pv}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:ze("string",Ae._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ae(0,0))}static max(){return new re(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=-1;function pD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new ti(i,Z.empty(),e)}function mD(t){return new ti(t.readTime,t.key,Qa)}class ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ti(re.min(),Z.empty(),Qa)}static max(){return new ti(re.max(),Z.empty(),Qa)}}function gD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _D{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==yD)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function vD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function So(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ed.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=-1;function td(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function ED(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="";function TD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nv(e)),e=ID(t.get(n),e);return Nv(e)}function ID(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case CC:n+="";break;default:n+=s}}return n}function Nv(t){return t+CC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xv(this.data.getIterator())}getIteratorFrom(e){return new xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Ye(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RC("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const wD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=wD.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="server_timestamp",NC="__type__",kC="__previous_value__",xC="__local_write_time__";function qm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NC])==null?void 0:r.stringValue)===PC}function nd(t){const e=t.mapValue.fields[kC];return qm(e)?nd(e):e}function Ya(t){const e=ni(t.mapValue.fields[xC].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const yc="(default)";class Xa{constructor(e,n){this.projectId=e,this.database=n||yc}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===yc}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="__type__",CD="__max__",ou={mapValue:{}},DC="__vector__",_c="value";function ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qm(t)?4:RD(t)?9007199254740991:AD(t)?10:11:te(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=ii(t);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ya(t).isEqual(Ya(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ni(i.timestampValue),a=ni(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ri(i.bytesValue).isEqual(ri(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=be(i.doubleValue),a=be(s.doubleValue);return o===a?gc(o)===gc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kv(o)!==kv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!bn(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Za(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function uo(t,e){if(t===e)return 0;const n=ii(t),r=ii(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=be(s.integerValue||s.doubleValue),l=be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Mv(t.timestampValue,e.timestampValue);case 4:return Mv(Ya(t),Ya(e));case 5:return Qh(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ri(s),l=ri(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ce(a[u],l[u]);if(h!==0)return h}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(be(s.latitude),be(o.latitude));return a!==0?a:ce(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,_,R,P;const a=s.fields||{},l=o.fields||{},u=(m=a[_c])==null?void 0:m.arrayValue,h=(_=l[_c])==null?void 0:_.arrayValue,p=ce(((R=u==null?void 0:u.values)==null?void 0:R.length)||0,((P=h==null?void 0:h.values)==null?void 0:P.length)||0);return p!==0?p:Dv(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ou.mapValue&&o===ou.mapValue)return 0;if(s===ou.mapValue)return 1;if(o===ou.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=Qh(l[p],h[p]);if(m!==0)return m;const _=uo(a[l[p]],u[h[p]]);if(_!==0)return _}return ce(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function Mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=ni(t),r=ni(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Dv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=uo(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function co(t){return Yh(t)}function Yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Yh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Yh(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Pu(t){switch(ii(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(t);return e?16+Pu(e):16;case 5:return 2*t.stringValue.length;case 6:return ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Pu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return di(r.fields,(s,o)=>{i+=s.length+Pu(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function Vv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xh(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function Lv(t){return!!t&&"nullValue"in t}function Uv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nu(t){return!!t&&"mapValue"in t}function AD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MC])==null?void 0:r.stringValue)===DC}function wa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wa(t.arrayValue.values[n]);return e}return{...t}}function RD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wa(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=wa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Nu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){di(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(wa(this.value))}}function VC(t){const e=[];return di(t.fields,(n,r)=>{const i=new lt([n]);if(Nu(r)){const s=VC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,re.min(),re.min(),re.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new _t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new _t(e,2,n,re.min(),re.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,re.min(),re.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.position=e,this.inclusive=n}}function Fv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function PD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{}class $e extends LC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kD(e,n,r):n==="array-contains"?new DD(e,r):n==="in"?new VD(e,r):n==="not-in"?new LD(e,r):n==="array-contains-any"?new UD(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xD(e,r):new MD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uo(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends LC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vn(e,n)}matches(e){return UC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UC(t){return t.op==="and"}function FC(t){return ND(t)&&UC(t)}function ND(t){for(const e of t.filters)if(e instanceof vn)return!1;return!0}function Zh(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+co(t.value);if(FC(t))return t.filters.map(e=>Zh(e)).join(",");{const e=t.filters.map(n=>Zh(n)).join(",");return`${t.op}(${e})`}}function bC(t,e){return t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(t,e):t instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bC(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function OC(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(OC).join(" ,")+"}"}(t):"Filter"}class kD extends $e{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class xD extends $e{constructor(e,n){super(e,"in",n),this.keys=qC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MD extends $e{constructor(e,n){super(e,"not-in",n),this.keys=qC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class DD extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&Za(n.arrayValue,this.value)}}class VD extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}}class LD extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Za(this.value.arrayValue,n)}}class UD extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new FD(t,e,n,r,i,s,o)}function Gm(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.Te=n}return e.Te}function Hm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bv(t.startAt,e.startAt)&&bv(t.endAt,e.endAt)}function jh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bD(t,e,n,r,i,s,o,a){return new _l(t,e,n,r,i,s,o,a)}function BC(t){return new _l(t)}function qv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GC(t){return t.collectionGroup!==null}function Sa(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ec(s,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new Ec(lt.keyField(),r))}return e.Ie}function Dn(t){const e=ie(t);return e.Ee||(e.Ee=OD(e,Sa(t))),e.Ee}function OD(t,e){if(t.limitType==="F")return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ec(i.field,s)});const n=t.endAt?new vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vc(t.startAt.position,t.startAt.inclusive):null;return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ep(t,e){const n=t.filters.concat([e]);return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tp(t,e,n){return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rd(t,e){return Hm(Dn(t),Dn(e))&&t.limitType===e.limitType}function HC(t){return`${Gm(Dn(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>OC(i)).join(", ")}]`),td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>co(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>co(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function id(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Sa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Fv(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Sa(r),i)||r.endAt&&!function(o,a,l){const u=Fv(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Sa(r),i))}(t,e)}function qD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $C(t){return(e,n)=>{let r=!1;for(const i of Sa(t)){const s=BD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function BD(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?uo(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new Ve(Z.comparator);function rr(){return GD}const zC=new Ve(Z.comparator);function ca(...t){let e=zC;for(const n of t)e=e.insert(n.key,n);return e}function WC(t){let e=zC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pi(){return Ca()}function KC(){return Ca()}function Ca(){return new es(t=>t.toString(),(t,e)=>t.isEqual(e))}const HD=new Ve(Z.comparator),$D=new Ye(Z.comparator);function de(...t){let e=$D;for(const n of t)e=e.add(n);return e}const zD=new Ye(ce);function WD(){return zD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function JC(t){return{integerValue:""+t}}function KD(t,e){return ED(e)?JC(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function JD(t,e,n){return t instanceof Tc?function(i,s){const o={fields:{[NC]:{stringValue:PC},[xC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qm(s)&&(s=nd(s)),s&&(o.fields[kC]=s),{mapValue:o}}(n,e):t instanceof fo?YC(t,e):t instanceof ja?XC(t,e):function(i,s){const o=QC(i,s),a=Bv(o)+Bv(i.Ae);return Xh(o)&&Xh(i.Ae)?JC(a):$m(i.serializer,a)}(t,e)}function QD(t,e,n){return t instanceof fo?YC(t,e):t instanceof ja?XC(t,e):n}function QC(t,e){return t instanceof Ic?function(r){return Xh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Tc extends sd{}class fo extends sd{constructor(e){super(),this.elements=e}}function YC(t,e){const n=ZC(e);for(const r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends sd{constructor(e){super(),this.elements=e}}function XC(t,e){let n=ZC(e);for(const r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}class Ic extends sd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bv(t){return be(t.integerValue||t.doubleValue)}function ZC(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.field=e,this.transform=n}}function XD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fo&&i instanceof fo||r instanceof ja&&i instanceof ja?lo(r.elements,i.elements,bn):r instanceof Ic&&i instanceof Ic?bn(r.Ae,i.Ae):r instanceof Tc&&i instanceof Tc}(t.transform,e.transform)}class ZD{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class od{}function jC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zm(t.key,zt.none()):new vl(t.key,t.data,zt.none());{const n=t.data,r=Lt.empty();let i=new Ye(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(t.key,r,new Ht(i.toArray()),zt.none())}}function jD(t,e,n){t instanceof vl?function(i,s,o){const a=i.value.clone(),l=Hv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,s,o){if(!ku(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Hv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(e0(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Aa(t,e,n,r){return t instanceof vl?function(s,o,a,l){if(!ku(s.precondition,o))return a;const u=s.value.clone(),h=$v(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(s,o,a,l){if(!ku(s.precondition,o))return a;const u=$v(s.fieldTransforms,l,o),h=o.data;return h.setAll(e0(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return ku(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=QC(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function Gv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lo(r,i,(s,o)=>XD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vl extends od{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends od{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function e0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hv(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QD(o,a,n[i]))}return r}function $v(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,JD(s,o,e))}return r}class zm extends od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tV extends od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&jD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=jC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>Gv(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>Gv(n,r))}}class Wm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return HD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Wm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,pe;function sV(t){switch(t){case q.OK:return te(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function t0(t){if(t===void 0)return nr("GRPC error has no .code"),q.UNKNOWN;switch(t){case Ge.OK:return q.OK;case Ge.CANCELLED:return q.CANCELLED;case Ge.UNKNOWN:return q.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return q.INTERNAL;case Ge.UNAVAILABLE:return q.UNAVAILABLE;case Ge.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ge.NOT_FOUND:return q.NOT_FOUND;case Ge.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ge.ABORTED:return q.ABORTED;case Ge.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ge.DATA_LOSS:return q.DATA_LOSS;default:return te(39323,{code:t})}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=new Jr([4294967295,4294967295],0);function zv(t){const e=oV().encode(t),n=new mC;return n.update(e),new Uint8Array(n.digest())}function Wv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([i,s],0)]}class Km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(r<0)throw new da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Jr.fromNumber(r)));return i.compare(aV)===1&&(i=new Jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zv(e),[r,i]=Wv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Km(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=zv(e),[r,i]=Wv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ad(re.min(),i,new Ve(ce),rr(),de())}}class El{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new El(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class n0{constructor(e,n){this.targetId=e,this.Ce=n}}class r0{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Kv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new El(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Jv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lV{constructor(e){this.Ge=e,this.ze=new Map,this.je=rr(),this.Je=au(),this.He=au(),this.Ye=new Ve(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(jh(s))if(r===0){const o=new Z(s.path);this.et(n,o,_t.newNoDocument(o,re.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ri(r).toUint8Array()}catch(l){if(l instanceof RC)return ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Km(o,i,s)}catch(l){return ao(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&jh(a.target)){const l=new Z(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,_t.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=de();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new ad(e,n,this.Ye,this.je,r);return this.je=rr(),this.Je=au(),this.He=au(),this.Ye=new Ve(ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Kv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ye(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ye(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function au(){return new Ve(Z.comparator)}function Jv(){return new Ve(Z.comparator)}const uV={asc:"ASCENDING",desc:"DESCENDING"},cV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dV={and:"AND",or:"OR"};class fV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(t,e){return t.useProto3Json||td(e)?e:{value:e}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hV(t,e){return wc(t,e.toTimestamp())}function Vn(t){return _e(!!t,49232),re.fromTimestamp(function(n){const r=ni(n);return new Ae(r.seconds,r.nanos)}(t))}function Jm(t,e){return rp(t,e).canonicalString()}function rp(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function s0(t){const e=Te.fromString(t);return _e(c0(e),10190,{key:e.toString()}),e}function ip(t,e){return Jm(t.databaseId,e.path)}function Sf(t,e){const n=s0(e);if(n.get(1)!==t.databaseId.projectId)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(a0(n))}function o0(t,e){return Jm(t.databaseId,e)}function pV(t){const e=s0(t);return e.length===4?Te.emptyPath():a0(e)}function sp(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function a0(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Qv(t,e,n){return{name:ip(t,e),fields:n.value.mapValue.fields}}function mV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(_e(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?q.UNKNOWN:t0(u.code);return new z(h,u.message||"")}(o);n=new r0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sf(t,r.document.name),s=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):re.min(),a=new Lt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new xu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sf(t,r.document),s=r.readTime?Vn(r.readTime):re.min(),o=_t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sf(t,r.document),s=r.removedTargetIds||[];n=new xu([],s,i,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iV(i,s),a=r.targetId;n=new n0(a,o)}}return n}function gV(t,e){let n;if(e instanceof vl)n={update:Qv(t,e.key,e.value)};else if(e instanceof zm)n={delete:ip(t,e.key)};else if(e instanceof fi)n={update:Qv(t,e.key,e.data),updateMask:CV(e.fieldMask)};else{if(!(e instanceof tV))return te(16599,{Vt:e.type});n={verify:ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ja)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ic)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function yV(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Vn(i.updateTime):Vn(s);return o.isEqual(re.min())&&(o=Vn(s)),new ZD(o,i.transformResults||[])}(n,e))):[]}function _V(t,e){return{documents:[o0(t,e.path)]}}function vV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=o0(t,i);const s=function(u){if(u.length!==0)return u0(vn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:us(m.field),direction:IV(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=np(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function EV(t){let e=pV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=l0(p);return m instanceof vn&&FC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(R){return new Ec(cs(R.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,td(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new vc(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,_=p.values||[];return new vc(_,m)}(n.endAt)),bD(e,i,o,s,a,"F",l,u)}function TV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function l0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cs(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cs(n.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cs(n.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cs(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(cs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>l0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function IV(t){return uV[t]}function wV(t){return cV[t]}function SV(t){return dV[t]}function us(t){return{fieldPath:t.canonicalString()}}function cs(t){return lt.fromServerFormat(t.fieldPath)}function u0(t){return t instanceof $e?function(n){if(n.op==="=="){if(Uv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(Lv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(Lv(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:wV(n.op),value:n.value}}}(t):t instanceof vn?function(n){const r=n.getFilters().map(i=>u0(i));return r.length===1?r[0]:{compositeFilter:{op:SV(n.op),filters:r}}}(t):te(54877,{filter:t})}function CV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function c0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.yt=e}}function RV(t){const e=EV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.Cn=new NV}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ti.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class NV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d0=41943040;class Dt{static withCacheSize(e){return new Dt(e,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(d0,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ho(0)}static cr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LruGarbageCollector",kV=1048576;function Zv([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class xV{constructor(e){this.Ir=e,this.buffer=new Ye(Zv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(Xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){So(n)?J(Xv,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.Vr(3e5)})}}class DV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(ed.ce);const r=new xV(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Yv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),as()<=ue.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function VV(t,e){return new DV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.changes=new es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Aa(r.mutation,i,Ht.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ca();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=rr();const o=Ca(),a=function(){return Ca()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof fi)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Aa(h.mutation,u,h.mutation.getFieldMask(),Ae.now())):o.set(u.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new UV(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Ca();let i=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Ht.empty();h=a.applyToLocalView(u,h),r.set(l,h);const p=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,p=KC();h.forEach(m=>{if(!s.has(m)){const _=jC(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Pi());let a=Qa,l=s;return o.next(u=>B.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,de())).next(h=>({batchId:a,changes:WC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=ca();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ca();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const u=function(p,m){return new _l(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=ca();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Aa(h.mutation,u,Ht.empty(),Ae.now()),id(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:RV(i.bundledQuery),readTime:Vn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.overlays=new Ve(Z.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pi();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Pi(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Pi(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Pi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return B.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rV(n,r));let s=this.qr.get(n);s===void 0&&(s=de(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.Qr=new Ye(nt.$r),this.Ur=new Ye(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Te([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Te([])),r=new nt(n,e),i=new nt(n,e+1);let s=de();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Om:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new nt(new Z(s),0);let a=new Ye(ce);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),B.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.ri=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=rr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_t.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rr();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||gD(mD(h),r)<=0||(i.has(h.key)||id(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HV(this)}getSize(e){return B.resolve(this.size)}}class HV extends LV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.persistence=e,this.si=new es(n=>Gm(n),Hm),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Qm,this.targetCount=0,this.ai=ho.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.ui={},this.overlays={},this.ci=new ed(0),this.li=!1,this.li=!0,this.hi=new qV,this.referenceDelegate=e(this),this.Pi=new $V(this),this.indexManager=new PV,this.remoteDocumentCache=function(i){return new GV(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new AV(n),this.Ii=new bV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BV(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new zV(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class zV extends _D{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Ri=new Qm,this.Vi=null}static mi(e){return new Ym(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=Z.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sc{constructor(e,n){this.persistence=e,this.pi=new es(r=>TD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VV(this,n)}static mi(e,n){return new Sc(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Xm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Uk()?8:vD(Tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new WV;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(as()<=ue.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(as()<=ue.DEBUG&&J("QueryEngine","Query:",ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(as()<=ue.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):B.resolve())}ys(e,n){if(qv(n))return B.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tp(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return qv(n)||i.isEqual(re.min())?B.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?B.resolve(null):(as()<=ue.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(n)),this.vs(e,o,n,pD(i,Qa)).next(a=>a))})}Ds(e,n){let r=new Ye($C(e));return n.forEach((i,s)=>{id(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return as()<=ue.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",ls(n)),this.ps.getDocumentsMatchingQuery(e,n,ti.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",JV=3e8;class QV{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ve(ce),this.xs=new es(s=>Gm(s),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function YV(t,e,n,r){return new QV(t,e,n,r)}async function h0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function XV(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const p=u.batch,m=p.keys();let _=B.resolve();return m.forEach(R=>{_=_.next(()=>h.getEntry(l,R)).next(P=>{const x=u.docVersions.get(R);_e(x!==null,48541),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function p0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ZV(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(P,x,w){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=JV?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,h)&&a.push(n.Pi.updateTargetData(s,_))});let l=rr(),u=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jV(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(re.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function jV(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(Zm,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function eL(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Om),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tL(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function op(t,e,n){const r=ie(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!So(o))throw o;J(Zm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function jv(t,e,n){const r=ie(t);let i=re.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const p=ie(l),m=p.xs.get(h);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)}(r,o,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:de())).next(a=>(nL(r,qD(e),a),{documents:a,Qs:s})))}function nL(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class eE{constructor(){this.activeTargetIds=WD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rL{constructor(){this.Mo=new eE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="ConnectivityMonitor";class nE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(tE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(tE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function ap(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="RestConnection",sL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===yc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=ap(),a=this.zo(e,n.toUriEncodedString());J(Cf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=vo(u);return this.Jo(e,a,l,r,h).then(p=>(J(Cf,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ao(Cf,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=sL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class lL extends oL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=ap();return new Promise((a,l)=>{const u=new gC;u.setWithCredentials(!0),u.listenOnce(yC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ru.NO_ERROR:const p=u.getResponseJson();J(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Ru.TIMEOUT:J(mt,`RPC '${e}' ${o} timed out`),l(new z(q.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const m=u.getStatus();if(J(mt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(E)>=0?E:q.UNKNOWN}(R.status);l(new z(P,R.message))}else l(new z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(q.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{J(mt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);J(mt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=ap(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EC(),a=vC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");J(mt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);this.I_(p);let m=!1,_=!1;const R=new aL({Yo:x=>{_?J(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(J(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),J(mt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Zo:()=>p.close()}),P=(x,w,E)=>{x.listen(w,C=>{try{E(C)}catch(V){setTimeout(()=>{throw V},0)}})};return P(p,ua.EventType.OPEN,()=>{_||(J(mt,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),P(p,ua.EventType.CLOSE,()=>{_||(_=!0,J(mt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),P(p,ua.EventType.ERROR,x=>{_||(_=!0,ao(mt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),R.a_(new z(q.UNAVAILABLE,"The operation could not be completed")))}),P(p,ua.EventType.MESSAGE,x=>{var w;if(!_){const E=x.data[0];_e(!!E,16349);const C=E,V=(C==null?void 0:C.error)||((w=C[0])==null?void 0:w.error);if(V){J(mt,`RPC '${e}' stream ${i} received error:`,V);const L=V.status;let b=function(I){const A=Ge[I];if(A!==void 0)return t0(A)}(L),S=V.message;b===void 0&&(b=q.INTERNAL,S="Unknown error status: "+L+" with message "+V.message),_=!0,R.a_(new z(b,S)),p.close()}else J(mt,`RPC '${e}' stream ${i} received:`,E),R.u_(E)}}),P(a,_C.STAT_EVENT,x=>{x.stat===Jh.PROXY?J(mt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Jh.NOPROXY&&J(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){return new fV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class g0{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new m0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new z(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(rE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uL extends g0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mV(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Vn(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=jh(l)?{documents:_V(s,l)}:{query:vV(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=i0(s,o.resumeToken);const u=np(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=wc(s,o.snapshotVersion.toTimestamp());const u=np(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=TV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class cL extends g0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yV(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{}class fL extends dL{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,rp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(q.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,rp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class hL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="RemoteStore";class pL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ts(this)&&(J(Yi,"Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.Ea.add(4),await Tl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ud(u)}(this))})}),this.Ra=new hL(r,i)}}async function ud(t){if(ts(t))for(const e of t.da)await e(!0)}async function Tl(t){for(const e of t.da)await e(!1)}function y0(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ng(n)?tg(n):Co(n).O_()&&eg(n,e))}function jm(t,e){const n=ie(t),r=Co(n);n.Ia.delete(e),r.O_()&&_0(n,e),n.Ia.size===0&&(r.O_()?r.L_():ts(n)&&n.Ra.set("Unknown"))}function eg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).Y_(e)}function _0(t,e){t.Va.Ue(e),Co(t).Z_(e)}function tg(t){t.Va=new lV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.Ra.ua()}function ng(t){return ts(t)&&!Co(t).x_()&&t.Ia.size>0}function ts(t){return ie(t).Ea.size===0}function v0(t){t.Va=void 0}async function mL(t){t.Ra.set("Online")}async function gL(t){t.Ia.forEach((e,n)=>{eg(t,e)})}async function yL(t,e){v0(t),ng(t)?(t.Ra.ha(e),tg(t)):t.Ra.set("Unknown")}async function _L(t,e,n){if(t.Ra.set("Online"),e instanceof r0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){J(Yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cc(t,r)}else if(e instanceof xu?t.Va.Ze(e):e instanceof n0?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await p0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),_0(s,l);const p=new Vr(h.target,l,u,h.sequenceNumber);eg(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(Yi,"Failed to raise snapshot:",r),await Cc(t,r)}}async function Cc(t,e,n){if(!So(e))throw e;t.Ea.add(1),await Tl(t),t.Ra.set("Offline"),n||(n=()=>p0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Yi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ud(t)})}function E0(t,e){return e().catch(n=>Cc(t,n,e))}async function cd(t){const e=ie(t),n=si(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Om;for(;vL(e);)try{const i=await eL(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,EL(e,i)}catch(i){await Cc(e,i)}T0(e)&&I0(e)}function vL(t){return ts(t)&&t.Ta.length<10}function EL(t,e){t.Ta.push(e);const n=si(t);n.O_()&&n.X_&&n.ea(e.mutations)}function T0(t){return ts(t)&&!si(t).x_()&&t.Ta.length>0}function I0(t){si(t).start()}async function TL(t){si(t).ra()}async function IL(t){const e=si(t);for(const n of t.Ta)e.ea(n.mutations)}async function wL(t,e,n){const r=t.Ta.shift(),i=Wm.from(r,e,n);await E0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await cd(t)}async function SL(t,e){e&&si(t).X_&&await async function(r,i){if(function(o){return sV(o)&&o!==q.ABORTED}(i.code)){const s=r.Ta.shift();si(r).B_(),await E0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await cd(r)}}(t,e),T0(t)&&I0(t)}async function iE(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),J(Yi,"RemoteStore received new credentials");const r=ts(n);n.Ea.add(3),await Tl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ud(n)}async function CL(t,e){const n=ie(t);e?(n.Ea.delete(2),await ud(n)):e||(n.Ea.add(2),await Tl(n),n.Ra.set("Unknown"))}function Co(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new uL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:mL.bind(null,t),t_:gL.bind(null,t),r_:yL.bind(null,t),H_:_L.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ng(t)?tg(t):t.Ra.set("Unknown")):(await t.ma.stop(),v0(t))})),t.ma}function si(t){return t.fa||(t.fa=function(n,r,i){const s=ie(n);return s.sa(),new cL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:TL.bind(null,t),r_:SL.bind(null,t),ta:IL.bind(null,t),na:wL.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await cd(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Yi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(t,e){if(nr("AsyncQueue",`${e}: ${t}`),So(t))return new z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static emptySet(e){return new Vs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ca(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.ga=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,Vs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class RL{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=oE(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new z(q.ABORTED,"Firestore shutting down"))}}function oE(){return new es(t=>HC(t),rd)}async function PL(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new AL,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=ig(o,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&sg(n)}async function NL(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kL(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&sg(n)}function xL(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function sg(t){t.Ca.forEach(e=>{e.next()})}var lp,aE;(aE=lp||(lp={})).Ma="default",aE.Cache="cache";class ML{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.key=e}}class S0{constructor(e){this.key=e}}class DL{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=$C(e),this.tu=new Vs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new sE,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=id(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?R!==P&&(r.track({type:3,doc:_}),x=!0):this.su(m,_)||(r.track({type:2,doc:_}),x=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),x=!0):m&&!_&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(a=!0)),x&&(_?(o=o.add(_),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(_,R){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:x})}};return P(_)-P(R)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new po(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new S0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new w0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const og="SyncEngine";class VL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LL{constructor(e){this.key=e,this.hu=!1}}class UL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new es(a=>HC(a),rd),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(Z.comparator),this.Au=new Map,this.Ru=new Qm,this.Vu={},this.mu=new Map,this.fu=ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FL(t,e,n=!0){const r=k0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await C0(r,e,n,!0),i}async function bL(t,e){const n=k0(t);await C0(n,e,!0,!1)}async function C0(t,e,n,r){const i=await tL(t.localStore,Dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await OL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&y0(t.remoteStore,i),a}async function OL(t,e,n,r,i){t.pu=(p,m,_)=>async function(P,x,w,E){let C=x.view.ru(w);C.Cs&&(C=await jv(P.localStore,x.query,!1).then(({documents:S})=>x.view.ru(S,C)));const V=E&&E.targetChanges.get(x.targetId),L=E&&E.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(C,P.isPrimaryClient,V,L);return uE(P,x.targetId,b.au),b.snapshot}(t,p,m,_);const s=await jv(t.localStore,e,!0),o=new DL(e,s.Qs),a=o.ru(s.documents),l=El.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);uE(t,n,u.au);const h=new VL(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function qL(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!rd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await op(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jm(r.remoteStore,i.targetId),up(r,i.targetId)}).catch(wo)):(up(r,i.targetId),await op(r.localStore,i.targetId,!0))}async function BL(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jm(n.remoteStore,r.targetId))}async function GL(t,e,n){const r=QL(t);try{const i=await function(o,a){const l=ie(o),u=Ae.now(),h=a.reduce((_,R)=>_.add(R.key),de());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=rr(),P=de();return l.Ns.getEntries(_,h).next(x=>{R=x,R.forEach((w,E)=>{E.isValidDocument()||(P=P.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,R)).next(x=>{p=x;const w=[];for(const E of a){const C=eV(E,p.get(E.key).overlayedDocument);C!=null&&w.push(new fi(E.key,C,VC(C.value.mapValue),zt.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,w,a)}).next(x=>{m=x;const w=x.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(_,x.batchId,w)})}).then(()=>({batchId:m.batchId,changes:WC(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ve(ce)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Il(r,i.changes),await cd(r.remoteStore)}catch(i){const s=ig(i,"Failed to persist write");n.reject(s)}}async function A0(t,e){const n=ie(t);try{const r=await ZV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?_e(o.hu,14607):i.removedDocuments.size>0&&(_e(o.hu,42227),o.hu=!1))}),await Il(n,r,e)}catch(r){await wo(r)}}function lE(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(a)&&(u=!0)}),u&&sg(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HL(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ve(Z.comparator);o=o.insert(s,_t.newNoDocument(s,re.min()));const a=de().add(s),l=new ad(re.min(),new Map,new Ve(ce),o,a);await A0(r,l),r.du=r.du.remove(s),r.Au.delete(e),ag(r)}else await op(r.localStore,e,!1).then(()=>up(r,e,n)).catch(wo)}async function $L(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await XV(n.localStore,e);P0(n,r,null),R0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Il(n,i)}catch(i){await wo(i)}}async function zL(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(_e(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);P0(r,e,n),R0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Il(r,i)}catch(i){await wo(i)}}function R0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function P0(t,e,n){const r=ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function up(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||N0(t,r)})}function N0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ag(t))}function uE(t,e,n){for(const r of n)r instanceof w0?(t.Ru.addReference(r.key,e),WL(t,r)):r instanceof S0?(J(og,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||N0(t,r.key)):te(19791,{wu:r})}function WL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(og,"New document in limbo: "+n),t.Eu.add(r),ag(t))}function ag(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new LL(n)),t.du=t.du.insert(n,r),y0(t.remoteStore,new Vr(Dn(BC(n.path)),r,"TargetPurposeLimboResolution",ed.ce))}}async function Il(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=Xm.As(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(u,m=>B.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>B.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!So(p))throw p;J(Zm,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),R=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,P)}}}(r.localStore,s))}async function KL(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){J(og,"User change. New user:",e.toKey());const r=await h0(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new z(q.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Il(n,r.Ls)}}function JL(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let i=de();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function k0(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=A0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HL.bind(null,e),e.Pu.H_=kL.bind(null,e.eventManager),e.Pu.yu=xL.bind(null,e.eventManager),e}function QL(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YV(this.persistence,new KV,e.initialUser,this.serializer)}Cu(e){return new f0(Ym.mi,this.serializer)}Du(e){return new rL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class YL extends Ac{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Sc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new f0(r=>Sc.mi(r,n),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KL.bind(null,this.syncEngine),await CL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RL}()}createDatastore(e){const n=ld(e.databaseInfo.databaseId),r=function(s){return new lL(s)}(e.databaseInfo);return function(s,o,a,l){return new fL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new pL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lE(this.syncEngine,n,0),function(){return nE.v()?new nE:new iL}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const p=new UL(i,s,o,a,l,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);J(Yi,"RemoteStore shutting down."),s.Ea.add(5),await Tl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="FirestoreClient";class ZL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J(oi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(oi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ig(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rf(t,e){t.asyncQueue.verifyOperationInProgress(),J(oi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jL(t);J(oi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iE(e.remoteStore,i)),t._onlineComponents=e}async function jL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(oi,"Using user provided OfflineComponentProvider");try{await Rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await Rf(t,new Ac)}}else J(oi,"Using default OfflineComponentProvider"),await Rf(t,new YL(void 0));return t._offlineComponents}async function x0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(oi,"Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(J(oi,"Using default OnlineComponentProvider"),await cE(t,new cp))),t._onlineComponents}function e2(t){return x0(t).then(e=>e.syncEngine)}async function t2(t){const e=await x0(t),n=e.eventManager;return n.onListen=FL.bind(null,e.syncEngine),n.onUnlisten=qL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BL.bind(null,e.syncEngine),n}function n2(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new XL({next:m=>{h.Nu(),o.enqueueAndForget(()=>NL(s,p)),m.fromCache&&l.source==="server"?u.reject(new z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new ML(a,h,{includeMetadataChanges:!0,qa:!0});return PL(s,p)}(await t2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="firestore.googleapis.com",fE=!0;class hE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D0,this.ssl=fE}else this.host=e.host,this.ssl=e.ssl??fE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kV)throw new z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rD;switch(r.type){case"firstParty":return new aD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dE.get(n);r&&(J("ComponentProvider","Removing Datastore"),dE.delete(n),r.terminate())}(this),Promise.resolve()}}function r2(t,e,n,r={}){var u;t=ei(t,dd);const i=vo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(xS(`https://${a}`),MS("Firestore",!0)),s.host!==D0&&s.host!==a&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!jr(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=gt.MOCK_USER;else{h=Rk(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gt(m)}t._authCredentials=new iD(new IC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yl(n,We._jsonSchema))return new We(e,r||null,new Z(Te.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:ze("string",We._jsonSchemaVersion),referencePath:ze("string")};class Yr extends Ao{constructor(e,n,r){super(e,n,BC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new Z(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function i2(t,e,...n){if(t=Xe(t),wC("collection","path",e),t instanceof dd){const r=Te.fromString(e,...n);return Av(r),new Yr(t,null,r)}{if(!(t instanceof We||t instanceof Yr))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Av(r),new Yr(t.firestore,null,r)}}function lg(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=bm.newId()),wC("doc","path",e),t instanceof dd){const r=Te.fromString(e,...n);return Cv(r),new We(t,null,new Z(r))}{if(!(t instanceof We||t instanceof Yr))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Cv(r),new We(t.firestore,t instanceof Yr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class mE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new m0(this,"async_queue_retry"),this._c=()=>{const r=Af();r&&J(pE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Af();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!So(e))throw e;J(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",gE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rg.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:gE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class wl extends dd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function s2(t,e){const n=typeof t=="object"?t:US(),r=typeof t=="string"?t:yc,i=Am(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ck("firestore");s&&r2(i,...s)}return i}function ug(t){if(t._terminated)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||o2(t),t._firestoreClient}function o2(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new SD(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,M0(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jt(dt.fromBase64String(e))}catch(n){throw new z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,jt._jsonSchema))return jt.fromBase64String(e.bytes)}}jt._jsonSchemaVersion="firestore/bytes/1.0",jt._jsonSchema={type:ze("string",jt._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(yl(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:ze("string",Ln._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,Un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Un(e.vectorValues);throw new z(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Un._jsonSchemaVersion="firestore/vectorValue/1.0",Un._jsonSchema={type:ze("string",Un._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=/^__.*__$/;class l2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new vl(e,this.data,n,this.fieldTransforms)}}class V0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function L0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class hd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(L0(this.Ac)&&a2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ld(e)}Cc(e,n,r,i=!1){return new hd({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(t){const e=t._freezeSettings(),n=ld(t._databaseId);return new u2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U0(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);dg("Data must be an object, but it was:",o,r);const a=O0(r,o);let l,u;if(s.merge)l=new Ht(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=dp(e,p,n);if(!o.contains(m))throw new z(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);B0(h,m)||h.push(m)}l=new Ht(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new l2(new Lt(a),l,u)}class md extends fd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}function c2(t,e,n){return new hd({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cg extends fd{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=c2(this,e,!0),r=this.vc.map(s=>Ro(s,n)),i=new fo(r);return new YD(e.path,i)}isEqual(e){return e instanceof cg&&jr(this.vc,e.vc)}}function F0(t,e,n,r){const i=t.Cc(1,e,n);dg("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();di(r,(l,u)=>{const h=fg(e,l,n);u=Xe(u);const p=i.yc(h);if(u instanceof md)s.push(h);else{const m=Ro(u,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Ht(s);return new V0(o,a,i.fieldTransforms)}function b0(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[dp(e,r,n)],l=[i];if(s.length%2!=0)throw new z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(dp(e,s[m])),l.push(s[m+1]);const u=[],h=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!B0(u,a[m])){const _=a[m];let R=l[m];R=Xe(R);const P=o.yc(_);if(R instanceof md)u.push(_);else{const x=Ro(R,P);x!=null&&(u.push(_),h.set(_,x))}}const p=new Ht(u);return new V0(h,p,o.fieldTransforms)}function d2(t,e,n,r=!1){return Ro(n,t.Cc(r?4:3,e))}function Ro(t,e){if(q0(t=Xe(t)))return dg("Unsupported field value:",e,t),O0(t,e);if(t instanceof fd)return function(r,i){if(!L0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ro(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:wc(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wc(i.serializer,s)}}if(r instanceof Ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jt)return{bytesValue:i0(i.serializer,r._byteString)};if(r instanceof We){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Un)return function(o,a){return{mapValue:{fields:{[MC]:{stringValue:DC},[_c]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return $m(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${jc(r)}`)}(t,e)}function O0(t,e){const n={};return AC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,i)=>{const s=Ro(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function q0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Ln||t instanceof jt||t instanceof We||t instanceof fd||t instanceof Un)}function dg(t,e,n){if(!q0(n)||!SC(n)){const r=jc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function dp(t,e,n){if((e=Xe(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return fg(t,e);throw Rc("Field path arguments must be of type string or ",t,!1,void 0,n)}const f2=new RegExp("[~\\*/\\[\\]]");function fg(t,e,n){if(e.search(f2)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sl(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(q.INVALID_ARGUMENT,a+t+l)}function B0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h2 extends G0{data(){return super.data()}}function hg(t,e){return typeof e=="string"?fg(t,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class m2 extends pg{}function g2(t,e,...n){let r=[];e instanceof pg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof mg).length,a=s.filter(l=>l instanceof gd).length;if(o>1||o>0&&a>0)throw new z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gd extends m2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gd(e,n,r)}_apply(e){const n=this._parse(e);return H0(e._query,n),new Ao(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=pd(e.firestore);return function(s,o,a,l,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vE(p,h);const R=[];for(const P of p)R.push(_E(l,s,P));m={arrayValue:{values:R}}}else m=_E(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vE(p,h),m=d2(a,o,p,h==="in"||h==="not-in");return $e.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yE(t,e,n){const r=e,i=hg("where",t);return gd._create(i,r,n)}class mg extends pg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)H0(o,l),o=ep(o,l)}(e._query,n),new Ao(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _E(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GC(e)&&n.indexOf("/")!==-1)throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Z.isDocumentKey(r))throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vv(t,new Z(r))}if(n instanceof We)return Vv(t,n._key);throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(n)}.`)}function vE(t,e){if(!Array.isArray(t)||t.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H0(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class y2{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[_c].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>be(o.doubleValue));return new Un(n)}convertGeoPoint(e){return new Ln(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ya(e));default:return null}}convertTimestamp(e){const n=ni(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);_e(c0(r),9688,{name:e});const i=new Xa(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||nr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends G0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:ze("string",Ls._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class Mu extends Ls{data(e={}){return super.data(e)}}class Us{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Mu(this._firestore,this._userDataWriter,r.key,r,new uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_2(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Us._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}Us._jsonSchemaVersion="firestore/querySnapshot/1.0",Us._jsonSchema={type:ze("string",Us._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class v2 extends y2{constructor(e){super(),this.firestore=e}convertBytes(e){return new jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function E2(t){t=ei(t,Ao);const e=ei(t.firestore,wl),n=ug(e),r=new v2(e);return p2(t._query),n2(n,t._query).then(i=>new Us(e,r,t,i))}function T2(t,e,n){t=ei(t,We);const r=ei(t.firestore,wl),i=$0(t.converter,e,n);return gg(r,[U0(pd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zt.none())])}function I2(t,e,n,...r){t=ei(t,We);const i=ei(t.firestore,wl),s=pd(i);let o;return o=typeof(e=Xe(e))=="string"||e instanceof Sl?b0(s,"updateDoc",t._key,e,n,r):F0(s,"updateDoc",t._key,e),gg(i,[o.toMutation(t._key,zt.exists(!0))])}function gg(t,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget(async()=>GL(await e2(r),i,s)),s.promise}(ug(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pd(e)}set(e,n,r){this._verifyNotCommitted();const i=Pf(e,this._firestore),s=$0(i.converter,n,r),o=U0(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Pf(e,this._firestore);let o;return o=typeof(n=Xe(n))=="string"||n instanceof Sl?b0(this._dataReader,"WriteBatch.update",s._key,n,r,i):F0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Pf(e,this._firestore);return this._mutations=this._mutations.concat(new zm(n._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pf(t,e){if((t=Xe(t)).firestore!==e)throw new z(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function S2(...t){return new cg("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){return ug(t=ei(t,wl)),new w2(t,e=>gg(t,e))}(function(e,n=!0){(function(i){Io=i})(Eo),so(new Ki("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wl(new sD(r.getProvider("auth-internal")),new lD(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kr(Tv,Iv,e),Kr(Tv,Iv,"esm2020")})();const fp={apiKey:"AIzaSyCH4tFEAWz58YI7_m1UszWahRfU4hYs9Yg",authDomain:"suhufapp-deb24.firebaseapp.com",databaseURL:"https://suhufapp-deb24-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"suhufapp-deb24",storageBucket:"suhufapp-deb24.firebasestorage.app",messagingSenderId:"293441864745",appId:"1:293441864745:web:e2ecdf71b94e60d7090838",measurementId:"G-FY9LKR682G"},z0=!!fp.apiKey&&!fp.apiKey.includes("PASTE_YOUR");let W0=null;if(z0)try{const t=LS(fp),e=jM(t),n=s2(t);W0={app:t,auth:e,db:n}}catch(t){console.error("Firebase initialization failed:",t)}else console.warn("Firebase is not configured. Login and commenting features will be disabled. Please check your src/config.ts file.");const K0=()=>W0,Nf=K0(),mo=Nf==null?void 0:Nf.auth,A2=async()=>{if(!mo){const e="Firebase Auth is not available; login unavailable.";throw console.warn(e),new Error(e)}const t=new $n;try{await lM(mo,t)}catch(e){throw console.error("Error during sign-in:",e),e}},R2=async()=>{if(!mo){console.warn("Firebase Auth is not available; logout unavailable.");return}try{await Gx(mo)}catch(t){console.error("Error during sign-out:",t)}},P2=t=>mo?Bx(mo,e=>{if(e){const{uid:n,displayName:r,email:i,photoURL:s}=e;t({uid:n,displayName:r,email:i,photoURL:s})}else t(null)}):(t(null),()=>{}),hp={login:A2,logout:R2,onAuthChange:P2,isConfigured:z0},kf=K0(),Pc=kf==null?void 0:kf.db,ai=Pc?i2(Pc,"articles"):null,N2=async(t,e)=>{if(!ai){console.warn("Firestore is disabled; comment not saved.");return}const n=lg(ai,t);try{await I2(n,{comments:S2(e)})}catch(r){console.error("Error adding comment to Firestore:",r)}},k2=async(t,e)=>{if(!ai)return null;try{const n=new Date(`${t}T00:00:00.000Z`),r=new Date(`${t}T23:59:59.999Z`),i=g2(ai,yE("date",">=",n.toISOString()),yE("date","<=",r.toISOString())),s=await E2(i);if(s.empty)return console.log(`Cache miss for ${t} (${e})`),null;const o=s.docs.map(a=>a.data());return console.log(`Cache hit for ${t} (${e})`),o.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(n){return console.error("Error fetching day from Firestore:",n),null}},x2=async t=>{if(!Pc||!ai||t.length===0)return;const e=C2(Pc);t.forEach(n=>{const r=lg(ai,n.id);e.set(r,n,{merge:!0})});try{await e.commit(),console.log(`Synced batch of ${t.length} articles to Firestore.`)}catch(n){console.error("Error syncing article batch:",n)}},M2=async t=>{if(ai)try{const e=lg(ai,t.id);await T2(e,t,{merge:!0}),console.log(`Synced article ${t.id} to Firestore.`)}catch(e){console.error(`Error syncing article ${t.id}:`,e)}},el={addCommentToArticle:N2,getArticlesForDay:k2,syncArticle:M2,syncArticlesBatch:x2},EE=t=>{let e;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(_=>_(e,m))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,i,a);return a},D2=t=>t?EE(t):EE,V2=t=>t;function L2(t,e=V2){const n=ds.useSyncExternalStore(t.subscribe,ds.useCallback(()=>e(t.getState()),[t,e]),ds.useCallback(()=>e(t.getInitialState()),[t,e]));return ds.useDebugValue(n),n}const TE=t=>{const e=D2(t),n=r=>L2(e,r);return Object.assign(n,e),n},U2=t=>t?TE(t):TE,Du="suhf-articles-cache",ta=t=>[...t].sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()),cu=t=>{try{const e=t.filter(n=>n.body);e.length>0&&localStorage.setItem(Du,JSON.stringify(e))}catch(e){console.error("Failed to save articles to local storage",e)}},Lr=U2(t=>({language:"ar",appStatus:"initializing",errorMessage:null,loadingMessage:{title:"",subtitle:""},articles:[],user:null,isNewEditionAvailable:!1,initialTodayHeadlines:[],activeTopic:"all",hydrateFromLocalStorage:()=>{try{const e=localStorage.getItem(Du);if(e){const n=JSON.parse(e);Array.isArray(n)&&t({articles:ta(n)})}}catch(e){console.error("Failed to load or parse articles from local storage",e),localStorage.removeItem(Du)}},setLanguage:e=>{localStorage.removeItem(Du),t({language:e,articles:[],initialTodayHeadlines:[],isNewEditionAvailable:!1,appStatus:"initializing",activeTopic:"all"})},setAppStatus:(e,n=null)=>t({appStatus:e,errorMessage:n}),setLoadingMessage:(e,n)=>t({loadingMessage:{title:e,subtitle:n}}),setArticles:e=>{const n=ta(e);cu(n),t({articles:n})},addArticles:e=>t(n=>{const r=ta([...n.articles,...e]);return cu(r),{articles:r}}),updateArticle:e=>t(n=>{const r=new Map(n.articles.map(s=>[s.id,s]));r.set(e.id,e);const i=ta(Array.from(r.values()));return cu(i),{articles:i}}),updateMultipleArticles:e=>t(n=>{const r=new Map(n.articles.map(o=>[o.id,o]));let i=!1;if(e.forEach(o=>{const a=r.get(o.id),l={...a||{},...o};(!a||JSON.stringify(a)!==JSON.stringify(l))&&(r.set(o.id,l),i=!0)}),!i)return n;const s=ta(Array.from(r.values()));return cu(s),{articles:s}}),setUser:e=>t({user:e}),setIsNewEditionAvailable:e=>t({isNewEditionAvailable:e}),setInitialTodayHeadlines:e=>t({initialTodayHeadlines:e}),setActiveTopic:e=>t(n=>n.activeTopic!==e?{activeTopic:e,articles:[]}:{activeTopic:e})})),F2=()=>{const t=Lr(e=>e.setUser);oe.useEffect(()=>{const e=hp.onAuthChange(t);return()=>e()},[t])};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let b2,O2;function q2(){return{geminiUrl:b2,vertexUrl:O2}}function B2(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=q2();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ns{}function Y(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const h=l[u];f(h,e.slice(s+1),n[u])}else for(const u of l)f(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function G2(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}pp(t,i,s,0,o)}}function pp(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])pp(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,h]of Object.entries(l)){const p=[];for(const m of n.slice(r))m==="*"?p.push(u):p.push(m);f(o,p,h)}for(const u of a)delete o[u]}}else{const o=t;s in o&&pp(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H2(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function $2(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],W2(o)),e}function z2(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response"]);return o!=null&&f(e,["response"],K2(o)),e}function W2(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>J2(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function K2(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Q2(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function J2(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],Z2(n)),e}function Q2(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],j2(n)),e}function Y2(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function X2(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function Z2(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],yg(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function j2(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],yg(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var IE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(IE||(IE={}));var wE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(wE||(wE={}));var Oe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Oe||(Oe={}));var SE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(SE||(SE={}));var CE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(CE||(CE={}));var AE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(AE||(AE={}));var RE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(RE||(RE={}));var PE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(PE||(PE={}));var NE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(NE||(NE={}));var kE;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kE||(kE={}));var xE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(xE||(xE={}));var ME;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ME||(ME={}));var DE;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(DE||(DE={}));var VE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(VE||(VE={}));var LE;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(LE||(LE={}));var Nc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Nc||(Nc={}));var UE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(UE||(UE={}));var mp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mp||(mp={}));var FE;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(FE||(FE={}));var bE;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bE||(bE={}));var OE;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(OE||(OE={}));var qE;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qE||(qE={}));var BE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(BE||(BE={}));var GE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GE||(GE={}));var HE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(HE||(HE={}));var $E;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})($E||($E={}));var zE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zE||(zE={}));var WE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(WE||(WE={}));var KE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(KE||(KE={}));var JE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(JE||(JE={}));var QE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(QE||(QE={}));var YE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(YE||(YE={}));var XE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(XE||(XE={}));var ZE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ZE||(ZE={}));var jE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(jE||(jE={}));var eT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(eT||(eT={}));var tT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(tT||(tT={}));var nT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nT||(nT={}));var rT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(rT||(rT={}));var iT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(iT||(iT={}));var sT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(sT||(sT={}));var oT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(oT||(oT={}));var aT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(aT||(aT={}));var lT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lT||(lT={}));var uT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uT||(uT={}));var cT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(cT||(cT={}));var dT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(dT||(dT={}));var fT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(fT||(fT={}));var Ss;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ss||(Ss={}));class gp{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class na{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const p=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[_,R]of Object.entries(m))_!=="text"&&_!=="thought"&&(R!==null||R!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class hT{}class pT{}class eU{}class tU{}class nU{}class rU{}class mT{}class gT{}class yT{}class iU{}class kc{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new kc;let i;const s=e;return n?i=z2(s):i=$2(s),Object.assign(r,i),r}}class _T{}class vT{}class ET{}class sU{}class oU{}class aU{}class TT{}class lU{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class uU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ge(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function J0(t,e){const n=ge(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Q0(t){return Array.isArray(t)?t.map(e=>xc(e)):[xc(t)]}function xc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Y0(t){const e=xc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X0(t){const e=xc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function IT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Z0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>IT(e)):[IT(t)]}function yp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function wT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ST(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return yp(t)?t:{role:"user",parts:Z0(t)}}function _g(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=vt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=vt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vt(n)):[vt(e)]}function nn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(wT(t)||ST(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}const e=[],n=[],r=yp(t[0]);for(const i of t){const s=yp(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(wT(i)||ST(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Z0(n)}),e}function cU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Oe).includes(n[0].toUpperCase())?n[0].toUpperCase():Oe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Oe).includes(r.toUpperCase())?r.toUpperCase():Oe.TYPE_UNSPECIFIED})}}function Fs(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&cU(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Oe).includes(a.toUpperCase())?a.toUpperCase():Oe.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Fs(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Fs(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,h]of Object.entries(a))l[u]=Fs(h);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function vg(t){return Fs(t)}function Eg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Tg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Po(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Fs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Fs(e.response));return t}function No(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function dU(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function or(t,e){if(typeof e!="string")throw new Error("name must be a string");return dU(t,e,"cachedContents")}function j0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function hi(t){return yg(t)}function fU(t){return t!=null&&typeof t=="object"&&"name"in t}function hU(t){return t!=null&&typeof t=="object"&&"video"in t}function pU(t){return t!=null&&typeof t=="object"&&"uri"in t}function eA(t){var e;let n;if(fU(t)&&(n=t.name),!(pU(t)&&(n=t.uri,n===void 0))&&!(hU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tA(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nA(t){for(const e of["models","tunedModels","publisherModels"])if(mU(t,e))return t[e];return[]}function mU(t,e){return t!==null&&typeof t=="object"&&e in t}function gU(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function yU(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=gU(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function rA(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function _U(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iA(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ko(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sA(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vU(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>YU(o))),f(e,["inlinedResponses"],s)}const i=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["inlinedEmbedContentResponses"],s)}return e}function EU(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function TU(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vu(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["metadata","state"]);i!=null&&f(e,["state"],sA(i));const s=c(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&f(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&f(e,["dest"],vU(iA(u))),e}function _p(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],sA(i));const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&f(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["model"]);h!=null&&f(e,["model"],h);const p=c(t,["inputConfig"]);p!=null&&f(e,["src"],IU(p));const m=c(t,["outputConfig"]);return m!=null&&f(e,["dest"],EU(iA(m))),e}function IU(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function wU(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>QU(t,o))),f(n,["requests","requests"],s)}return n}function SU(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function AU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function RU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function PU(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],NU(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=c(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}return e}function NU(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function oA(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rF(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function kU(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function xU(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],TU(_U(i))),n}function CT(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],wU(t,rA(t,i)));const s=c(e,["config"]);return s!=null&&kU(s,n),n}function MU(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["inputConfig"],SU(rA(t,i)));const s=c(e,["config"]);return s!=null&&xU(s,n),n}function DU(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function VU(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],BU(t,i));const s=c(e,["config"]);return s!=null&&DU(s,n),n}function LU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function UU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function FU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);return s!=null&&f(e,["error"],s),e}function bU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);return s!=null&&f(e,["error"],s),e}function OU(t,e){const n={},r=c(e,["contents"]);if(r!=null){let s=_g(t,r);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["requests[]","request","content"],s)}const i=c(e,["config"]);return i!=null&&(f(n,["_self"],qU(i,n)),G2(n,{"requests[].*":"requests[].request.*"})),n}function qU(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function BU(t,e){const n={},r=c(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],OU(t,i)),n}function GU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function HU(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],oA(vt(i)));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],vg(w));const E=c(e,["responseJsonSchema"]);if(E!=null&&f(r,["responseJsonSchema"],E),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(N=>iF(N))),f(n,["safetySettings"],M)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let M=No(V);Array.isArray(M)&&(M=M.map(N=>sF(Po(N)))),f(n,["tools"],M)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],or(t,b));const S=c(e,["responseModalities"]);S!=null&&f(r,["responseModalities"],S);const v=c(e,["mediaResolution"]);v!=null&&f(r,["mediaResolution"],v);const I=c(e,["speechConfig"]);if(I!=null&&f(r,["speechConfig"],Eg(I)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=c(e,["thinkingConfig"]);A!=null&&f(r,["thinkingConfig"],A);const k=c(e,["imageConfig"]);return k!=null&&f(r,["imageConfig"],k),r}function $U(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>PU(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function zU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function WU(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],ko(t,r)),n}function KU(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function JU(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function QU(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["request","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let a=nn(i);Array.isArray(a)&&(a=a.map(l=>oA(l))),f(n,["request","contents"],a)}const s=c(e,["metadata"]);s!=null&&f(n,["metadata"],s);const o=c(e,["config"]);return o!=null&&f(n,["request","generationConfig"],HU(t,o,c(n,["request"],{}))),n}function YU(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],$U(n));const r=c(t,["error"]);return r!=null&&f(e,["error"],r),e}function XU(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ZU(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function jU(t){const e={},n=c(t,["config"]);return n!=null&&XU(n,e),e}function eF(t){const e={},n=c(t,["config"]);return n!=null&&ZU(n,e),e}function tF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Vu(o))),f(e,["batchJobs"],s)}return e}function nF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_p(o))),f(e,["batchJobs"],s)}return e}function rF(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],CU(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],GU(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function iF(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function sF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],JU(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],KU(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Xi||(Xi={}));class Cl{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oF extends ns{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Cl(Xi.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=CT(this.apiClient,e),r=n._url,i=Y("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=MU(this.apiClient,e);return a=Y("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>_p(h))}else{const u=CT(this.apiClient,e);return a=Y("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Vu(h))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VU(this.apiClient,e);return s=Y("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Vu(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=WU(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>_p(h))}else{const u=zU(this.apiClient,e);return a=Y("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Vu(h))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=RU(this.apiClient,e);o=Y("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=AU(this.apiClient,e);o=Y("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=eF(e);return a=Y("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=nF(h),m=new TT;return Object.assign(m,p),m})}else{const u=jU(e);return a=Y("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=tF(h),m=new TT;return Object.assign(m,p),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=UU(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>bU(h))}else{const u=LU(this.apiClient,e);return a=Y("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>FU(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function AT(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>PF(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function lF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let h=nn(o);Array.isArray(h)&&(h=h.map(p=>AT(p))),f(e,["contents"],h)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],AT(vt(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>NF(p))),f(e,["tools"],h)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&f(e,["toolConfig"],u),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function uF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let p=nn(o);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],vt(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>kF(m))),f(e,["tools"],p)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&f(e,["toolConfig"],u);const h=c(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function cF(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],J0(t,r));const i=c(e,["config"]);return i!=null&&lF(i,n),n}function dF(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],J0(t,r));const i=c(e,["config"]);return i!=null&&uF(i,n),n}function fF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],or(t,r)),n}function hF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],or(t,r)),n}function pF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function mF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function gF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function yF(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function _F(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],or(t,r)),n}function vF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],or(t,r)),n}function EF(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function TF(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function IF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function wF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function SF(t){const e={},n=c(t,["config"]);return n!=null&&IF(n,e),e}function CF(t){const e={},n=c(t,["config"]);return n!=null&&wF(n,e),e}function AF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function RF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function PF(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],aF(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],gF(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function NF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],TF(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],EF(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function kF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>yF(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function xF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function MF(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function DF(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],or(t,r));const i=c(e,["config"]);return i!=null&&xF(i,n),n}function VF(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],or(t,r));const i=c(e,["config"]);return i!=null&&MF(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LF extends ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cl(Xi.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=dF(this.apiClient,e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=cF(this.apiClient,e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=_F(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=hF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=mF(h),m=new vT;return Object.assign(m,p),m})}else{const u=fF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=pF(h),m=new vT;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=VF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=DF(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=CF(e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=RF(h),m=new ET;return Object.assign(m,p),m})}else{const u=SF(e);return a=Y("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=AF(h),m=new ET;return Object.assign(m,p),m})}}}function RT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function bs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(R){return Promise.resolve(R).then(_,p)}}function a(_,R){r[_]&&(i[_]=function(P){return new Promise(function(x,w){s.push([_,P,x,w])>1||l(_,P)})},R&&(i[_]=R(i[_])))}function l(_,R){try{u(r[_](R))}catch(P){m(s[0][3],P)}}function u(_){_.value instanceof Ce?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){l("next",_)}function p(_){l("throw",_)}function m(_,R){_(R),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ra(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RT=="function"?RT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UF(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:aA(n)}function aA(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function FF(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function PT(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!aA(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class bF{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new OF(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class OF{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),FF(s)}async sendMessage(e){var n;await this.sendPromise;const r=vt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const _=u?[u]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=vt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?PT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return bs(this,arguments,function*(){var o,a,l,u;const h=[];try{for(var p=!0,m=Ra(e),_;_=yield Ce(m.next()),o=_.done,!o;p=!0){u=_.value,p=!1;const R=u;if(UF(R)){const P=(i=(r=R.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&h.push(P)}yield yield Ce(R)}}catch(R){a={error:R}}finally{try{!p&&!o&&(l=m.return)&&(yield Ce(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...PT(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qF(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function BF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function GF(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],eA(n)),e}function HF(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function $F(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],eA(n)),e}function zF(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function WF(t){const e={},n=c(t,["config"]);return n!=null&&zF(n,e),e}function KF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JF extends ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cl(Xi.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WF(e);return s=Y("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=KF(l),h=new sU;return Object.assign(h,u),h})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qF(e);return s=Y("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=BF(l),h=new oU;return Object.assign(h,u),h})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$F(e);return s=Y("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GF(e);return s=Y("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=HF(l),h=new aU;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lu(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function QF(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>cb(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function YF(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function XF(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function ZF(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const i=c(t,["candidateCount"]);i!=null&&f(e,["candidateCount"],i);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=c(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const R=c(t,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const w=c(t,["seed"]);w!=null&&f(e,["seed"],w);const E=c(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],lA(E));const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const V=c(t,["temperature"]);V!=null&&f(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const b=c(t,["topK"]);b!=null&&f(e,["topK"],b);const S=c(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function jF(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function eb(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function tb(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Tg(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],QF(vt(R)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=No(P);Array.isArray(b)&&(b=b.map(S=>fb(Po(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],db(x));const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function nb(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],ZF(r));const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],lA(Tg(p)));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],vt(R));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=No(P);Array.isArray(b)&&(b=b.map(S=>hb(Po(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function rb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],tb(i,n)),n}function ib(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],nb(i,n)),n}function sb(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function ob(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function ab(t){const e={},n=c(t,["media"]);if(n!=null){let u=Q0(n);Array.isArray(u)&&(u=u.map(h=>Lu(h))),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],Lu(X0(r)));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&f(e,["video"],Lu(Y0(s)));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function lb(t){const e={},n=c(t,["media"]);if(n!=null){let u=Q0(n);Array.isArray(u)&&(u=u.map(h=>h)),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],X0(r));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&f(e,["video"],Y0(s));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function ub(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=c(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const s=c(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);const o=c(t,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],pb(o));const a=c(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],l),e}function cb(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],Lu(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],YF(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function db(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lA(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function fb(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],eb(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],jF(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function hb(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>XF(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function pb(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=c(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);const o=c(t,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["promptTokensDetails"],_)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["cacheTokensDetails"],_)}const h=c(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["responseTokensDetails"],_)}const p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(R=>R)),f(e,["toolUsePromptTokensDetails"],_)}const m=c(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function gb(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],yb(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const p=c(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}return e}function yb(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function _b(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["contents"],s)}return n}function vb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["tokensInfo"],i)}return e}function Eb(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&f(e,["statistics"],Tb(r)),e}function Tb(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function _d(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>AO(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function Ib(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function wb(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sb(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],vt(r));const i=c(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>hA(a))),f(e,["tools"],o)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],hO(s)),n}function Cb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=nn(i);Array.isArray(o)&&(o=o.map(a=>_d(a))),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&wb(s),n}function Ab(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=nn(i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&Sb(s,n),n}function Rb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=c(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function Pb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function Nb(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function kb(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function xb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Mb(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Db(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const R=c(t,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const w=c(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const E=c(t,["editMode"]);e!==void 0&&E!=null&&f(e,["parameters","editMode"],E);const C=c(t,["baseSteps"]);return e!==void 0&&C!=null&&f(e,["parameters","editConfig","baseSteps"],C),n}function Vb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>MO(l))),f(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&Db(o,n),n}function Lb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vd(s))),f(e,["generatedImages"],i)}return e}function Ub(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Fb(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function bb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let a=_g(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const s=c(e,["config"]);s!=null&&Ub(s,n);const o=c(e,["model"]);return o!==void 0&&f(n,["requests[]","model"],ge(t,o)),n}function Ob(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=_g(t,i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["instances[]","content"],o)}const s=c(e,["config"]);return s!=null&&Fb(s,n),n}function qb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function Bb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Eb(o))),f(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function Gb(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function Hb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function $b(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function zb(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],_d(vt(i)));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],vg(w));const E=c(e,["responseJsonSchema"]);if(E!=null&&f(r,["responseJsonSchema"],E),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(N=>DO(N))),f(n,["safetySettings"],M)}const V=c(e,["tools"]);if(n!==void 0&&V!=null){let M=No(V);Array.isArray(M)&&(M=M.map(N=>OO(Po(N)))),f(n,["tools"],M)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(e,["cachedContent"]);n!==void 0&&b!=null&&f(n,["cachedContent"],or(t,b));const S=c(e,["responseModalities"]);S!=null&&f(r,["responseModalities"],S);const v=c(e,["mediaResolution"]);v!=null&&f(r,["mediaResolution"],v);const I=c(e,["speechConfig"]);if(I!=null&&f(r,["speechConfig"],Eg(I)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=c(e,["thinkingConfig"]);A!=null&&f(r,["thinkingConfig"],A);const k=c(e,["imageConfig"]);return k!=null&&f(r,["imageConfig"],k),r}function Wb(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],vt(i));const s=c(e,["temperature"]);s!=null&&f(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&f(r,["topP"],o);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const R=c(e,["frequencyPenalty"]);R!=null&&f(r,["frequencyPenalty"],R);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const w=c(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],vg(w));const E=c(e,["responseJsonSchema"]);E!=null&&f(r,["responseJsonSchema"],E);const C=c(e,["routingConfig"]);C!=null&&f(r,["routingConfig"],C);const V=c(e,["modelSelectionConfig"]);V!=null&&f(r,["modelConfig"],V);const L=c(e,["safetySettings"]);if(n!==void 0&&L!=null){let Ze=L;Array.isArray(Ze)&&(Ze=Ze.map(ae=>ae)),f(n,["safetySettings"],Ze)}const b=c(e,["tools"]);if(n!==void 0&&b!=null){let Ze=No(b);Array.isArray(Ze)&&(Ze=Ze.map(ae=>hA(Po(ae)))),f(n,["tools"],Ze)}const S=c(e,["toolConfig"]);n!==void 0&&S!=null&&f(n,["toolConfig"],S);const v=c(e,["labels"]);n!==void 0&&v!=null&&f(n,["labels"],v);const I=c(e,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],or(t,I));const A=c(e,["responseModalities"]);A!=null&&f(r,["responseModalities"],A);const k=c(e,["mediaResolution"]);k!=null&&f(r,["mediaResolution"],k);const M=c(e,["speechConfig"]);M!=null&&f(r,["speechConfig"],fA(Eg(M)));const N=c(e,["audioTimestamp"]);N!=null&&f(r,["audioTimestamp"],N);const Pe=c(e,["thinkingConfig"]);Pe!=null&&f(r,["thinkingConfig"],Pe);const It=c(e,["imageConfig"]);return It!=null&&f(r,["imageConfig"],It),r}function NT(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=nn(i);Array.isArray(o)&&(o=o.map(a=>_d(a))),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&f(n,["generationConfig"],zb(t,s,n)),n}function kT(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["contents"]);if(i!=null){let o=nn(i);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&f(n,["generationConfig"],Wb(t,s,n)),n}function xT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>gb(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function MT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["candidates"],u)}const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=c(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function Kb(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const h=c(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=c(t,["imageSize"]);if(e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Jb(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const R=c(t,["outputMimeType"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","mimeType"],R);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const w=c(t,["labels"]);e!==void 0&&w!=null&&f(e,["labels"],w);const E=c(t,["imageSize"]);e!==void 0&&E!=null&&f(e,["parameters","sampleImageSize"],E);const C=c(t,["enhancePrompt"]);return e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C),n}function Qb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&Kb(s,n),n}function Yb(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&Jb(s,n),n}function Xb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>uO(o))),f(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],cA(i)),e}function Zb(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>vd(o))),f(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],dA(i)),e}function jb(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const o=c(t,["resolution"]);e!==void 0&&o!=null&&f(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=c(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Ed(h));const p=c(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>ZO(_))),f(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function eO(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=c(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const _=c(t,["enhancePrompt"]);e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_);const R=c(t,["generateAudio"]);e!==void 0&&R!=null&&f(e,["parameters","generateAudio"],R);const P=c(t,["lastFrame"]);e!==void 0&&P!=null&&f(e,["instances[0]","lastFrame"],En(P));const x=c(t,["referenceImages"]);if(e!==void 0&&x!=null){let C=x;Array.isArray(C)&&(C=C.map(V=>jO(V))),f(e,["instances[0]","referenceImages"],C)}const w=c(t,["mask"]);e!==void 0&&w!=null&&f(e,["instances[0]","mask"],XO(w));const E=c(t,["compressionQuality"]);return e!==void 0&&E!=null&&f(e,["parameters","compressionQuality"],E),n}function tO(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],sO(o)),e}function nO(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const s=c(t,["error"]);s!=null&&f(e,["error"],s);const o=c(t,["response"]);return o!=null&&f(e,["response"],oO(o)),e}function rO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&f(n,["instances[0]","image"],Ed(s));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],pA(o));const a=c(e,["source"]);a!=null&&aO(a,n);const l=c(e,["config"]);return l!=null&&jb(l,n),n}function iO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&f(n,["instances[0]","image"],En(s));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],mA(o));const a=c(e,["source"]);a!=null&&lO(a,n);const l=c(e,["config"]);return l!=null&&eO(l,n),n}function sO(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>dO(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function oO(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>fO(o))),f(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function aO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Ed(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],pA(s)),n}function lO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],En(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],mA(s)),n}function uO(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],_O(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],cA(i)),e}function vd(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],uA(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);i!=null&&f(e,["safetyAttributes"],dA(i));const s=c(t,["prompt"]);return s!=null&&f(e,["enhancedPrompt"],s),e}function cO(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],uA(n));const r=c(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["labels"],i)}return e}function dO(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],QO(n)),e}function fO(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],YO(n)),e}function hO(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const i=c(t,["candidateCount"]);i!=null&&f(e,["candidateCount"],i);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=c(t,["responseJsonSchema"]);p!=null&&f(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const R=c(t,["responseModalities"]);R!=null&&f(e,["responseModalities"],R);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const w=c(t,["seed"]);w!=null&&f(e,["seed"],w);const E=c(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],fA(E));const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const V=c(t,["temperature"]);V!=null&&f(e,["temperature"],V);const L=c(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);const b=c(t,["topK"]);b!=null&&f(e,["topK"],b);const S=c(t,["topP"]);return S!=null&&f(e,["topP"],S),e}function pO(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function mO(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],ge(t,r)),n}function gO(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function yO(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _O(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],hi(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function uA(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],hi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Ed(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],hi(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function En(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],hi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function vO(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],tA(t,a)),r}function EO(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],tA(t,a)),r}function TO(t,e){const n={},r=c(e,["config"]);return r!=null&&vO(t,r,n),n}function IO(t,e){const n={},r=c(e,["config"]);return r!=null&&EO(t,r,n),n}function wO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=nA(i);Array.isArray(s)&&(s=s.map(o=>vp(o))),f(e,["models"],s)}return e}function SO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=nA(i);Array.isArray(s)&&(s=s.map(o=>Ep(o))),f(e,["models"],s)}return e}function CO(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=c(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function vp(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const s=c(t,["version"]);s!=null&&f(e,["version"],s);const o=c(t,["_self"]);o!=null&&f(e,["tunedModelInfo"],qO(o));const a=c(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);return u!=null&&f(e,["supportedActions"],u),e}function Ep(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const s=c(t,["versionId"]);s!=null&&f(e,["version"],s);const o=c(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>Gb(m))),f(e,["endpoints"],p)}const a=c(t,["labels"]);a!=null&&f(e,["labels"],a);const l=c(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],BO(l));const u=c(t,["defaultCheckpointId"]);u!=null&&f(e,["defaultCheckpointId"],u);const h=c(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["checkpoints"],p)}return e}function AO(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],mb(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],Hb(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function RO(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],En(n)),e}function PO(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","editConfig","baseSteps"],i);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const o=c(t,["seed"]);e!==void 0&&o!=null&&f(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);const h=c(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);const _=c(t,["labels"]);return e!==void 0&&_!=null&&f(e,["labels"],_),n}function NO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["source"]);i!=null&&xO(i,n);const s=c(e,["config"]);return s!=null&&PO(s,n),n}function kO(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vd(i))),f(e,["generatedImages"],r)}return e}function xO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],En(i));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>RO(a))),f(e,["instances[0]","productImages"],o)}return n}function MO(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],En(n));const r=c(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=c(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const s=c(t,["maskImageConfig"]);s!=null&&f(e,["maskImageConfig"],CO(s));const o=c(t,["controlImageConfig"]);o!=null&&f(e,["controlImageConfig"],Ib(o));const a=c(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function cA(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function dA(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function DO(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function VO(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],En(n)),e}function LO(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&f(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function UO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["source"]);i!=null&&bO(i,n);const s=c(e,["config"]);return s!=null&&LO(s,n),n}function FO(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cO(i))),f(e,["generatedMasks"],r)}return e}function bO(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],En(i));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],VO(s)),n}function fA(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&f(e,["languageCode"],r),e}function OO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],yO(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],gO(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function hA(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>$b(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],i);const s=c(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function qO(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function BO(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function GO(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function HO(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function $O(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","name"],ge(t,r));const i=c(e,["config"]);return i!=null&&GO(i,n),n}function zO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&HO(i,n),n}function WO(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["includeRaiReason"]);e!==void 0&&i!=null&&f(e,["parameters","includeRaiReason"],i);const s=c(t,["outputMimeType"]);e!==void 0&&s!=null&&f(e,["parameters","outputOptions","mimeType"],s);const o=c(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&f(e,["parameters","outputOptions","compressionQuality"],o);const a=c(t,["enhanceInputImage"]);e!==void 0&&a!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],a);const l=c(t,["imagePreservationFactor"]);e!==void 0&&l!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],l);const u=c(t,["labels"]);e!==void 0&&u!=null&&f(e,["labels"],u);const h=c(t,["numberOfImages"]);e!==void 0&&h!=null&&f(e,["parameters","sampleCount"],h);const p=c(t,["mode"]);return e!==void 0&&p!=null&&f(e,["parameters","mode"],p),n}function KO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],ge(t,r));const i=c(e,["image"]);i!=null&&f(n,["instances[0]","image"],En(i));const s=c(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=c(e,["config"]);return o!=null&&WO(o,n),n}function JO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vd(s))),f(e,["generatedImages"],i)}return e}function QO(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],hi(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function YO(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],hi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function XO(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],En(n));const r=c(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function ZO(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Ed(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function jO(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],En(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function pA(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],hi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function mA(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],hi(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e4="Content-Type",t4="X-Server-Timeout",n4="User-Agent",Tp="x-goog-api-client",r4="1.25.0",i4=`google-genai-sdk/${r4}`,s4="v1beta1",o4="v1beta",DT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class a4{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:s4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:o4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>i.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&l4(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await VT(i),new gp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await VT(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return bs(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Ce(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,R=m.code,P=`got status: ${_}. ${JSON.stringify(p)}`;if(R>=400&&R<600)throw new yd({message:P,status:R})}}catch(p){if(p.name==="ApiError")throw p}o+=u;let h=o.match(DT);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new gp(m)),o=o.slice(h[0].length),h=o.match(DT)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=i4+" "+this.clientOptions.userAgentExtra;return e[n4]=n,e[Tp]=n,e[e4]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(t4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l=await this.fetchUploadUrl(i,n);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:Y("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function VT(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new yd({message:i,status:n}):new Error(i)}}function l4(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],h=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u4="mcp_used/unknown";let c4=!1;function gA(t){for(const e of t)if(d4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return c4}function yA(t){var e;const n=(e=t[Tp])!==null&&e!==void 0?e:"";t[Tp]=(n+` ${u4}`).trimStart()}function d4(t){return t!==null&&typeof t=="object"&&t instanceof Ig}function f4(t,e=100){return bs(this,arguments,function*(){let r,i=0;for(;i<e;){const s=yield Ce(t.listTools({cursor:r}));for(const o of s.tools)yield yield Ce(o),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class Ig{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ig(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,Ra(f4(h))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const p=i;o.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),yU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function h4(t,e,n){const r=new uU;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class p4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=y4(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(C=>{u=C}),p=e.callbacks,m=function(){u({})},_=this.apiClient,R={onopen:m,onmessage:C=>{h4(_,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(C){}},P=this.webSocketFactory.create(l,g4(o),R);P.connect(),await h;const E={setup:{model:ge(this.apiClient,e.model)}};return P.send(JSON.stringify(E)),new m4(P,this.apiClient)}}class m4{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ob(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=sb(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ss.PLAY)}pause(){this.sendPlaybackControl(Ss.PAUSE)}stop(){this.sendPlaybackControl(Ss.STOP)}resetContext(){this.sendPlaybackControl(Ss.RESET_CONTEXT)}close(){this.conn.close()}}function g4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function y4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function v4(t,e,n){const r=new lU;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=ub(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class E4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new p4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&gA(e.config.tools)&&yA(p);const m=S4(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const I=this.apiClient.getApiKey();let A="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",k="access_token"),h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${A}?${k}=${I}`}let _=()=>{};const R=new Promise(I=>{_=I}),P=e.callbacks,x=function(){var I;(I=P==null?void 0:P.onopen)===null||I===void 0||I.call(P),_({})},w=this.apiClient,E={onopen:x,onmessage:I=>{v4(w,P.onmessage,I)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(I){}},C=this.webSocketFactory.create(h,w4(m),E);C.connect(),await R;let V=ge(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const I=this.apiClient.getProject(),A=this.apiClient.getLocation();V=`projects/${I}/locations/${A}/`+V}let L={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Nc.AUDIO]}:e.config.responseModalities=[Nc.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const I of b)if(this.isCallableTool(I)){const A=I;S.push(await A.tool())}else S.push(I);S.length>0&&(e.config.tools=S);const v={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=ib(this.apiClient,v):L=rb(this.apiClient,v),delete L.config,C.send(JSON.stringify(L)),new I4(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const T4={turnComplete:!0};class I4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=nn(n.turns),e.isVertexAI()||(r=r.map(i=>_d(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(_4)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},T4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:lb(e)}:n={realtimeInput:ab(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function w4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function S4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LT=10;function UT(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Os(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Os(t){return"callTool"in t&&typeof t.callTool=="function"}function C4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Os(i)))!==null&&r!==void 0?r:!1}function A4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Os(i)))!==null&&r!==void 0?r:!1}function FT(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R4 extends ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!C4(n)||UT(n.config))return await this.generateContentInternal(l);if(A4(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const p=nn(l.contents),m=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:LT;let _=0;for(;_<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const R=u.candidates[0].content,P=[];for(const x of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Os(x)){const E=await x.callTool(u.functionCalls);P.push(...E)}_++,h={role:"user",parts:P},l.contents=nn(l.contents),l.contents.push(R),l.contents.push(h),FT(l.config)&&(p.push(R),p.push(h))}return FT(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),UT(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Cl(Xi.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Os(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&gA(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),yA(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Os(o)){const a=o,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:LT;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,h,p){var m,_;return bs(this,arguments,function*(){for(var R,P,x,w;a<s;){o&&(a++,o=!1);const L=yield Ce(u.processParamsMaybeAddMcpUsage(p)),b=yield Ce(u.generateContentStreamInternal(L)),S=[],v=[];try{for(var E=!0,C=(P=void 0,Ra(b)),V;V=yield Ce(C.next()),R=V.done,!R;E=!0){w=V.value,E=!1;const I=w;if(yield yield Ce(I),I.candidates&&(!((m=I.candidates[0])===null||m===void 0)&&m.content)){v.push(I.candidates[0].content);for(const A of(_=I.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<s&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(A.functionCall.name)){const k=yield Ce(h.get(A.functionCall.name).callTool([A.functionCall]));S.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(I){P={error:I}}finally{try{!E&&!R&&(x=C.return)&&(yield Ce(x.call(C)))}finally{if(P)throw P.error}}if(S.length>0){o=!0;const I=new na;I.candidates=[{content:{role:"user",parts:S}}],yield yield Ce(I);const A=[];A.push(...v),A.push({role:"user",parts:S});const k=nn(p.contents).concat(A);p.contents=k}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kT(this.apiClient,e);return a=Y("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=MT(h),m=new na;return Object.assign(m,p),m})}else{const u=NT(this.apiClient,e);return a=Y("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=xT(h),m=new na;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kT(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return bs(this,arguments,function*(){var m,_,R,P;try{for(var x=!0,w=Ra(p),E;E=yield Ce(w.next()),m=E.done,!m;x=!0){P=E.value,x=!1;const C=P,V=MT(yield Ce(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new na;Object.assign(L,V),yield yield Ce(L)}}catch(C){_={error:C}}finally{try{!x&&!m&&(R=w.return)&&(yield Ce(R.call(w)))}finally{if(_)throw _.error}}})})}else{const u=NT(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return bs(this,arguments,function*(){var m,_,R,P;try{for(var x=!0,w=Ra(p),E;E=yield Ce(w.next()),m=E.done,!m;x=!0){P=E.value,x=!1;const C=P,V=xT(yield Ce(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new na;Object.assign(L,V),yield yield Ce(L)}}catch(C){_={error:C}}finally{try{!x&&!m&&(R=w.return)&&(yield Ce(R.call(w)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Ob(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Bb(h),m=new hT;return Object.assign(m,p),m})}else{const u=bb(this.apiClient,e);return a=Y("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=qb(h),m=new hT;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Yb(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Zb(h),m=new pT;return Object.assign(m,p),m})}else{const u=Qb(this.apiClient,e);return a=Y("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Xb(h),m=new pT;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Vb(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=Lb(l),h=new eU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=KO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=JO(l),h=new tU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=NO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=kO(l),h=new nU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=UO(this.apiClient,e);return s=Y("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=FO(l),h=new rU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=mO(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Ep(h))}else{const u=pO(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>vp(h))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=IO(this.apiClient,e);return a=Y("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=SO(h),m=new mT;return Object.assign(m,p),m})}else{const u=TO(this.apiClient,e);return a=Y("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=wO(h),m=new mT;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=zO(this.apiClient,e);return a=Y("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Ep(h))}else{const u=$O(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>vp(h))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kb(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Mb(h),m=new gT;return Object.assign(m,p),m})}else{const u=Nb(this.apiClient,e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=xb(h),m=new gT;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Ab(this.apiClient,e);return a=Y("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Pb(h),m=new yT;return Object.assign(m,p),m})}else{const u=Cb(this.apiClient,e);return a=Y("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=Rb(h),m=new yT;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=_b(this.apiClient,e);return s=Y("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=vb(l),h=new iU;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=iO(this.apiClient,e);return a=Y("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const p=nO(h),m=new kc;return Object.assign(m,p),m})}else{const u=rO(this.apiClient,e);return a=Y("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=tO(h),m=new kc;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P4 extends ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=X2(e);return a=Y("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const u=Y2(e);return a=Y("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=H2(e);return s=Y("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function k4(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>b4(s))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function x4(t,e,n){const r={},i=c(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const o=c(e,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],F4(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function M4(t,e){const n={},r=c(e,["config"]);return r!=null&&f(n,["config"],x4(t,r,n)),n}function D4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function V4(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function L4(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function U4(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Tg(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=c(t,["systemInstruction"]);e!==void 0&&R!=null&&f(e,["setup","systemInstruction"],k4(vt(R)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let b=No(P);Array.isArray(b)&&(b=b.map(S=>q4(Po(S)))),f(e,["setup","tools"],b)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],O4(x));const w=c(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const V=c(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),n}function F4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],ge(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],U4(i,n)),n}function b4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const r=c(t,["thought"]);r!=null&&f(e,["thought"],r);const i=c(t,["inlineData"]);i!=null&&f(e,["inlineData"],N4(i));const s=c(t,["fileData"]);s!=null&&f(e,["fileData"],D4(s));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const p=c(t,["text"]);return p!=null&&f(e,["text"],p),e}function O4(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function q4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&f(e,["googleSearch"],L4(r));const i=c(t,["googleSearchRetrieval"]);if(i!=null&&f(e,["googleSearchRetrieval"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],V4(s));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B4(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function G4(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=B4(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class H4 extends ns{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=M4(this.apiClient,e);s=Y("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=G4(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function z4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function W4(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=c(t,["epochCount"]);e!==void 0&&i!=null&&f(e,["tuningTask","hyperparameters","epochCount"],i);const s=c(t,["learningRateMultiplier"]);if(s!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=c(t,["batchSize"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","batchSize"],o);const a=c(t,["learningRate"]);if(e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","learningRate"],a),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function K4(t,e){const n={},r=c(t,["validationDataset"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec"],l3(r,n));const i=c(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&f(e,["tunedModelDisplayName"],i);const s=c(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=c(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=c(t,["adapterSize"]);if(e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=c(t,["labels"]);return e!==void 0&&h!=null&&f(e,["labels"],h),n}function J4(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&f(e,["preTunedModel"],r);const i=c(t,["trainingDataset"]);i!=null&&f(e,["tuningTask","trainingData"],s3(i));const s=c(t,["config"]);return s!=null&&W4(s,e),e}function Q4(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&f(e,["preTunedModel"],r);const i=c(t,["trainingDataset"]);i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],o3(i,e));const s=c(t,["config"]);return s!=null&&K4(s,e),e}function Y4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function X4(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Z4(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function j4(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function e3(t){const e={},n=c(t,["config"]);return n!=null&&Z4(n,e),e}function t3(t){const e={},n=c(t,["config"]);return n!=null&&j4(n,e),e}function n3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_A(o))),f(e,["tuningJobs"],s)}return e}function r3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ip(o))),f(e,["tuningJobs"],s)}return e}function i3(t){const e={},n=c(t,["name"]);n!=null&&f(e,["model"],n);const r=c(t,["name"]);return r!=null&&f(e,["endpoint"],r),e}function s3(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["examples","examples"],r)}return e}function o3(t,e){const n={},r=c(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function _A(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],j0(i));const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["tuningTask","startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["tuningTask","completeTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["description"]);u!=null&&f(e,["description"],u);const h=c(t,["baseModel"]);h!=null&&f(e,["baseModel"],h);const p=c(t,["_self"]);p!=null&&f(e,["tunedModel"],i3(p));const m=c(t,["customBaseModel"]);m!=null&&f(e,["customBaseModel"],m);const _=c(t,["experiment"]);_!=null&&f(e,["experiment"],_);const R=c(t,["labels"]);R!=null&&f(e,["labels"],R);const P=c(t,["outputUri"]);P!=null&&f(e,["outputUri"],P);const x=c(t,["pipelineJob"]);x!=null&&f(e,["pipelineJob"],x);const w=c(t,["serviceAccount"]);w!=null&&f(e,["serviceAccount"],w);const E=c(t,["tunedModelDisplayName"]);E!=null&&f(e,["tunedModelDisplayName"],E);const C=c(t,["veoTuningSpec"]);return C!=null&&f(e,["veoTuningSpec"],C),e}function Ip(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],j0(i));const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const o=c(t,["startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["endTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["error"]);u!=null&&f(e,["error"],u);const h=c(t,["description"]);h!=null&&f(e,["description"],h);const p=c(t,["baseModel"]);p!=null&&f(e,["baseModel"],p);const m=c(t,["tunedModel"]);m!=null&&f(e,["tunedModel"],m);const _=c(t,["preTunedModel"]);_!=null&&f(e,["preTunedModel"],_);const R=c(t,["supervisedTuningSpec"]);R!=null&&f(e,["supervisedTuningSpec"],R);const P=c(t,["tuningDataStats"]);P!=null&&f(e,["tuningDataStats"],P);const x=c(t,["encryptionSpec"]);x!=null&&f(e,["encryptionSpec"],x);const w=c(t,["partnerModelTuningSpec"]);w!=null&&f(e,["partnerModelTuningSpec"],w);const E=c(t,["customBaseModel"]);E!=null&&f(e,["customBaseModel"],E);const C=c(t,["experiment"]);C!=null&&f(e,["experiment"],C);const V=c(t,["labels"]);V!=null&&f(e,["labels"],V);const L=c(t,["outputUri"]);L!=null&&f(e,["outputUri"],L);const b=c(t,["pipelineJob"]);b!=null&&f(e,["pipelineJob"],b);const S=c(t,["serviceAccount"]);S!=null&&f(e,["serviceAccount"],S);const v=c(t,["tunedModelDisplayName"]);v!=null&&f(e,["tunedModelDisplayName"],v);const I=c(t,["veoTuningSpec"]);return I!=null&&f(e,["veoTuningSpec"],I),e}function a3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function l3(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u3 extends ns{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Cl(Xi.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:mp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=X4(e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>Ip(h))}else{const u=Y4(e);return a=Y("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>_A(h))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=t3(e);return a=Y("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=r3(h),m=new _T;return Object.assign(m,p),m})}else{const u=e3(e);return a=Y("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),o.then(h=>{const p=n3(h),m=new _T;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=z4(e);o=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=$4(e);o=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Q4(e);return s=Y("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>Ip(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=J4(e);return s=Y("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>a3(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const d3=1024*1024*8,f3=3,h3=1e3,p3=2,xf="x-goog-upload-status";async function m3(t,e,n){var r,i,s;let o=0,a=0,l=new gp(new Response),u="upload";for(o=t.size;a<o;){const p=Math.min(d3,o-a),m=t.slice(a,a+p);a+p>=o&&(u+=", finalize");let _=0,R=h3;for(;_<f3&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[xf]));)_++,await y3(R),R=R*p3;if(a+=p,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[xf])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function g3(t){return{size:t.size,type:t.type}}function y3(t){return new Promise(e=>setTimeout(e,t))}class _3{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await m3(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v3{create(e,n,r){return new E3(e,n,r)}}class E3{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bT="x-goog-api-key";class T3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(bT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(bT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I3="gl-node/";class w3{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=B2(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new T3(this.apiKey);this.apiClient=new a4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:I3+"web",uploader:new _3,downloader:new c3}),this.models=new R4(this.apiClient),this.live=new E4(this.apiClient,i,new v3),this.batches=new oF(this.apiClient),this.chats=new bF(this.models,this.apiClient),this.caches=new LF(this.apiClient),this.files=new JF(this.apiClient),this.operations=new P4(this.apiClient),this.authTokens=new H4(this.apiClient),this.tunings=new u3(this.apiClient)}}const vA="gemini-2.5-flash",S3="imagen-4.0-generate-001",OT=["World","Technology","Sports","Business","Local","Politics"],C3=()=>"AIzaSyANXsoaIDehflROf1KeZ1jbhk2Nm_31RqA";let Mf=null;const wg=()=>(Mf||(Mf=new w3({apiKey:C3()})),Mf),A3=async(t,e,n)=>{const r=wg(),i=n==="all"||!n?"Ensure a diverse mix of headlines from all categories.":`Generate headlines for the '${n}' category ONLY.`,s=`You are a world-class news editor for a bilingual newspaper (English and Arabic).
    Your task is to generate 7 compelling, diverse, and factual news headlines.
    IMPORTANT: You must avoid creating multiple headlines for the same underlying news event to ensure variety.
    For each headline, provide a suitable category from this list: ${OT.join(", ")}.
    Also, provide a concise, visually descriptive prompt for an AI image generator to create a compelling, photorealistic cover image for the article.`,o=`Generate the news headlines for ${t.toDateString()} in ${e}.
    ${i}`,a=await r.models.generateContent({model:vA,contents:o,config:{systemInstruction:s,responseMimeType:"application/json",responseSchema:{type:Oe.ARRAY,items:{type:Oe.OBJECT,properties:{headline:{type:Oe.STRING},category:{type:Oe.STRING,enum:OT},imagePrompt:{type:Oe.STRING}},required:["headline","category","imagePrompt"]}}}});return JSON.parse(a.text)},R3=async(t,e)=>{const n=wg(),r=`You are an expert journalist writing for a bilingual newspaper. Your task is to write a concise, neutral, and informative news article (2-3 paragraphs) based on a given headline.
    You must also provide a realistic byline, a virality description, and 1-2 plausible sources.`,i=`For the headline "${t}" in ${e}, generate the article content.
    The virality description must be one of: 'Fast Spreading', 'Medium Spreading', or 'Low Spreading' (or the equivalent in ${e}).`,s=await n.models.generateContent({model:vA,contents:i,config:{systemInstruction:r,responseMimeType:"application/json",responseSchema:{type:Oe.OBJECT,properties:{body:{type:Oe.STRING},byline:{type:Oe.STRING},viralityDescription:{type:Oe.STRING},sources:{type:Oe.ARRAY,items:{type:Oe.OBJECT,properties:{title:{type:Oe.STRING},uri:{type:Oe.STRING}},required:["title","uri"]}}},required:["body","byline","viralityDescription"]}}});return JSON.parse(s.text)},P3=async t=>{try{const n=await wg().models.generateImages({model:S3,prompt:t,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(!n.generatedImages||n.generatedImages.length===0)throw new Error("Image generation returned no images.");return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`}catch(e){return console.error("Image generation failed for prompt:",t,e),`https://picsum.photos/seed/${encodeURIComponent(t)}/1280/720`}},N3=t=>{let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return Math.abs(e).toString(16)},k3=(t,e)=>{const n=t.split("T")[0],r=N3(e);return`${n}-${r}`},qT=4,BT=2,GT=async(t,e,n)=>{const r=t.toISOString().split("T")[0],i=await el.getArticlesForDay(r,e);if(i&&i.length>0)if(n!=="all"){const a=i.filter(l=>l.category.toLowerCase()===n.toLowerCase());if(a.length>0)return a}else return i;const o=(await A3(t,e,n)).map(a=>({id:k3(t.toISOString(),a.headline),headline:a.headline,category:a.category,imagePrompt:a.imagePrompt,date:t.toISOString(),imageUrl:"",comments:[]}));return o.length>0&&el.syncArticlesBatch(o),o},x3=()=>{const{language:t,appStatus:e,articles:n,setArticles:r,updateArticle:i,updateMultipleArticles:s,setInitialTodayHeadlines:o,setIsNewEditionAvailable:a,initialTodayHeadlines:l,activeTopic:u}=Lr(),h=Jc(),[p,m]=oe.useState(0),[_,R]=oe.useState(0),P=oe.useRef(new Set),x=oe.useRef(new Set),w=oe.useMemo(()=>{const G=new Date;return G.setHours(0,0,0,0),G},[]),{data:E,isLoading:C,isError:V,error:L}=ik({queryKey:["articles",w.toISOString().split("T")[0],t,u],queryFn:()=>GT(w,t,u),enabled:e==="ready",refetchInterval:60*1e3}),b=E||[];oe.useEffect(()=>{if(b.length>0&&l.length>0&&u==="all"){const G=new Set(b.map(X=>X.headline)),W=new Set(l);G.size>0&&(G.size!==W.size||![...G].every(X=>W.has(X)))&&a(!0)}},[b,l,a,u]);const{data:S,fetchNextPage:v,hasNextPage:I,isFetchingNextPage:A,isLoading:k,isError:M,error:N}=sk({queryKey:["articles","older",t,u],queryFn:({pageParam:G})=>{const W=new Date(w);return W.setDate(w.getDate()-G),GT(W,t,u)},initialPageParam:1,getNextPageParam:(G,W)=>{const X=W.length+1;return X<30?X:void 0},enabled:e==="ready"});oe.useEffect(()=>{const G=(S==null?void 0:S.pages.flat())||[],W=[...b,...G].filter(Boolean);W.length>0&&(s(W),Lr.getState().initialTodayHeadlines.length===0&&b.length>0&&u==="all"&&o(b.map(X=>X.headline)))},[b,S,s,u,o]),oe.useEffect(()=>{const G=n.filter(j=>!j.body&&!P.current.has(j.id));if(G.length===0||p>=qT)return;const W=qT-p,X=G.slice(0,W);m(j=>j+X.length),X.forEach(j=>{P.current.add(j.id),(async()=>{try{const Be=await R3(j.headline,t);if(Lr.getState().activeTopic===u){const je={...j,...Be};i(je),el.syncArticle(je)}}catch(Be){console.error(`Failed to fetch details for article ${j.id}`,Be),P.current.delete(j.id)}finally{m(Be=>Math.max(0,Be-1))}})()})},[n,t,i,p,u]),oe.useEffect(()=>{const G=n.filter(j=>j.body&&j.imagePrompt&&j.imageUrl===""&&!x.current.has(j.id));if(G.length===0||_>=BT)return;const W=BT-_,X=G.slice(0,W);R(j=>j+X.length),X.forEach(j=>{x.current.add(j.id),(async()=>{try{const Be=await P3(j.imagePrompt);if(Lr.getState().activeTopic===u){const je={...j,imageUrl:Be};i(je),el.syncArticle(je)}}catch(Be){console.error(`Failed to generate image for article ${j.id}`,Be),x.current.delete(j.id)}finally{R(Be=>Be-Math.max(0,Be-1))}})()})},[n,t,i,_,u]);const Pe=()=>{r([]),a(!1),P.current.clear(),x.current.clear(),m(0),R(0),o([]),h.invalidateQueries({queryKey:["articles"]})};return{isLoading:(C||k)&&n.length===0,isError:V||M,error:L||N,isFetchingNextPage:A,fetchNextPage:v,hasNextPage:I,refresh:Pe}},M3=()=>{const{language:t,setAppStatus:e,setLoadingMessage:n,setLanguage:r}=Lr(),i=Im[t],s=Jc();return oe.useEffect(()=>{(()=>{e("initializing"),n(i.generating_title,i.generating_subtitle),e("ready")})()},[t,e,n,i]),{toggleLanguage:()=>{s.clear(),r(t==="en"?"ar":"en")}}},ra=({isFeatured:t=!1})=>t?F.jsxs("div",{className:"bg-white flex flex-col md:flex-row shadow-lg rounded-lg overflow-hidden w-full h-full","aria-hidden":"true",children:[F.jsx("div",{className:"relative md:w-1/2 h-64 md:h-auto w-full bg-stone-200 animate-pulse flex-shrink-0"}),F.jsxs("div",{className:"p-6 flex flex-col flex-grow w-full md:w-1/2",children:[F.jsx("div",{className:"h-4 w-20 bg-stone-200 rounded animate-pulse mb-2"}),F.jsx("div",{className:"h-8 bg-stone-200 rounded animate-pulse w-4/5 mb-2"}),F.jsx("div",{className:"h-8 bg-stone-200 rounded animate-pulse w-3/5 mb-3"}),F.jsx("div",{className:"h-4 w-1/2 bg-stone-200 rounded animate-pulse mb-4"}),F.jsxs("div",{className:"space-y-2 flex-grow",children:[F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-5/6"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"})]}),F.jsx("div",{className:"h-5 w-24 bg-stone-200 rounded animate-pulse mt-4 self-start"})]})]}):F.jsxs("div",{className:"bg-white flex flex-col shadow-md rounded-lg overflow-hidden w-full h-full","aria-hidden":"true",children:[F.jsx("div",{className:"relative h-48 w-full bg-stone-200 animate-pulse",children:F.jsx("div",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2 bg-stone-300 h-5 w-20 rounded z-10"})}),F.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[F.jsx("div",{className:"h-6 bg-stone-200 rounded animate-pulse w-4/5 mb-2"}),F.jsx("div",{className:"h-4 w-1/2 bg-stone-200 rounded animate-pulse mb-3"}),F.jsxs("div",{className:"space-y-2 flex-grow",children:[F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-full"}),F.jsx("div",{className:"h-4 bg-stone-200 rounded animate-pulse w-5/6"})]}),F.jsx("div",{className:"h-5 w-24 bg-stone-200 rounded animate-pulse mt-4 self-start"})]})]}),D3=oe.lazy(()=>lk(()=>import("./ArticleModal-BD-HClyX.js"),[])),V3=({title:t,body:e,onClose:n,confirmText:r="OK",language:i})=>{const s=i==="ar";return F.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center bg-black bg-opacity-60",onClick:n,role:"alertdialog","aria-modal":"true","aria-labelledby":"alert-title","aria-describedby":"alert-body",children:F.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-sm w-11/12 p-6 text-center",onClick:o=>o.stopPropagation(),children:[F.jsx("h2",{id:"alert-title",className:`text-2xl font-bold text-stone-900 mb-4 ${s?"font-serif-ar":"font-header-en"}`,children:t}),F.jsx("p",{id:"alert-body",className:"text-stone-700 mb-6",children:e}),F.jsx("button",{onClick:n,className:"bg-stone-800 text-white px-6 py-2 rounded-md font-bold hover:bg-stone-900 transition-colors focus:outline-none focus:ring-2 focus:ring-stone-400",children:r})]})})},L3=()=>F.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60","aria-label":"Loading article...",children:F.jsx(wm,{className:"w-16 h-16 text-white"})}),U3=(t,e)=>{const n=t instanceof Error?t.message:"An unknown error occurred.";return console.error("Content Generation Error:",t),n.includes("API_KEY environment variable not set")?{title:e.config_error_title,body:e.config_error_gemini}:n.includes("Server error: Not Found")||n.includes("Failed to fetch")?{title:e.error_title,body:"Development server not running. Please start the API server with: npm run dev:server"}:n.includes("is not valid JSON")&&n.includes("<!DOCTYPE")?{title:e.error_cache_title,body:e.error_cache_body}:n.includes("Invalid JSON response")?{title:e.error_title,body:e.error_gemini_json}:n.includes("quota")?{title:e.error_title,body:e.error_gemini_quota}:n.includes("API key not valid")?{title:e.config_error_title,body:e.error_gemini_invalid_key}:{title:e.error_title,body:e.error_subtitle}},F3=()=>{oe.useEffect(()=>{Lr.getState().hydrateFromLocalStorage()},[]);const{language:t,appStatus:e,errorMessage:n,articles:r,user:i,isNewEditionAvailable:s,updateArticle:o,activeTopic:a,setActiveTopic:l}=Lr(),u=Jc(),{toggleLanguage:h}=M3();F2();const{isLoading:p,isError:m,error:_,isFetchingNextPage:R,fetchNextPage:P,hasNextPage:x,refresh:w}=x3(),[E,C]=oe.useState(null),[V,L]=oe.useState(""),[b,S]=oe.useState(null),v=oe.useMemo(()=>Im[t],[t]),I=oe.useMemo(()=>n?{title:v.config_error_title,body:n}:m?U3(_,v):null,[n,m,_,v]);oe.useEffect(()=>{document.documentElement.lang=t,document.documentElement.dir=t==="ar"?"rtl":"ltr",document.title=v.title,L(""),C(null)},[t,v]);const A=oe.useRef(),k=oe.useCallback(ae=>{R||(A.current&&A.current.disconnect(),A.current=new IntersectionObserver(G=>{G[0].isIntersecting&&x&&P()}),ae&&A.current.observe(ae))},[R,P,x]),M=ae=>{a!==ae&&(l(ae),u.invalidateQueries({queryKey:["articles"]}))},N=oe.useMemo(()=>V?r.filter(ae=>ae.headline.toLowerCase().includes(V.toLowerCase())||ae.body&&ae.body.toLowerCase().includes(V.toLowerCase())):r,[r,V]),Pe=(ae,G)=>{if(!i)return;const W={author:i.displayName||i.email||"Anonymous",text:G};el.addCommentToArticle(ae,W);const X=r.find(j=>j.id===ae);if(X){const j={...X,comments:[...X.comments,W]};o(j),(E==null?void 0:E.id)===ae&&C(j)}},It=async()=>{try{await hp.login()}catch(ae){console.error("Login process failed:",ae),S({title:v.login_failed_title,body:v.login_failed_body})}},Ze=()=>{if(p&&r.length===0)return F.jsxs("div",{className:"container mx-auto p-4 lg:p-6",children:[F.jsx(z_,{language:t,activeTopic:a,onSelect:()=>{}}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[F.jsx("div",{className:"md:col-span-2 lg:col-span-2",children:F.jsx(ra,{isFeatured:!0})}),F.jsx(ra,{}),F.jsx(ra,{}),F.jsx(ra,{}),F.jsx(ra,{})]})]});if(e==="error"||m&&r.length===0){const ae=(I==null?void 0:I.body.includes("quota"))||(I==null?void 0:I.body.includes("حصتك"));return F.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[F.jsx(gk,{className:"w-20 h-20 text-red-400"}),F.jsx("h2",{className:"mt-6 text-3xl font-bold text-stone-800",children:I==null?void 0:I.title}),F.jsx("p",{className:"mt-2 max-w-lg text-lg text-stone-600",children:I==null?void 0:I.body}),ae&&F.jsx("a",{href:"https://console.cloud.google.com/billing",target:"_blank",rel:"noopener noreferrer",className:"mt-6 px-5 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors",children:v.manage_billing_link})]})}return F.jsxs("div",{className:"container mx-auto p-4 lg:p-6",children:[F.jsx(z_,{language:t,activeTopic:a,onSelect:M}),N.length===0&&!p?F.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-center",children:[F.jsx("h3",{className:"text-2xl text-stone-500",children:t==="ar"?"لم يتم العثور على مقالات":"No Articles Found"}),F.jsx("p",{className:"mt-2 text-stone-400",children:t==="ar"?"حاول تحديد فئة مختلفة.":"Try selecting a different topic."})]}):F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map((ae,G)=>{const W=G===0&&a==="all"&&V==="";return N.length===G+1?F.jsx("div",{ref:k,className:W?"md:col-span-2 lg:col-span-2":"",children:F.jsx($_,{article:ae,onReadMore:C,categoryText:B_[t][ae.category]||ae.category,uiText:v,isFeatured:W})},ae.id):F.jsx("div",{className:W?"md:col-span-2 lg:col-span-2":"",children:F.jsx($_,{article:ae,onReadMore:C,categoryText:B_[t][ae.category]||ae.category,uiText:v,isFeatured:W})},ae.id)})}),R&&F.jsx("div",{className:"flex justify-center my-8",children:F.jsxs("div",{className:"flex items-center justify-center gap-2 text-stone-600",children:[F.jsx(wm,{className:"w-6 h-6"}),F.jsx("span",{children:v.loading_older_articles})]})}),!x&&r.length>0&&F.jsxs("div",{className:"text-center my-10 p-6 bg-stone-200/70 rounded-lg max-w-4xl mx-auto",children:[F.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:v.end_of_feed_title}),F.jsx("p",{className:"mt-2 text-stone-600",children:v.end_of_feed_body})]})]})};return F.jsxs("div",{className:`min-h-screen ${t==="ar"?"font-serif-ar":"font-serif-en"}`,children:[e==="initializing"&&F.jsx(mk,{title:v.generating_title,subtitle:v.generating_subtitle}),s&&F.jsxs("div",{className:"sticky top-0 z-[60] bg-red-700 text-white p-2 text-center flex items-center justify-center gap-4 shadow-lg font-bold text-sm",children:[F.jsx("span",{children:v.new_edition_available}),F.jsx("button",{onClick:w,className:"bg-white text-red-700 font-semibold px-3 py-1 rounded-md hover:bg-red-100 transition-colors",children:v.click_to_refresh})]}),F.jsx(hk,{title:v.title,subtitle:v.subtitle,language:t,toggleLanguage:h,languageToggleText:v.language_toggle,onRefresh:w,searchQuery:V,setSearchQuery:L,user:i,onLogin:It,onLogout:hp.logout,uiText:v}),F.jsx("main",{children:Ze()}),F.jsx(oe.Suspense,{fallback:F.jsx(L3,{}),children:F.jsx(D3,{article:E,onClose:()=>C(null),language:t,isLoggedIn:!!i,onAddComment:Pe})}),b&&F.jsx(V3,{title:b.title,body:b.body,onClose:()=>S(null),confirmText:v.ok_button,language:t})]})};class b3 extends ds.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error in React component tree:",e,n)}render(){if(this.state.hasError){const e=document.documentElement.dir==="rtl";return F.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-stone-100 text-stone-800 p-6",children:F.jsxs("div",{className:"text-center p-8 bg-red-100 text-red-800 rounded-lg shadow-lg",children:[F.jsx("h1",{className:"text-3xl font-bold",children:e?"حدث خطأ ما":"Something went wrong."}),F.jsx("p",{className:"mt-4 text-lg",children:e?"لقد واجهنا خطأ غير متوقع. الرجاء محاولة تحديث الصفحة.":"An unexpected error occurred. Please try refreshing the page."}),F.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-red-700 text-white font-bold rounded-lg hover:bg-red-800 transition-colors",children:e?"تحديث الصفحة":"Refresh Page"})]})})}return this.props.children}}const O3=document.getElementById("root"),q3=dS(O3),B3=new WN({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!0}}});q3.render(F.jsx(ds.StrictMode,{children:F.jsx(b3,{children:F.jsx(KN,{client:B3,children:F.jsx(F3,{})})})}));export{G_ as T,Im as U,F as j,oe as r};
